<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js 和 ts | easy bookmark</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/easy-bookmark/favicon.ico">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?d517a1ee1e75b0fd216b5183a8f32ac0";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();      
      </script>
    <meta name="description" content="个人收藏">
    
    <link rel="preload" href="/easy-bookmark/assets/css/0.styles.9b6bb25f.css" as="style"><link rel="preload" href="/easy-bookmark/assets/js/app.98929521.js" as="script"><link rel="preload" href="/easy-bookmark/assets/js/2.6ed84ef8.js" as="script"><link rel="preload" href="/easy-bookmark/assets/js/60.b44a3b13.js" as="script"><link rel="prefetch" href="/easy-bookmark/assets/js/10.59e2f598.js"><link rel="prefetch" href="/easy-bookmark/assets/js/11.9fc8a230.js"><link rel="prefetch" href="/easy-bookmark/assets/js/12.089b352b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/13.e2ac9449.js"><link rel="prefetch" href="/easy-bookmark/assets/js/14.a988d92c.js"><link rel="prefetch" href="/easy-bookmark/assets/js/15.ae6ad2bb.js"><link rel="prefetch" href="/easy-bookmark/assets/js/16.416459c2.js"><link rel="prefetch" href="/easy-bookmark/assets/js/17.3aa5cbce.js"><link rel="prefetch" href="/easy-bookmark/assets/js/18.b724b90f.js"><link rel="prefetch" href="/easy-bookmark/assets/js/19.cb360c51.js"><link rel="prefetch" href="/easy-bookmark/assets/js/20.469dd230.js"><link rel="prefetch" href="/easy-bookmark/assets/js/21.62b9147c.js"><link rel="prefetch" href="/easy-bookmark/assets/js/22.dabef7dd.js"><link rel="prefetch" href="/easy-bookmark/assets/js/23.ffa9fcfd.js"><link rel="prefetch" href="/easy-bookmark/assets/js/24.a4781c35.js"><link rel="prefetch" href="/easy-bookmark/assets/js/25.79ef71a6.js"><link rel="prefetch" href="/easy-bookmark/assets/js/26.331c4dc5.js"><link rel="prefetch" href="/easy-bookmark/assets/js/27.5b1f1b94.js"><link rel="prefetch" href="/easy-bookmark/assets/js/28.37dd571e.js"><link rel="prefetch" href="/easy-bookmark/assets/js/29.580f58e7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/3.24a9cbfa.js"><link rel="prefetch" href="/easy-bookmark/assets/js/30.0630daa0.js"><link rel="prefetch" href="/easy-bookmark/assets/js/31.172b9e48.js"><link rel="prefetch" href="/easy-bookmark/assets/js/32.3c9adea6.js"><link rel="prefetch" href="/easy-bookmark/assets/js/33.5595eb88.js"><link rel="prefetch" href="/easy-bookmark/assets/js/34.931e4ffe.js"><link rel="prefetch" href="/easy-bookmark/assets/js/35.c06f071e.js"><link rel="prefetch" href="/easy-bookmark/assets/js/36.bc28c146.js"><link rel="prefetch" href="/easy-bookmark/assets/js/37.50b96313.js"><link rel="prefetch" href="/easy-bookmark/assets/js/38.61fdc3da.js"><link rel="prefetch" href="/easy-bookmark/assets/js/39.8e94008c.js"><link rel="prefetch" href="/easy-bookmark/assets/js/4.5591ca6b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/40.b9dd3fe7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/41.44f4e080.js"><link rel="prefetch" href="/easy-bookmark/assets/js/42.cf495ac2.js"><link rel="prefetch" href="/easy-bookmark/assets/js/43.96432862.js"><link rel="prefetch" href="/easy-bookmark/assets/js/44.28acc21b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/45.10534c91.js"><link rel="prefetch" href="/easy-bookmark/assets/js/46.6d79e8a6.js"><link rel="prefetch" href="/easy-bookmark/assets/js/47.a7759570.js"><link rel="prefetch" href="/easy-bookmark/assets/js/48.bc0667ab.js"><link rel="prefetch" href="/easy-bookmark/assets/js/49.c1ebffce.js"><link rel="prefetch" href="/easy-bookmark/assets/js/5.3de96ffc.js"><link rel="prefetch" href="/easy-bookmark/assets/js/50.a0f50760.js"><link rel="prefetch" href="/easy-bookmark/assets/js/51.52913321.js"><link rel="prefetch" href="/easy-bookmark/assets/js/52.b2c32e3a.js"><link rel="prefetch" href="/easy-bookmark/assets/js/53.cd133ce2.js"><link rel="prefetch" href="/easy-bookmark/assets/js/54.5becf481.js"><link rel="prefetch" href="/easy-bookmark/assets/js/55.3ec180c8.js"><link rel="prefetch" href="/easy-bookmark/assets/js/56.24bf3181.js"><link rel="prefetch" href="/easy-bookmark/assets/js/57.5edd1dc7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/58.697b6057.js"><link rel="prefetch" href="/easy-bookmark/assets/js/59.c422bbd3.js"><link rel="prefetch" href="/easy-bookmark/assets/js/6.010a5dd5.js"><link rel="prefetch" href="/easy-bookmark/assets/js/61.36d0c1bd.js"><link rel="prefetch" href="/easy-bookmark/assets/js/62.e4917905.js"><link rel="prefetch" href="/easy-bookmark/assets/js/63.690191bf.js"><link rel="prefetch" href="/easy-bookmark/assets/js/64.e6e01d48.js"><link rel="prefetch" href="/easy-bookmark/assets/js/65.13387ea7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/66.37c48ee9.js"><link rel="prefetch" href="/easy-bookmark/assets/js/67.fa7e4f5a.js"><link rel="prefetch" href="/easy-bookmark/assets/js/68.eb40d0ee.js"><link rel="prefetch" href="/easy-bookmark/assets/js/69.584d43ea.js"><link rel="prefetch" href="/easy-bookmark/assets/js/7.48552666.js"><link rel="prefetch" href="/easy-bookmark/assets/js/70.3abc29fb.js"><link rel="prefetch" href="/easy-bookmark/assets/js/71.e149adad.js"><link rel="prefetch" href="/easy-bookmark/assets/js/72.b73ecb17.js"><link rel="prefetch" href="/easy-bookmark/assets/js/73.9307c017.js"><link rel="prefetch" href="/easy-bookmark/assets/js/74.c1502fb4.js"><link rel="prefetch" href="/easy-bookmark/assets/js/75.69f4626b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/76.c25802cb.js"><link rel="prefetch" href="/easy-bookmark/assets/js/77.a37efc00.js"><link rel="prefetch" href="/easy-bookmark/assets/js/8.a079a873.js"><link rel="prefetch" href="/easy-bookmark/assets/js/9.e1d2376d.js">
    <link rel="stylesheet" href="/easy-bookmark/assets/css/0.styles.9b6bb25f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/easy-bookmark/" class="home-link router-link-active"><img src="/easy-bookmark/logo.jpg" alt="easy bookmark" class="logo"> <span class="site-name can-hide">easy bookmark</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/easy-bookmark/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/easy-bookmark/blogs/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/easy-bookmark/website/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/easy-bookmark/daily/" class="nav-link">
  日常
</a></div><div class="nav-item"><a href="/easy-bookmark/front/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/easy-bookmark/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://foreverwaiting.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/foreverwaiting/easy-bookmark" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/easy-bookmark/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/easy-bookmark/blogs/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/easy-bookmark/website/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/easy-bookmark/daily/" class="nav-link">
  日常
</a></div><div class="nav-item"><a href="/easy-bookmark/front/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/easy-bookmark/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://foreverwaiting.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/foreverwaiting/easy-bookmark" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/easy-bookmark/front/" aria-current="page" class="sidebar-link">前端知识分享</a></li><li><a href="/easy-bookmark/front/ast.html" class="sidebar-link">ast抽象语法树</a></li><li><a href="/easy-bookmark/front/backend.html" class="sidebar-link">back end</a></li><li><a href="/easy-bookmark/front/bom.html" class="sidebar-link">BOM</a></li><li><a href="/easy-bookmark/front/browser.html" class="sidebar-link">浏览器相关</a></li><li><a href="/easy-bookmark/front/charts.html" class="sidebar-link">可视化</a></li><li><a href="/easy-bookmark/front/codeESLint.html" class="sidebar-link">代码规范</a></li><li><a href="/easy-bookmark/front/computerBook.html" class="sidebar-link">计算机 📚</a></li><li><a href="/easy-bookmark/front/computerNetwork.html" class="sidebar-link">计算机网络</a></li><li><a href="/easy-bookmark/front/cssLessScss.html" class="sidebar-link">CSS</a></li><li><a href="/easy-bookmark/front/dataMock.html" class="sidebar-link">Mock Data</a></li><li><a href="/easy-bookmark/front/dataStructureAndAlgorithm.html" class="sidebar-link">数据结构与算法</a></li><li><a href="/easy-bookmark/front/dom.html" class="sidebar-link">DOM</a></li><li><a href="/easy-bookmark/front/es6.html" class="sidebar-link">es6</a></li><li><a href="/easy-bookmark/front/frontendSecurity.html" class="sidebar-link">前端安全</a></li><li><a href="/easy-bookmark/front/futureDevelopment.html" class="sidebar-link">前端社区发展，新技术</a></li><li><a href="/easy-bookmark/front/gitNpm.html" class="sidebar-link">版本控制等</a></li><li><a href="/easy-bookmark/front/h5css3.html" class="sidebar-link">HTML（5）CSS（3）基础</a></li><li><a href="/easy-bookmark/front/http.html" class="sidebar-link">http请求</a></li><li><a href="/easy-bookmark/front/javascriptTypescript.html" aria-current="page" class="active sidebar-link">js 和 ts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#基础语法" class="sidebar-link">基础语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#ecmascript-一切区分大小写" class="sidebar-link">ECMAScript 一切区分大小写</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#标识符-变量-函数-属性名-函数参数-的规定" class="sidebar-link">标识符（变量/函数/属性名/函数参数）的规定：</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#严格模式下不确定行为将得到处理、不安全操作会报错" class="sidebar-link">严格模式下不确定行为将得到处理、不安全操作会报错</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#语句由分号结尾-省略则由解析器确定句尾。建议加分号" class="sidebar-link">语句由分号结尾，省略则由解析器确定句尾。建议加分号！！！</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#关键字不可用于标识符-保留字-将来用作关键字的-也不可。严格模式下-eval-和-arguments-也不可用作标识符或者属性名。" class="sidebar-link">关键字不可用于标识符，保留字（将来用作关键字的）也不可。严格模式下，eval 和 arguments 也不可用作标识符或者属性名。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#变量-松散类型。" class="sidebar-link">变量，松散类型。</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#数据类型" class="sidebar-link">数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#基本数据类型-undefined、null、number、string、boolean-复杂数据类型-object" class="sidebar-link">基本数据类型 undefined、null、number、string、boolean，复杂数据类型 object</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#typeof-操作值的返回值-undefined、boolean、string、number、object、function、" class="sidebar-link">typeof 操作值的返回值：undefined、boolean、string、number、object、function、</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#typeof-对未声明的变量和未初始化的变量都反悔-undefined" class="sidebar-link">typeof 对未声明的变量和未初始化的变量都反悔 undefined</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#boolean-方法对空字符串、0、nan、null、undefined-转为-false" class="sidebar-link">Boolean()方法对空字符串、0、NaN、null、undefined 转为 false</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#number-范围-number-min-value、number-max-value-如果计算值不在范围内-自动转换为-infinity-和-infinity-且后续无法参与计算-isfinite-检测是否超出范围。" class="sidebar-link">Number 范围，Number.MINVALUE、Number.MAXVALUE，如果计算值不在范围内，自动转换为 infinity 和-infinity 且后续无法参与计算，isFinite()检测是否超出范围。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#任何数除以-0-返回-nan-not-a-number。且-nan-nan。isnan-判断是否是个数-会转化后判断。" class="sidebar-link">任何数除以 0 返回 NaN，not a number。且 NaN!=NaN。isNaN()判断是否是个数，会转化后判断。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#一元加操作符的操作跟-number-一样-parseint-val-进制-parsefloat-只解析十进制-且解析遇到第一个无效浮点字符停止-即在第二个小数点停止。" class="sidebar-link">一元加操作符的操作跟 Number()一样，parseInt(val，进制)，parseFloat()只解析十进制，且解析遇到第一个无效浮点字符停止，即在第二个小数点停止。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#string-字符串-转义序列-n-换行、-b-空格、-r-回车、-斜杠、-单引号、-双引号、-unicode-字符。" class="sidebar-link">string 字符串，转义序列，\n 换行、\b 空格、\r 回车、\\斜杠、\'单引号、\&quot;双引号、\Unicode 字符。</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#操作符" class="sidebar-link">操作符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#用于操作数据值的操作符【算术操作符、位操作符、关系操作符、相等操作符】。操作符可适用于字符串数字布尔对象-对对象回先执行-valueof-或者-tostring-方法。" class="sidebar-link">用于操作数据值的操作符【算术操作符、位操作符、关系操作符、相等操作符】。操作符可适用于字符串数字布尔对象，对对象回先执行 valueOf 或者 toString 方法。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#一元操作符-只能操作一个值。" class="sidebar-link">一元操作符：只能操作一个值。</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#语句、函数" class="sidebar-link">语句、函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#label-用户跳出循环-结合-break、continue。" class="sidebar-link">label 用户跳出循环，结合 break、continue。</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#基本类型引用类型" class="sidebar-link">基本类型引用类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#基本类型、引用类型" class="sidebar-link">基本类型、引用类型</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#传递参数【按值传递】" class="sidebar-link">传递参数【按值传递】</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#检测类型" class="sidebar-link">检测类型</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#var-逗号隔开可定义多个变量" class="sidebar-link">var 逗号隔开可定义多个变量</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#环境" class="sidebar-link">环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#执行环境及作用域。" class="sidebar-link">执行环境及作用域。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#全局环境就是最外成的执行环境-根据-ecmascript-实现所在的宿主环境不同-表示宿主环境的对象也不一样-在-web-浏览器-全局执行环境被认为是-window-对象。" class="sidebar-link">全局环境就是最外成的执行环境，根据 ECMAScript 实现所在的宿主环境不同，表示宿主环境的对象也不一样，在 web 浏览器，全局执行环境被认为是 window 对象。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#ecmascript-执行流" class="sidebar-link">ECMAScript 执行流：</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#某个执行环境" class="sidebar-link">某个执行环境：</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#链的前端-作用域链-由一个个变量对象连接-链的后端-最终是-window" class="sidebar-link">链的前端============作用域链（由一个个变量对象连接）=========链的后端（最终是 window）</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#延长作用域链" class="sidebar-link">延长作用域链</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#垃圾回收" class="sidebar-link">垃圾回收</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#管理内存" class="sidebar-link">管理内存</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#引用类型" class="sidebar-link">引用类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#各种类型-原型链-闭包-面向对象-函数" class="sidebar-link">各种类型，原型链，闭包，面向对象，函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#总结" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#基本类型值在内存中占据固定大小的空间-因此被保存在栈内存中。" class="sidebar-link">基本类型值在内存中占据固定大小的空间，因此被保存在栈内存中。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#从一个变量向另一个变量复制基本类型的值-会创建这个值的一个副本。" class="sidebar-link">从一个变量向另一个变量复制基本类型的值，会创建这个值的一个副本。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#引用类型的值是对象-保存在堆内存中。" class="sidebar-link">引用类型的值是对象，保存在堆内存中。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#包含引用类型值的变量实际上包含的并不是对象本身-而是一个指向该对象的指针。" class="sidebar-link">包含引用类型值的变量实际上包含的并不是对象本身，而是一个指向该对象的指针。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#从一个变量向另一个变量复制引用类型的值-复制的其实是指针-因此两个变量最终都指向同一个数据。" class="sidebar-link">从一个变量向另一个变量复制引用类型的值，复制的其实是指针，因此两个变量最终都指向同一个数据。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#instanceof-操作符。" class="sidebar-link">instanceof 操作符。</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#事件" class="sidebar-link">事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#事件流" class="sidebar-link">事件流</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#dom0-级事件处理程序" class="sidebar-link">DOM0 级事件处理程序</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#dom2-级事件" class="sidebar-link">“DOM2 级事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#ie-事件处理程序【ie8-及更早版本只支持事件冒泡-所以通过-attachevent-添加的事件处理程序都会被添加到冒泡阶段。所以就两个参数】" class="sidebar-link">IE 事件处理程序【IE8 及更早版本只支持事件冒泡，所以通过 attachEvent()添加的事件处理程序都会被添加到冒泡阶段。所以就两个参数】</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#事件对象-event" class="sidebar-link">事件对象 event</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#事件类型" class="sidebar-link">事件类型</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#ui-事件" class="sidebar-link">UI 事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#焦点事件" class="sidebar-link">焦点事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#鼠标与滚轮事件" class="sidebar-link">鼠标与滚轮事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#更多的事件信息" class="sidebar-link">更多的事件信息</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#键盘" class="sidebar-link">键盘</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#contextmenu-事件右键菜单" class="sidebar-link">contextmenu 事件右键菜单</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#beforeunload-事件" class="sidebar-link">beforeunload 事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#domcontentloaded-事件" class="sidebar-link">DOMContentLoaded 事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#hashchange-事件" class="sidebar-link">hashchange 事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#设备事件" class="sidebar-link">设备事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#触摸与手势事件" class="sidebar-link">触摸与手势事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#对-事件处理程序过多-问题的解决方案就是事件委托。事件委托利用了事件冒泡" class="sidebar-link">对“事件处理程序过多”问题的解决方案就是事件委托。事件委托利用了事件冒泡，</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#模拟事件-模拟点击等" class="sidebar-link">模拟事件，模拟点击等</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#表单" class="sidebar-link">表单</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#基础" class="sidebar-link">基础</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#共有的表单字段属性" class="sidebar-link">共有的表单字段属性</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#共有的表单字段事件" class="sidebar-link">共有的表单字段事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#select" class="sidebar-link">select()</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#选择部分文本" class="sidebar-link">选择部分文本</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#剪切板事件" class="sidebar-link">剪切板事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#html5-约束验证-api" class="sidebar-link">HTML5 约束验证 API</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#输入模式" class="sidebar-link">输入模式</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#检测表单有效性" class="sidebar-link">检测表单有效性</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#validity-属性则会告诉你为什么字段有效或无效。" class="sidebar-link">validity 属性则会告诉你为什么字段有效或无效。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#通过对-form-设置-novalidate-属性-可以告诉表单不进行验证。" class="sidebar-link">通过对 form 设置 novalidate 属性，可以告诉表单不进行验证。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#如果为-appendchild-方法传入一个文档中已有的元素-那么就会先从该元素的父节点中移除它-再把它添加到指定的位置。【将一个选择框中的选项移动到另一个选择框中】" class="sidebar-link">如果为 appendChild()方法传入一个文档中已有的元素，那么就会先从该元素的父节点中移除它，再把它添加到指定的位置。【将一个选择框中的选项移动到另一个选择框中】</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#富文本编辑【两种实现】" class="sidebar-link">富文本编辑【两种实现】</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#操作富文本【使用-document-execcommand-】" class="sidebar-link">操作富文本【使用 document.execCommand()】</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#canvas2d" class="sidebar-link">canvas2D</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#要使用-canvas-元素-必须先设置其-width-和-height-属性" class="sidebar-link">要使用 canvas 元素，必须先设置其 width 和 height 属性</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#要在这块画布-canvas-上绘图-需要取得绘图上下文" class="sidebar-link">要在这块画布（canvas）上绘图，需要取得绘图上下文</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#要取得绘图上下文对象的引用-需要调用-getcontext-方法并传入上下文的名字。传入-2d-就可以取得-2d-上下文对象。" class="sidebar-link">要取得绘图上下文对象的引用，需要调用 getContext()方法并传入上下文的名字。传入&quot;2d&quot;，就可以取得 2D 上下文对象。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#todataurl-方法-可以导出在元素上绘制的图像【跨域限制】" class="sidebar-link">toDataURL()方法，可以导出在元素上绘制的图像【跨域限制】</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#基本功能-填充和描边、绘制矩形、绘制路径、绘制文本、变换、绘制图像、阴影、渐变" class="sidebar-link">基本功能：填充和描边、绘制矩形、绘制路径、绘制文本、变换、绘制图像、阴影、渐变</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#使用图像数据" class="sidebar-link">使用图像数据</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#合成" class="sidebar-link">合成</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#webgl-是针对-canvas-的-3d-上下文。" class="sidebar-link">WebGL 是针对 Canvas 的 3D 上下文。</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#跨文档消息传递" class="sidebar-link">跨文档消息传递</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#postmessage-方法-目的-向另一个地方传递数据。【-另一个地方-指的是包含在当前页面中的元素-或者由当前页面弹出的窗口。】" class="sidebar-link">postMessage()方法：目的：向另一个地方传递数据。【“另一个地方”指的是包含在当前页面中的元素，或者由当前页面弹出的窗口。】</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#接收到-xdm-消息时-会触发-window-对象的-message-事件。" class="sidebar-link">接收到 XDM 消息时，会触发 window 对象的 message 事件。</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#拖放" class="sidebar-link">拖放</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#默认情况下-图像、链接和文本是可以拖动的" class="sidebar-link">默认情况下，图像、链接和文本是可以拖动的</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#拖放事件" class="sidebar-link">拖放事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#自定义放置目标" class="sidebar-link">自定义放置目标</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#datatransfer-对象【在拖放事件的事件处理程序中访问-datatransfer-对象。】" class="sidebar-link">dataTransfer 对象【在拖放事件的事件处理程序中访问 dataTransfer 对象。】</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#datatransfer-对象的两个属性-dropeffect-和-effectallowed" class="sidebar-link">dataTransfer 对象的两个属性：dropEffect 和 effectAllowed</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#媒体元素" class="sidebar-link">媒体元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#开始和结束标签之间的任何内容都将作为后备内容-在浏览器不支持这两个媒体元素的情况下显示。" class="sidebar-link">开始和结束标签之间的任何内容都将作为后备内容，在浏览器不支持这两个媒体元素的情况下显示。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#因为并非所有浏览器都支持所有媒体格式-所以可以指定多个不同的媒体来源。为此-不用在标签中指定-src-属性-而是要像下面这样使用一或多个元素。" class="sidebar-link">因为并非所有浏览器都支持所有媒体格式，所以可以指定多个不同的媒体来源。为此，不用在标签中指定 src 属性，而是要像下面这样使用一或多个元素。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#音视频-audio-video-共有的属性" class="sidebar-link">音视频 audio，video 共有的属性</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#事件-2" class="sidebar-link">事件</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#事件栗子" class="sidebar-link">事件栗子</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#audio-元素还有一个原生的-javascript-构造函数-audio-可以在任何时候播放音频-。" class="sidebar-link">audio 元素还有一个原生的 JavaScript 构造函数 Audio，可以在任何时候播放音频 。</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#错误" class="sidebar-link">错误</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#捕获错误" class="sidebar-link">捕获错误</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#finally【只要代码中包含-finally-子句-则无论-try-或-catch-语句块中包含什么代码-甚至-return-语句-都不会阻止-finally-子句的执行】" class="sidebar-link">finally【只要代码中包含 finally 子句，则无论 try 或 catch 语句块中包含什么代码——甚至 return 语句，都不会阻止 finally 子句的执行】</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#json" class="sidebar-link">JSON</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#序列化选项-json-stringify-除了要序列化的-javascript-对象外-还可以接收另外两个参数" class="sidebar-link">序列化选项 JSON.stringify()：除了要序列化的 JavaScript 对象外，还可以接收另外两个参数</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#json-parse-方法也可以接收另一个参数-该参数是一个函数-将在每个键值对儿上调用" class="sidebar-link">JSON.parse()方法也可以接收另一个参数，该参数是一个函数，将在每个键值对儿上调用</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#跨域" class="sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#利用图像-ping-【在线广告跟踪浏览量的主要方式】【动态地创建图像-使用它们的-onload-和-onerror-事件处理程序来确定是否接收到了响应。】" class="sidebar-link">利用图像 Ping 【在线广告跟踪浏览量的主要方式】【动态地创建图像，使用它们的 onload 和 onerror 事件处理程序来确定是否接收到了响应。】</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#jsonp" class="sidebar-link">jsonp</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#comet-服务器推送" class="sidebar-link">Comet 服务器推送</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#web-sockets【可跨域】" class="sidebar-link">Web Sockets【可跨域】</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#安全的类型检测" class="sidebar-link">安全的类型检测</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#object-prototype-tostring" class="sidebar-link">Object.prototype.toString</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#page-visibility-api" class="sidebar-link">Page Visibility API</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#geolocation-api" class="sidebar-link">Geolocation API</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#web-workers" class="sidebar-link">Web Workers</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#图文不可复制" class="sidebar-link">图文不可复制</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#微任务-宏任务" class="sidebar-link">微任务 宏任务</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#sessionstorage-、localstorage-和-cookie-之间的区别" class="sidebar-link">sessionStorage 、localStorage 和 cookie 之间的区别</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#web-storage-与-cookie-相比存在的优势" class="sidebar-link">Web Storage 与 Cookie 相比存在的优势：</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#getxxxbyxxx-与-queryselector" class="sidebar-link">getXXXByXXX 与 querySelector</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#lodash-稀疏数组" class="sidebar-link">lodash 稀疏数组</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#节流函数防抖函数" class="sidebar-link">节流函数防抖函数</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#满足-if-a-1-a-2-a-3-这个条件" class="sidebar-link">满足 if (a == 1 &amp; a == 2 &amp; a == 3)这个条件</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#js-定时器" class="sidebar-link">JS 定时器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#从-js-执行机制说起" class="sidebar-link">从 JS 执行机制说起</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#定时器" class="sidebar-link">定时器</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#settimeout" class="sidebar-link">setTimeout</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#setinterval" class="sidebar-link">setInterval</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#setimmediate" class="sidebar-link">setImmediate</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#requestanimationframe" class="sidebar-link">requestAnimationFrame</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#process-nexttick" class="sidebar-link">process.nextTick</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#事件循环、微任务、宏任务" class="sidebar-link">事件循环、微任务、宏任务</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#math-对象" class="sidebar-link">Math 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#math-对象提供以下一些静态方法" class="sidebar-link">Math 对象提供以下一些静态方法：</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#🌰-栗子-任意范围的随机数生成函数如下" class="sidebar-link">🌰 栗子：任意范围的随机数生成函数如下：</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#🌰-栗子-任意范围的随机整数生成函数如下" class="sidebar-link">🌰 栗子：任意范围的随机整数生成函数如下：</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#🌰-栗子-返回随机字符的例子如下" class="sidebar-link">🌰 栗子：返回随机字符的例子如下：</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#循环-for-of-iterator" class="sidebar-link">循环 for-of Iterator</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#object-freeze" class="sidebar-link">Object.freeze</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#promise-解决的顺序与-promise-all-无关。" class="sidebar-link">Promise 解决的顺序与 Promise.all 无关。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#展开操作符" class="sidebar-link">展开操作符</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#数组方法绑定" class="sidebar-link">数组方法绑定</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#js-base64-编码解码" class="sidebar-link">JS Base64 编码解码</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#base64-解码" class="sidebar-link">Base64 解码</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#base64-编码" class="sidebar-link">Base64 编码</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#中文-base64-数据转换会有报错问题" class="sidebar-link">中文 Base64 数据转换会有报错问题</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#任意文件-base64-编码" class="sidebar-link">任意文件 Base64 编码</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#_1-转义-document-createtextnode-把-html-内容作为文本节点的-textcontent-内容-然后使用普通元素的-innerhtml-属性返回下就可以了" class="sidebar-link">1. 转义 document.createTextNode 把 HTML 内容作为文本节点的 textContent 内容，然后使用普通元素的 innerHTML 属性返回下就可以了</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#_2-反转义-domparser-api。" class="sidebar-link">2.反转义 DOMParser API。</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#_3-借助-textarea-元素-这是-ie-浏览器时代常用的一种方法" class="sidebar-link">3.借助 textarea 元素，这是 IE 浏览器时代常用的一种方法</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/front/javascriptTypescript.html#万物皆空之-javascript-原型" class="sidebar-link">万物皆空之 JavaScript 原型</a></li></ul></li><li><a href="/easy-bookmark/front/libraryFrame.html" class="sidebar-link">流行的库和框架</a></li><li><a href="/easy-bookmark/front/miniapp.html" class="sidebar-link">小程序</a></li><li><a href="/easy-bookmark/front/module.html" class="sidebar-link">模块化开发与构建工具</a></li><li><a href="/easy-bookmark/front/networkCommunication.html" class="sidebar-link">网络通信</a></li><li><a href="/easy-bookmark/front/performanceOptimization.html" class="sidebar-link">性能优化</a></li><li><a href="/easy-bookmark/front/programming.html" class="sidebar-link">编程思想</a></li><li><a href="/easy-bookmark/front/regularExpression.html" class="sidebar-link">正则</a></li><li><a href="/easy-bookmark/front/softwareApi.html" class="sidebar-link">软件架构</a></li><li><a href="/easy-bookmark/front/ssr.html" class="sidebar-link">SSR</a></li><li><a href="/easy-bookmark/front/unitTest.html" class="sidebar-link">单元测试</a></li><li><a href="/easy-bookmark/front/utils.html" class="sidebar-link">工具库</a></li><li><a href="/easy-bookmark/front/v8.html" class="sidebar-link">v8 Chrome</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js-和-ts"><a href="#js-和-ts" class="header-anchor">#</a> js 和 ts</h1> <h2 id="基础语法"><a href="#基础语法" class="header-anchor">#</a> 基础语法</h2> <h3 id="ecmascript-一切区分大小写"><a href="#ecmascript-一切区分大小写" class="header-anchor">#</a> ECMAScript 一切区分大小写</h3> <h3 id="标识符-变量-函数-属性名-函数参数-的规定"><a href="#标识符-变量-函数-属性名-函数参数-的规定" class="header-anchor">#</a> 标识符（变量/函数/属性名/函数参数）的规定：</h3> <ul><li><p>第一个字符：必须是一个字母、下划线、或者$</p></li> <li><p>其他字符：可以是字母、下划线、$、数字，标识符的字母可以是 ASCII 或者 Unicode。</p></li> <li><p>格式：驼峰大小写</p></li> <li><p>关键字、保留字、true、false、null 不可以用作标识符</p></li></ul> <h3 id="严格模式下不确定行为将得到处理、不安全操作会报错"><a href="#严格模式下不确定行为将得到处理、不安全操作会报错" class="header-anchor">#</a> 严格模式下不确定行为将得到处理、不安全操作会报错</h3> <ul><li>整个脚本使用严格模式：顶部添加 &quot;use strict&quot;</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 指定函数严格模式：</span>
<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span>
  <span class="token comment">//函数体</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="语句由分号结尾-省略则由解析器确定句尾。建议加分号"><a href="#语句由分号结尾-省略则由解析器确定句尾。建议加分号" class="header-anchor">#</a> 语句由分号结尾，省略则由解析器确定句尾。建议加分号！！！</h3> <h3 id="关键字不可用于标识符-保留字-将来用作关键字的-也不可。严格模式下-eval-和-arguments-也不可用作标识符或者属性名。"><a href="#关键字不可用于标识符-保留字-将来用作关键字的-也不可。严格模式下-eval-和-arguments-也不可用作标识符或者属性名。" class="header-anchor">#</a> 关键字不可用于标识符，保留字（将来用作关键字的）也不可。严格模式下，eval 和 arguments 也不可用作标识符或者属性名。</h3> <h3 id="变量-松散类型。"><a href="#变量-松散类型。" class="header-anchor">#</a> 变量，松散类型。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// var定义的变量成为该变量作用域中的局部变量，如：</span>
<span class="token keyword">function</span> <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token string">'nihao'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>会报错，
</code></pre></div><h2 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h2> <h3 id="基本数据类型-undefined、null、number、string、boolean-复杂数据类型-object"><a href="#基本数据类型-undefined、null、number、string、boolean-复杂数据类型-object" class="header-anchor">#</a> 基本数据类型 undefined、null、number、string、boolean，复杂数据类型 object</h3> <h3 id="typeof-操作值的返回值-undefined、boolean、string、number、object、function、"><a href="#typeof-操作值的返回值-undefined、boolean、string、number、object、function、" class="header-anchor">#</a> typeof 操作值的返回值：undefined、boolean、string、number、object、function、</h3> <ul><li>写法：typeof 被操作值。 typeof 是一个操作值不是函数，所以被操作值不用带括号。</li></ul> <h3 id="typeof-对未声明的变量和未初始化的变量都反悔-undefined"><a href="#typeof-对未声明的变量和未初始化的变量都反悔-undefined" class="header-anchor">#</a> typeof 对未声明的变量和未初始化的变量都反悔 undefined</h3> <h3 id="boolean-方法对空字符串、0、nan、null、undefined-转为-false"><a href="#boolean-方法对空字符串、0、nan、null、undefined-转为-false" class="header-anchor">#</a> Boolean()方法对空字符串、0、NaN、null、undefined 转为 false</h3> <h3 id="number-范围-number-min-value、number-max-value-如果计算值不在范围内-自动转换为-infinity-和-infinity-且后续无法参与计算-isfinite-检测是否超出范围。"><a href="#number-范围-number-min-value、number-max-value-如果计算值不在范围内-自动转换为-infinity-和-infinity-且后续无法参与计算-isfinite-检测是否超出范围。" class="header-anchor">#</a> Number 范围，Number.MIN_VALUE、Number.MAX_VALUE，如果计算值不在范围内，自动转换为 infinity 和-infinity 且后续无法参与计算，isFinite()检测是否超出范围。</h3> <h3 id="任何数除以-0-返回-nan-not-a-number。且-nan-nan。isnan-判断是否是个数-会转化后判断。"><a href="#任何数除以-0-返回-nan-not-a-number。且-nan-nan。isnan-判断是否是个数-会转化后判断。" class="header-anchor">#</a> 任何数除以 0 返回 NaN，not a number。且 NaN!=NaN。isNaN()判断是否是个数，会转化后判断。</h3> <ul><li>调用 valueOf()方法、toString()方法</li></ul> <h3 id="一元加操作符的操作跟-number-一样-parseint-val-进制-parsefloat-只解析十进制-且解析遇到第一个无效浮点字符停止-即在第二个小数点停止。"><a href="#一元加操作符的操作跟-number-一样-parseint-val-进制-parsefloat-只解析十进制-且解析遇到第一个无效浮点字符停止-即在第二个小数点停止。" class="header-anchor">#</a> 一元加操作符的操作跟 Number()一样，parseInt(val，进制)，parseFloat()只解析十进制，且解析遇到第一个无效浮点字符停止，即在第二个小数点停止。</h3> <h3 id="string-字符串-转义序列-n-换行、-b-空格、-r-回车、-斜杠、-单引号、-双引号、-unicode-字符。"><a href="#string-字符串-转义序列-n-换行、-b-空格、-r-回车、-斜杠、-单引号、-双引号、-unicode-字符。" class="header-anchor">#</a> string 字符串，转义序列，\n 换行、\b 空格、\r 回车、\斜杠、'单引号、&quot;双引号、\Unicode 字符。</h3> <p>toString()：
数值.toString(进制)默认十进制，可传参。
布尔值.toString()：‘true‘ ‘false‘。
字符串.toString()：返回字符串的副本。
对 null 和 undefined 报错</p> <p>String():
以上同上且对 null 返回‘null‘，对 undefined 返回‘undefined‘。</p> <h2 id="操作符"><a href="#操作符" class="header-anchor">#</a> 操作符</h2> <h3 id="用于操作数据值的操作符【算术操作符、位操作符、关系操作符、相等操作符】。操作符可适用于字符串数字布尔对象-对对象回先执行-valueof-或者-tostring-方法。"><a href="#用于操作数据值的操作符【算术操作符、位操作符、关系操作符、相等操作符】。操作符可适用于字符串数字布尔对象-对对象回先执行-valueof-或者-tostring-方法。" class="header-anchor">#</a> 用于操作数据值的操作符【算术操作符、位操作符、关系操作符、相等操作符】。操作符可适用于字符串数字布尔对象，对对象回先执行 valueOf 或者 toString 方法。</h3> <h3 id="一元操作符-只能操作一个值。"><a href="#一元操作符-只能操作一个值。" class="header-anchor">#</a> 一元操作符：只能操作一个值。</h3> <p>【++、--前置后置】前置先加或减，再操作；后置先操作再加或减。对所有类型值都可以操作。
【+、-加减】
【～、&amp;、|、^按位】二进制操作：64 位转为 32 位，执行位操作（0 变 1，1 变 0），32 转回 64 位。正数同上，负数先转二进制补码（求绝对值二进制码，0 变 1，1 变 0 就是二进制反码，二进制反码加 1，就是这个负数的二进制），后续同理。
按位非～，操作数的负值减 1。如～ 25 === -26
按位与&amp;，23 &amp; 3 两个数二进制数按规则求值。两个都为 1 才 1，否则为 0
按位或|，23 | 3 两个数二进制数按规则求值。有一个为 1 就是 1，否则为 0
按位异或^，23 ^ 3 两个数二进制数按规则求值。两个都为 1 和都为 0 是 0，否则为 1
【&lt;&lt;、&gt;&gt;、&gt;&gt;&gt;左移有符号右移无符号右移】二进制移动 ##：“&lt;&lt;”运算符执行左移位运算。在移位运算过程中，符号位始终保持不变。如果右侧空出位置，则自动填充为 0；超出 32 位的值，则自动丢弃。 ##：“&gt;&gt;”运算符执行有符号右移位运算。与左移运算操作相反，它把 32 位数字中的所有有效位整体右移，再使用符号位的值填充空位。移动过程中超出的值将被丢弃。 ##：“&gt;&gt;&gt;”运算符执行五符号右移位运算。它把无符号的 32 位整数所有数位整体右移。
对于无符号数或正数右移运算，无符号右移与有符号右移运算的结果是相同的。
对于负数来说，无符号右移将使用 0 来填充所有的空位，同时会把负数作为正数来处理，所得结果会非常大所以，使用无符号右移运算符时要特别小心，避免意外错误。
【!、!!、&amp;&amp;、||】
【*、/、+、-、&gt;、&lt;、&gt;=、&lt;=、==、===、三元运算符、赋值=、逗号操作符，】</p> <h2 id="语句、函数"><a href="#语句、函数" class="header-anchor">#</a> 语句、函数</h2> <h3 id="label-用户跳出循环-结合-break、continue。"><a href="#label-用户跳出循环-结合-break、continue。" class="header-anchor">#</a> label 用户跳出循环，结合 break、continue。</h3> <ul><li><a href="https://www.cnblogs.com/forever-xuehf/p/12775024.html" target="_blank" rel="noopener noreferrer">label 用户跳出循环<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>函数的命名参数可与 arguments 一起使用，arguments 值永远跟对应命名参数值保持同步，但是独立的内存空间。
没有传递值的命名参数会是 undefined，ECMAScript 中所有参数传递的都是值，不可能通过引用传递参数。
没有重载，同名函数会覆盖。</p> <h2 id="基本类型引用类型"><a href="#基本类型引用类型" class="header-anchor">#</a> 基本类型引用类型</h2> <h3 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h3> <p>按照 JavaScript 变量松散类型的本质，决定了他只是在特定时间用于保存特定值的一个名字而已。由于不存在定义某个变量必须要保存何种数据类型值的规则，变量的值及数据类型可以在脚本的生命周期内改变。</p> <h3 id="基本类型、引用类型"><a href="#基本类型、引用类型" class="header-anchor">#</a> 基本类型、引用类型</h3> <p>js 引擎对变量的存储：堆（object 对象）、栈（Boolean、Number、String、Undefined、Null、以及对象变量的指针）
栈内存中的变量一般都是已知大小或者有范围上限的，算作一种简单存储。而堆内存存储的对象类型数据对于大小这方面，一般都是未知的。个人认为，这也是为什么 null 作为一个 object 类型的变量却存储在栈内存中的原因。
【const 定义常量其实就是指针，实际保证的就是这个常量指向的那个内存地址不可改动。
基本类型：的值指向的内存地址就是那个值，所以就是等于常量。
引用类型：的值指向的内存地址保存的只是一个指针，所以只能保证指针固定，对其依旧可写，但重新赋值会报错（因为改内存地址了），若想冻结对象使用 Object.freeze()】
基本类型：是简单的数据段。按值访问，因为可以操作保存在变量中的实际的值。存在栈内存中
引用类型：是指那些可能由多个值构成的对象。存在堆内存中</p> <h3 id="传递参数【按值传递】"><a href="#传递参数【按值传递】" class="header-anchor">#</a> 传递参数【按值传递】</h3> <p>在向函数传递基本类型参数值时，被传递的值会被复制给一个局部变量（即命名参数，或者用 ECMASscript 的话来说，就是 Arguements 对象中的一个元素）。
在向函数传递引用类型参数值时，会把这个值在内存中的地址复制一份给局部变量，因此这个局部变量的变化会反应在函数的外部。</p> <h3 id="检测类型"><a href="#检测类型" class="header-anchor">#</a> 检测类型</h3> <p>检测变量基本数据类型使用 typeof，instanceof 根据原型链识别</p> <h3 id="var-逗号隔开可定义多个变量"><a href="#var-逗号隔开可定义多个变量" class="header-anchor">#</a> var 逗号隔开可定义多个变量</h3> <h2 id="环境"><a href="#环境" class="header-anchor">#</a> 环境</h2> <h3 id="执行环境及作用域。"><a href="#执行环境及作用域。" class="header-anchor">#</a> 执行环境及作用域。</h3> <p>执行环境定义了变量和函数有权限访问的其他数据，决定各自行为。
每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都定义在这个对象中。</p> <h3 id="全局环境就是最外成的执行环境-根据-ecmascript-实现所在的宿主环境不同-表示宿主环境的对象也不一样-在-web-浏览器-全局执行环境被认为是-window-对象。"><a href="#全局环境就是最外成的执行环境-根据-ecmascript-实现所在的宿主环境不同-表示宿主环境的对象也不一样-在-web-浏览器-全局执行环境被认为是-window-对象。" class="header-anchor">#</a> 全局环境就是最外成的执行环境，根据 ECMAScript 实现所在的宿主环境不同，表示宿主环境的对象也不一样，在 web 浏览器，全局执行环境被认为是 window 对象。</h3> <p>某个执行环境中所有代码执行完毕，该环境被销毁，保存在其中的函数定义和变量也随之销毁。
全局执行环境只有到应用程序退出（如关闭网页或者浏览器）才销毁。
每个函数都有自己执行环境。</p> <h3 id="ecmascript-执行流"><a href="#ecmascript-执行流" class="header-anchor">#</a> ECMAScript 执行流：</h3> <p>执行流进入一个函数 =》该函数执行环境推入环境栈中 =》执行完后 =》栈将其环境弹出 =》控制权返还给之前的执行环境。</p> <h3 id="某个执行环境"><a href="#某个执行环境" class="header-anchor">#</a> 某个执行环境：</h3> <p>当代码在一个执行环境中时，会创建变量对象的一个作用域链。
作用域链：保证对执行环境有权限访问的所有变量和函数有序访问。</p> <h3 id="链的前端-作用域链-由一个个变量对象连接-链的后端-最终是-window"><a href="#链的前端-作用域链-由一个个变量对象连接-链的后端-最终是-window" class="header-anchor">#</a> 链的前端============作用域链（由一个个变量对象连接）=========链的后端（最终是 window）</h3> <p>前端 1：当前执行代码所在环境的变量对象（环境中定义的所有变量和函数都定义在这个对象中）。
前端 2：如果这个环境是函数，则其活动对象（arguments 对象）就是变量对象。
内部环境可以通过作用域链访问所有外部环境，但外部环境不能访问内部环境的任何变量和函数。
环境之间的联系是线性的有序的，每个环境都可以向上搜索作用域链以查询变量和函数。</p> <h3 id="延长作用域链"><a href="#延长作用域链" class="header-anchor">#</a> 延长作用域链</h3> <p>执行环境类型：全局（window）、局部（函数）
延长原理：在作用域链前端临时加一个变量对象，在代码执行完后移除。
try-catch 延长：创建一个新的变量对象，其中包含被抛出的错误对象的声明
with 延长：将指定对象加到作用域链中</p> <h3 id="垃圾回收"><a href="#垃圾回收" class="header-anchor">#</a> 垃圾回收</h3> <p>自动垃圾回收机制：执行环境负责管理代码执行过程中使用的内存。
标记清除：执行流，进入执行环境标记为‘进入环境’，离开环境后，标记为‘离开环境’。然后最终，去除环境中的变量和被环境中变量引用的变量，此后标记的就是需要清除的。
引用计数：引用计的数为 0 是清除。（循环引用有问题）</p> <h3 id="管理内存"><a href="#管理内存" class="header-anchor">#</a> 管理内存</h3> <p>解除引用：设置为 null（解除引用的真正作用是让值脱离执行环境，以便下次垃圾回收器运行是将其回收）</p> <h2 id="引用类型"><a href="#引用类型" class="header-anchor">#</a> 引用类型</h2> <h3 id="各种类型-原型链-闭包-面向对象-函数"><a href="#各种类型-原型链-闭包-面向对象-函数" class="header-anchor">#</a> 各种类型，原型链，闭包，面向对象，函数</h3> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <h3 id="基本类型值在内存中占据固定大小的空间-因此被保存在栈内存中。"><a href="#基本类型值在内存中占据固定大小的空间-因此被保存在栈内存中。" class="header-anchor">#</a> 基本类型值在内存中占据固定大小的空间，因此被保存在栈内存中。</h3> <h3 id="从一个变量向另一个变量复制基本类型的值-会创建这个值的一个副本。"><a href="#从一个变量向另一个变量复制基本类型的值-会创建这个值的一个副本。" class="header-anchor">#</a> 从一个变量向另一个变量复制基本类型的值，会创建这个值的一个副本。</h3> <h3 id="引用类型的值是对象-保存在堆内存中。"><a href="#引用类型的值是对象-保存在堆内存中。" class="header-anchor">#</a> 引用类型的值是对象，保存在堆内存中。</h3> <h3 id="包含引用类型值的变量实际上包含的并不是对象本身-而是一个指向该对象的指针。"><a href="#包含引用类型值的变量实际上包含的并不是对象本身-而是一个指向该对象的指针。" class="header-anchor">#</a> 包含引用类型值的变量实际上包含的并不是对象本身，而是一个指向该对象的指针。</h3> <h3 id="从一个变量向另一个变量复制引用类型的值-复制的其实是指针-因此两个变量最终都指向同一个数据。"><a href="#从一个变量向另一个变量复制引用类型的值-复制的其实是指针-因此两个变量最终都指向同一个数据。" class="header-anchor">#</a> 从一个变量向另一个变量复制引用类型的值，复制的其实是指针，因此两个变量最终都指向同一个数据。</h3> <h3 id="instanceof-操作符。"><a href="#instanceof-操作符。" class="header-anchor">#</a> instanceof 操作符。</h3> <div class="language- extra-class"><pre><code>所有变量（包括基本类型和引用类型）都存在于一个执行环境（也称为作用域）当中，这个执
行环境决定了变量的生命周期，以及哪一部分代码可以访问其中的变量。以下是关于执行环境的几
点总结：
 执行环境有全局执行环境（也称为全局环境）和函数执行环境之分；
 每次进入一个新执行环境，都会创建一个用于搜索变量和函数的作用域链；
 函数的局部环境不仅有权访问函数作用域中的变量，而且有权访问其包含（父）环境，乃至全
局环境；
 全局环境只能访问在全局环境中定义的变量和函数，而不能直接访问局部环境中的任何数据；
 变量的执行环境有助于确定应该何时释放内存。
JavaScript 是一门具有自动垃圾收集机制的编程语言，开发人员不必关心内存分配和回收问题。可
以对 JavaScript 的垃圾收集例程作如下总结。
 离开作用域的值将被自动标记为可以回收，因此将在垃圾收集期间被删除。
 “标记清除”是目前主流的垃圾收集算法，这种算法的思想是给当前不使用的值加上标记，然
后再回收其内存。
 另一种垃圾收集算法是“引用计数”，这种算法的思想是跟踪记录所有值被引用的次数。JavaScript
引擎目前都不再使用这种算法；但在 IE 中访问非原生 JavaScript 对象（如 DOM 元素）时，这种
算法仍然可能会导致问题。
 当代码中存在循环引用现象时，“引用计数”算法就会导致问题。
 解除变量的引用不仅有助于消除循环引用现象，而且对垃圾收集也有好处。为了确保有效地回
收内存，应该及时解除不再使用的全局对象、全局对象属性以及循环引用变量的引用。
</code></pre></div><h2 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h2> <h3 id="事件流"><a href="#事件流" class="header-anchor">#</a> 事件流</h3> <p>IE「微软」：事件冒泡流：由最具体的元素（文档中嵌套层次最深的那个节点）接收，然后逐级向上传播到较为不具体的节点（文档）。
Netscape「网景」：事件捕获流：不太具体的节点应该更早接收到事件，而最具体的节点应该最后接收到事件
事件捕获=》目标阶段=》事件冒泡</p> <h3 id="dom0-级事件处理程序"><a href="#dom0-级事件处理程序" class="header-anchor">#</a> DOM0 级事件处理程序</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 给DOM赋值事件：</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myBtn'</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Clicked'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 移除直接：btn.onclick = null; //删除事件处理程序</span>
</code></pre></div><h3 id="dom2-级事件"><a href="#dom2-级事件" class="header-anchor">#</a> “DOM2 级事件</h3> <p>「3 个参数：要处理的事件名、作为事件处理程序的函数和一个布尔值。（最后这个布尔值参数如果是 true，表示在捕获
阶段调用事件处理程序；如果是 false，表示在冒泡阶段调用事件处理程序。）」</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// addEventListener()添加</span>
<span class="token comment">// removeEventListener()移除</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myBtn'</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span>
</code></pre></div><p>通过 addEventListener()添加的事件处理程序只能使用 removeEventListener()来移除，移除时传入的参数与添加处理程序时使用的参数相同。所以：通过 addEventListener()添加的匿名函数将无法移除</p> <h3 id="ie-事件处理程序【ie8-及更早版本只支持事件冒泡-所以通过-attachevent-添加的事件处理程序都会被添加到冒泡阶段。所以就两个参数】"><a href="#ie-事件处理程序【ie8-及更早版本只支持事件冒泡-所以通过-attachevent-添加的事件处理程序都会被添加到冒泡阶段。所以就两个参数】" class="header-anchor">#</a> IE 事件处理程序【IE8 及更早版本只支持事件冒泡，所以通过 attachEvent()添加的事件处理程序都会被添加到冒泡阶段。所以就两个参数】</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myBtn'</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Clicked'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="事件对象-event"><a href="#事件对象-event" class="header-anchor">#</a> 事件对象 event</h3> <p>在触发 DOM 上的某个事件时，会产生一个事件对象 event，这个对象中包含着所有与事件有关的
信息。包括导致事件的元素、事件的类型以及其他与特定事件相关的信息。例如，鼠标操作导致的事件
对象中，会包含鼠标位置的信息，而键盘操作导致的事件对象中，会包含与按下的键有关的信息。所有
浏览器都支持 event 对象，但支持方式不同。</p> <h3 id="事件类型"><a href="#事件类型" class="header-anchor">#</a> 事件类型</h3> <p> UI（User Interface，用户界面）事件，当用户与页面上的元素交互时触发；
 焦点事件，当元素获得或失去焦点时触发；
 鼠标事件，当用户通过鼠标在页面上执行操作时触发；
 滚轮事件，当使用鼠标滚轮（或类似设备）时触发；
 文本事件，当在文档中输入文本时触发；
 键盘事件，当用户通过键盘在页面上执行操作时触发；
 合成事件，当为 IME（Input Method Editor，输入法编辑器）输入字符时触发；
 变动（mutation）事件，当底层 DOM 结构发生变化时触发。</p> <h3 id="ui-事件"><a href="#ui-事件" class="header-anchor">#</a> UI 事件</h3> <p>load 事件：当页面完全加载后（包括所有图像、JavaScript 文件、CSS 文件等外部资源），就会触发 window 上面的 load 事件。图像上面也可以触发 load 事件。动态创建的 img，要在指定 src 属性之前先指定 onload 事件。
unload 事件：切换页面触发
resize 事件：当浏览器窗口被调整到一个新的高度或宽度时，就会触发 resize 事件。浏览器窗口最小化或最大化时也会触发。
scroll 事件：</p> <h3 id="焦点事件"><a href="#焦点事件" class="header-anchor">#</a> 焦点事件</h3> <p>焦点事件会在页面元素获得或失去焦点时触发。利用这些事件并与 document.hasFocus()方法及 document.activeElement 属性配合，可以知晓用户在页面上的行踪。</p> <h3 id="鼠标与滚轮事件"><a href="#鼠标与滚轮事件" class="header-anchor">#</a> 鼠标与滚轮事件</h3> <p>click、dblclick、mousedown、mouseenter、mouseleave、mousemove、mouseout、mouseover、mouseup
a. 客户区坐标位置 clientX 和 clientY：鼠标事件都是在浏览器视口中的特定位置上发生的。这个位置信息保存在事件对象的 clientX 和 clientY 属性中。所有浏览器都支持这两个属性，它们的值表示事件发生时鼠标指针在视口中的水平和垂直坐标。【不包括页面滚动的距离】
b. 页面坐标位置 pageX 和 pageY：这两个属性表示鼠标光标在页面中的位置【坐标是从页面本身而非视口的左边和顶边计算的】
c. 电脑屏幕坐标位置：鼠标事件发生时，不仅会有相对于浏览器窗口的位置，还有一个相对于整个电脑屏幕的位置。而通过 screenX 和 screenY 属性就可以确定鼠标事件发生时鼠标指针相对于整个屏幕的坐标信息。
d. 修改键：按下鼠标时键盘上的某些键的状态也可以影响到所要采取的操作。
这些修改键就是 Shift、Ctrl、Alt 和 Meta（在 Windows 键盘中是 Windows 键，在苹果机中是 Cmd 键）
DOM 为此规定了 4 个属性，表示这些修改键的状态：shiftKey、ctrlKey、altKey 和 metaKey。这些属性中包含的都是布尔值，如果相应的键被按下了，则值为 true，否则值为 false。当某个鼠标事件发生时，通过检测这几个属性就可以确定用户是否同时按下了其中的键。</p> <h3 id="更多的事件信息"><a href="#更多的事件信息" class="header-anchor">#</a> 更多的事件信息</h3> <p>event 对象中还提供了 detail 属性，对于鼠标事件来说，detail 中包含了一个数值，表示在给定位置上发生了多少次单击。在同一个元素上相继地发生一次 mousedown 和一次 mouseup 事件算作一次单击。detail 属性从 1 开始计数，每次单击发生后都会递增。如果鼠标在 mousedown 和 mouseup 之间移动了位置，则 detail 会被重置为 0。</p> <h3 id="键盘"><a href="#键盘" class="header-anchor">#</a> 键盘</h3> <p> keydown：当用户按下键盘上的任意键时触发，而且如果按住不放的话，会重复触发此事件。
 keypress：当用户按下键盘上的字符键时触发，而且如果按住不放的话，会重复触发此事件。
按下 Esc 键也会触发这个事件。Safari 3.1 之前的版本也会在用户按下非字符键时触发 keypress
事件。
 keyup：当用户释放键盘上的键时触发。
在发生 keydown 和 keyup 事件时，event 对象的 keyCode 属性中会包含一个代码，与键盘上一个特定的键对应。对数字字母字符键，keyCode 属性的值与 ASCII 码中对应小写字母或数字的编码相同。</p> <h3 id="contextmenu-事件右键菜单"><a href="#contextmenu-事件右键菜单" class="header-anchor">#</a> contextmenu 事件右键菜单</h3> <h3 id="beforeunload-事件"><a href="#beforeunload-事件" class="header-anchor">#</a> beforeunload 事件</h3> <p>这个事件会在浏览器卸载页面之前触发，可以通过它来取消卸载并继续使用原有页面。</p> <div class="language-js extra-class"><pre class="language-js"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'beforeunload'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
  <span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;I'm really going to miss you if you go.&quot;</span>
  event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> message
  <span class="token keyword">return</span> message
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="domcontentloaded-事件"><a href="#domcontentloaded-事件" class="header-anchor">#</a> DOMContentLoaded 事件</h3> <p>形成完整的 DOM 树之后就会触发，
不理会图像、JavaScript 文件、CSS 文件或其他资源是否已经下载完毕。与 load 事件不同，
DOMContentLoaded 支持在页面下载的早期添加事件处理程序，这也就意味着用户能够尽早地与页面
进行交互。</p> <h3 id="hashchange-事件"><a href="#hashchange-事件" class="header-anchor">#</a> hashchange 事件</h3> <p>HTML5 新增了 hashchange 事件，以便在 URL 的参数列表（及 URL 中“#”号后面的所有字符串）
发生变化时通知开发人员。
必须要把 hashchange 事件处理程序添加给 window 对象，然后 URL 参数列表只要变化就会调用
它。此时的 event 对象应该额外包含两个属性：oldURL 和 newURL。这两个属性分别保存着参数列表
变化前后的完整 URL。</p> <div class="language-js extra-class"><pre class="language-js"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'hashchange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Old URL: '</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>oldURL <span class="token operator">+</span> <span class="token string">'\nNew URL: '</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>newURL<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="设备事件"><a href="#设备事件" class="header-anchor">#</a> 设备事件</h3> <p>orientationchange 苹果的横屏竖屏
MozOrientation 火狐的包括 xyz 竖直左倾右倾，只有带加速计的设备才支持 MozOrientation 事件。设备如何移动
deviceorientation 设备在空间中朝向哪儿 xyz
devicemotion 告诉开发人员设备什么时候移动，而不仅仅是设备方向如何改变。例如，通过 devicemotion 能够检测到设备是不是正在往下掉，或者是不是被走着的人拿在手里。</p> <h3 id="触摸与手势事件"><a href="#触摸与手势事件" class="header-anchor">#</a> 触摸与手势事件</h3> <p> touchstart：当手指触摸屏幕时触发；即使已经有一个手指放在了屏幕上也会触发。
 touchmove：当手指在屏幕上滑动时连续地触发。在这个事件发生期间，调用 preventDefault()
可以阻止滚动。
 touchend：当手指从屏幕上移开时触发。
 touchcancel：当系统停止跟踪触摸时触发。
除了常见的 DOM 属性外，触摸事件还包含下列三个用于跟踪触摸的属性。
 touches：表示当前跟踪的触摸操作的 Touch 对象的数组。
 targetTouchs：特定于事件目标的 Touch 对象的数组。
 changeTouches：表示自上次触摸以来发生了什么改变的 Touch 对象的数组。
每个 Touch 对象包含下列属性：
 clientX：触摸目标在视口中的 x 坐标。
 clientY：触摸目标在视口中的 y 坐标。
 identifier：标识触摸的唯一 ID。
 pageX：触摸目标在页面中的 x 坐标。
 pageY：触摸目标在页面中的 y 坐标。
 screenX：触摸目标在屏幕中的 x 坐标。
 screenY：触摸目标在屏幕中的 y 坐标。
 target：触摸的 DOM 节点目标。
手势事件：
iOS 2.0 中的 Safari 还引入了一组手势事件。当两个手指触摸屏幕时就会产生手势，手势通常会改变
显示项的大小，或者旋转显示项。有三个手势事件，分别介绍如下。
 gesturestart：当一个手指已经按在屏幕上而另一个手指又触摸屏幕时触发。
 gesturechange：当触摸屏幕的任何一个手指的位置发生变化时触发。
 gestureend：当任何一个手指从屏幕上面移开时触发。</p> <h3 id="对-事件处理程序过多-问题的解决方案就是事件委托。事件委托利用了事件冒泡"><a href="#对-事件处理程序过多-问题的解决方案就是事件委托。事件委托利用了事件冒泡" class="header-anchor">#</a> 对“事件处理程序过多”问题的解决方案就是事件委托。事件委托利用了事件冒泡，</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 复杂：</span>
<span class="token keyword">var</span> item1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'goSomewhere'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> item2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'doSomething'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> item3 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'sayHi'</span><span class="token punctuation">)</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>item1<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'http://www.wrox.com'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>item2<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&quot;I changed the document's title&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>item3<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 简单：</span>
<span class="token keyword">var</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myLinks'</span><span class="token punctuation">)</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'doSomething'</span><span class="token operator">:</span>
      document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&quot;I changed the document's title&quot;</span>
      <span class="token keyword">break</span>
    <span class="token keyword">case</span> <span class="token string">'goSomewhere'</span><span class="token operator">:</span>
      location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'http://www.wrox.com'</span>
      <span class="token keyword">break</span>
    <span class="token keyword">case</span> <span class="token string">'sayHi'</span><span class="token operator">:</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span>
      <span class="token keyword">break</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>与前面未使用事件委托的代码比一比，会发现这段代码的事前消耗更低，因为只取得了一个 DOM 元素，只添加了一个事件处理程序。虽然对用户来说最终的结果相同，但这种技术需要占用的内存更少。所有用到按钮的事件（多数鼠标事件和键盘事件）都适合采用事件委托技术。</p> <h3 id="模拟事件-模拟点击等"><a href="#模拟事件-模拟点击等" class="header-anchor">#</a> 模拟事件，模拟点击等</h3> <h2 id="表单"><a href="#表单" class="header-anchor">#</a> 表单</h2> <h3 id="基础"><a href="#基础" class="header-anchor">#</a> 基础</h3> <p>通过 document.forms 可以取得页面中所有的表单。在这个集合中，可以通过数值索引或 name 值来取得特定的表单。
使用 type 特性值为&quot;reset&quot;的 input 或 button 都可以创建重置按钮</p> <h3 id="共有的表单字段属性"><a href="#共有的表单字段属性" class="header-anchor">#</a> 共有的表单字段属性</h3> <p> disabled：布尔值，表示当前字段是否被禁用。
 form：指向当前字段所属表单的指针；只读。
 name：当前字段的名称。
 readOnly：布尔值，表示当前字段是否只读。
 tabIndex：表示当前字段的切换（tab）序号。
 type：当前字段的类型，如&quot;checkbox&quot;、&quot;radio&quot;，等等。
 value：当前字段将被提交给服务器的值。对文件字段来说，这个属性是只读的，包含着文件
在计算机中的路径。
HTML5 为表单字段新增了一个 autofocus 属性</p> <h3 id="共有的表单字段事件"><a href="#共有的表单字段事件" class="header-anchor">#</a> 共有的表单字段事件</h3> <p> blur：当前字段失去焦点时触发。
 change：对于和
元素，在它们失去焦点且 value 值改变时触发；对于
<code>&lt;select&gt;</code>元素，在其选项改变时触发。
 focus：当前字段获得焦点时触发。</p> <div class="language-js extra-class"><pre class="language-js"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>textbox<span class="token punctuation">,</span> <span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\d]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="select"><a href="#select" class="header-anchor">#</a> select()</h3> <p>select()方法：选择所有文本，
select()事件：可以知道用户什么时候选择了文本，但仍然不知道用户选择了什么文本
返回选择了什么文本
function getSelectedText(textbox){
return textbox.value.substring(textbox.selectionStart, textbox.selectionEnd);
}</p> <h3 id="选择部分文本"><a href="#选择部分文本" class="header-anchor">#</a> 选择部分文本</h3> <p>setSelectionRange()方法。这个方法接收两个参数：要选择的第一个字符的索引和要选择的最后一个字符之后的字符的索引</p> <h3 id="剪切板事件"><a href="#剪切板事件" class="header-anchor">#</a> 剪切板事件</h3> <p> beforecopy：在发生复制操作前触发。
 copy：在发生复制操作时触发。
 beforecut：在发生剪切操作前触发。
 cut：在发生剪切操作时触发。
 beforepaste：在发生粘贴操作前触发。
 paste：在发生粘贴操作时触发。
要访问剪贴板中的数据，可以使用 clipboardData 对象。【三个方法：getData()、setData()和 clearData()】
IE 中，这个对象是 window 对象的属性；
在 Firefox 4+、Safari 和 Chrome 中，这个对象是相应 event 对象的属性。
但是，在 Firefox、Safari 和 Chorme 中，只有在处理剪贴板事件期间 clipboardData 对象才有效，这是为了防止对剪贴板
的未授权访问；
在 IE 中，则可以随时访问 clipboardData 对象。</p> <h3 id="html5-约束验证-api"><a href="#html5-约束验证-api" class="header-anchor">#</a> HTML5 约束验证 API</h3> <p>required、input 的 type 为&quot;email&quot;和&quot;url&quot;、【&quot;number&quot;、&quot;range&quot;、&quot;datetime&quot;、&quot;datetime-local&quot;、&quot;date&quot;、&quot;month&quot;、&quot;week&quot;，
还有&quot;time&quot;】、min 属性（最小的可能值）、max 属性（最大的可能值）和 step 属性（从 min 到 max 的两个刻度间的差值）。</p> <h3 id="输入模式"><a href="#输入模式" class="header-anchor">#</a> 输入模式</h3> <p>HTML5 为文本字段新增了 pattern 属性。这个属性的值是一个正则表达式，用于匹配文本框中的值。
只想允许在文本字段中输入数值：pattern=&quot;\d+&quot;</p> <h3 id="检测表单有效性"><a href="#检测表单有效性" class="header-anchor">#</a> 检测表单有效性</h3> <p>checkValidity()方法可以检测表单中的某个字段是否有效。所有表单字段都有个方法，有效 true，否则返回 false。
值是否有效的判断依据：a。必填字段中如果没有值就是无效的。b。字段中的值与 pattern 属性不匹配也是无效的。
【要检测整个表单是否有效，可以在表单自身调用 checkValidity()方法。如果所有表单字段都有效，这个方法返回 true；即使有一个字段无效，这个方法也会返回 false。】</p> <h3 id="validity-属性则会告诉你为什么字段有效或无效。"><a href="#validity-属性则会告诉你为什么字段有效或无效。" class="header-anchor">#</a> validity 属性则会告诉你为什么字段有效或无效。</h3> <p>customError ：如果设置了 setCustomValidity()，则为 true，否则返回 false。
 patternMismatch：如果值与指定的 pattern 属性不匹配，返回 true。
 rangeOverflow：如果值比 max 值大，返回 true。
 rangeUnderflow：如果值比 min 值小，返回 true。
 stepMisMatch：如果 min 和 max 之间的步长值不合理，返回 true。
 tooLong：如果值的长度超过了 maxlength 属性指定的长度，返回 true。有的浏览器（如 Firefox 4）
会自动约束字符数量，因此这个值可能永远都返回 false。
 typeMismatch：如果值不是&quot;mail&quot;或&quot;url&quot;要求的格式，返回 true。
 valid：如果这里的其他属性都是 false，返回 true。checkValidity()也要求相同的值。
 valueMissing：如果标注为 required 的字段中没有值，返回 true。
如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span>validity <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>input<span class="token punctuation">.</span>validity<span class="token punctuation">.</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span>validity<span class="token punctuation">.</span>valueMissing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Please specify a value.'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span>validity<span class="token punctuation">.</span>typeMismatch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Please enter an email address.'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Value is invalid.'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="通过对-form-设置-novalidate-属性-可以告诉表单不进行验证。"><a href="#通过对-form-设置-novalidate-属性-可以告诉表单不进行验证。" class="header-anchor">#</a> 通过对 form 设置 novalidate 属性，可以告诉表单不进行验证。</h3> <h3 id="如果为-appendchild-方法传入一个文档中已有的元素-那么就会先从该元素的父节点中移除它-再把它添加到指定的位置。【将一个选择框中的选项移动到另一个选择框中】"><a href="#如果为-appendchild-方法传入一个文档中已有的元素-那么就会先从该元素的父节点中移除它-再把它添加到指定的位置。【将一个选择框中的选项移动到另一个选择框中】" class="header-anchor">#</a> 如果为 appendChild()方法传入一个文档中已有的元素，那么就会先从该元素的父节点中移除它，再把它添加到指定的位置。【将一个选择框中的选项移动到另一个选择框中】</h3> <h3 id="富文本编辑【两种实现】"><a href="#富文本编辑【两种实现】" class="header-anchor">#</a> 富文本编辑【两种实现】</h3> <p>frames 与 designMode【富文本编辑功能是通过一个包含空 HTML 文档的 iframe 元素来实现】
contenteditable</p> <h3 id="操作富文本【使用-document-execcommand-】"><a href="#操作富文本【使用-document-execcommand-】" class="header-anchor">#</a> 操作富文本【使用 document.execCommand()】</h3> <p>execCommand 命令修改富文本
【3 个参数：要执行的命令名称、false，执行命令必须的一个值（如果不需要值，则传递 null）】：如</p> <p>document.execCommand(&quot;bold&quot;, false, null);
document.execCommand(&quot;fontsize&quot;, false, 6);
命令相关的方法：
第一个方法： queryCommandEnabled()检测是否可以针对当前选择的文本，或者当前插入字符所在位置执行某个命令。【参数命令名称，返回 bool 值】【也可用于确定是否已将指定命令应用到了选择的文本】
第二个方法： queryCommandValue()用于取得执行命令时传入的值（即前面例子中传给 document.execCommand()的第三个参数）</p> <h2 id="canvas2d"><a href="#canvas2d" class="header-anchor">#</a> canvas2D</h2> <h3 id="要使用-canvas-元素-必须先设置其-width-和-height-属性"><a href="#要使用-canvas-元素-必须先设置其-width-和-height-属性" class="header-anchor">#</a> 要使用 canvas 元素，必须先设置其 width 和 height 属性</h3> <h3 id="要在这块画布-canvas-上绘图-需要取得绘图上下文"><a href="#要在这块画布-canvas-上绘图-需要取得绘图上下文" class="header-anchor">#</a> 要在这块画布（canvas）上绘图，需要取得绘图上下文</h3> <h3 id="要取得绘图上下文对象的引用-需要调用-getcontext-方法并传入上下文的名字。传入-2d-就可以取得-2d-上下文对象。"><a href="#要取得绘图上下文对象的引用-需要调用-getcontext-方法并传入上下文的名字。传入-2d-就可以取得-2d-上下文对象。" class="header-anchor">#</a> 要取得绘图上下文对象的引用，需要调用 getContext()方法并传入上下文的名字。传入&quot;2d&quot;，就可以取得 2D 上下文对象。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> context <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token comment">//【图片url、x、y、图片宽高】</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token comment">//【要绘制的图像、源图像的 x 坐标、源图像的 y 坐标、源图像的宽度、源图像的高度、目标图像的 x 坐标、目标图像的 y 坐标、目标图像的宽度、目标图像的高度】</span>
</code></pre></div><p>给 drawImage()方法传入 HTML 元素外，还可以传入另一个 canvas 元素作为其第一个参数。这样，就可以把另一个画布内容绘制到当前画布上。</p> <h3 id="todataurl-方法-可以导出在元素上绘制的图像【跨域限制】"><a href="#todataurl-方法-可以导出在元素上绘制的图像【跨域限制】" class="header-anchor">#</a> toDataURL()方法，可以导出在元素上绘制的图像【跨域限制】</h3> <h3 id="基本功能-填充和描边、绘制矩形、绘制路径、绘制文本、变换、绘制图像、阴影、渐变"><a href="#基本功能-填充和描边、绘制矩形、绘制路径、绘制文本、变换、绘制图像、阴影、渐变" class="header-anchor">#</a> 基本功能：填充和描边、绘制矩形、绘制路径、绘制文本、变换、绘制图像、阴影、渐变</h3> <h3 id="使用图像数据"><a href="#使用图像数据" class="header-anchor">#</a> 使用图像数据</h3> <p>getImageData()取得原始图像数据【4 个参数：要取得其数据的画面区域的 x 和 y 坐标以及该区域的像素宽度和高度】
返回值三个属性：width、height 和 data
data 属性是一个数组，保存着图像中每一个像素的数据。
data 数组中，每一个像素用 4 个元素来保存，分别表示红、绿、蓝和透明度值。如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> imageData<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
  red <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  green <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  blue <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  alpha <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
</code></pre></div><p>数组中每个元素的值都介于 0 到 255 之间（包括 0 和 255）。
能够直接访问到原始图像数据，就能够以各种方式来操作这些数据。【创建一个简单的灰阶过滤器】</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span>
<span class="token comment">//确定浏览器支持</span>
元素
<span class="token keyword">if</span> <span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> context <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    image <span class="token operator">=</span> document<span class="token punctuation">.</span>images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    imageData<span class="token punctuation">,</span>
    data<span class="token punctuation">,</span>
    i<span class="token punctuation">,</span>
    len<span class="token punctuation">,</span>
    average<span class="token punctuation">,</span>
    red<span class="token punctuation">,</span>
    green<span class="token punctuation">,</span>
    blue<span class="token punctuation">,</span>
    alpha
  <span class="token comment">//绘制原始图像</span>
  context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token comment">//取得图像数据</span>
  imageData <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>width<span class="token punctuation">,</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
  data <span class="token operator">=</span> imageData<span class="token punctuation">.</span>data
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    red <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    green <span class="token operator">=</span> data<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
    blue <span class="token operator">=</span> data<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span>
    alpha <span class="token operator">=</span> data<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span>
    <span class="token comment">//求得 rgb 平均值</span>
    average <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>red <span class="token operator">+</span> green <span class="token operator">+</span> blue<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token comment">//设置颜色值，透明度不变</span>
    data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> average
    data<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> average
    data<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> average
  <span class="token punctuation">}</span>

  <span class="token comment">//回写图像数据并显示结果</span>
  imageData<span class="token punctuation">.</span>data <span class="token operator">=</span> data
  context<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>imageData<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>*绘制一幅图像
*取得原始图像数据
*for 循环遍历图像数据中的每一个像素「循环控制变量 i 都递增 4」
*在取得每个像素的红、绿、蓝颜色值后，计算出它们的平均值。再把这个平均值设置为每个颜色的值，结果就是去掉了每个像素的颜色，只保留了亮度接近的灰度值（即彩色变黑白）。 *把 data 数组回写到 imageData 对象后，调用 putImageData()方法把图像数据绘制到画布上</p> <h3 id="合成"><a href="#合成" class="header-anchor">#</a> 合成</h3> <p>globalAlpha 是一个介于 0 和 1 之间的值（包括 0 和 1），用于指定所有绘制的透明度。默认值为 0。
//修改全局透明度
context.globalAlpha = 0.5;</p> <p>globalCompositionOperation 表示后绘制的图形怎样与先绘制的图形结合。这个属性的值是字符串如下：</p> <p>//设置合成操作
context.globalCompositeOperation = &quot;destination-over&quot;;</p> <h3 id="webgl-是针对-canvas-的-3d-上下文。"><a href="#webgl-是针对-canvas-的-3d-上下文。" class="header-anchor">#</a> WebGL 是针对 Canvas 的 3D 上下文。</h3> <h2 id="跨文档消息传递"><a href="#跨文档消息传递" class="header-anchor">#</a> 跨文档消息传递</h2> <h3 id="postmessage-方法-目的-向另一个地方传递数据。【-另一个地方-指的是包含在当前页面中的元素-或者由当前页面弹出的窗口。】"><a href="#postmessage-方法-目的-向另一个地方传递数据。【-另一个地方-指的是包含在当前页面中的元素-或者由当前页面弹出的窗口。】" class="header-anchor">#</a> postMessage()方法：目的：向另一个地方传递数据。【“另一个地方”指的是包含在当前页面中的元素，或者由当前页面弹出的窗口。】</h3> <p>两个参数：一条消息【最好 JSON.stringify()转一下】和一个表示消息接收方来自哪个域的字符串。
//注意：所有支持 XDM 的浏览器也支持 iframe 的 contentWindow 属性
var iframeWindow = document.getElementById(&quot;myframe&quot;).contentWindow;
iframeWindow.postMessage(&quot;A secret&quot;, &quot;http://www.wrox.com&quot;);</p> <h3 id="接收到-xdm-消息时-会触发-window-对象的-message-事件。"><a href="#接收到-xdm-消息时-会触发-window-对象的-message-事件。" class="header-anchor">#</a> 接收到 XDM 消息时，会触发 window 对象的 message 事件。</h3> <p>onmessage 处理程序的事件对象：
 data：作为 postMessage()第一个参数传入的字符串数据。
 origin：发送消息的文档所在的域，例如&quot;http://www.wrox.com&quot;。
 source：发送消息的文档的 window 对象的代理。这个代理对象主要用于在发送上一条消息的窗口中调用 postMessage()方法。如果发送消息的窗口来自同一个域，那这个对象就是 window。</p> <div class="language-js extra-class"><pre class="language-js"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//确保发送消息的域是已知的域</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>origin <span class="token operator">==</span> <span class="token string">'http://www.wrox.com'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//处理接收到的数据</span>
    <span class="token function">processMessage</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token comment">//可选：向来源窗口发送回执</span>
    event<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Received!'</span><span class="token punctuation">,</span> <span class="token string">'http://p2p.wrox.com'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="拖放"><a href="#拖放" class="header-anchor">#</a> 拖放</h2> <h3 id="默认情况下-图像、链接和文本是可以拖动的"><a href="#默认情况下-图像、链接和文本是可以拖动的" class="header-anchor">#</a> 默认情况下，图像、链接和文本是可以拖动的</h3> <h3 id="拖放事件"><a href="#拖放事件" class="header-anchor">#</a> 拖放事件</h3> <p>(1) dragstart
(2) drag
(3) dragend
(1) dragenter
(2) dragover
(3) dragleave 或 drop</p> <h3 id="自定义放置目标"><a href="#自定义放置目标" class="header-anchor">#</a> 自定义放置目标</h3> <p>可以把任何元素变成有效的放置目标，方法是重写 dragenter 和 dragover 事件的默认行为</p> <h3 id="datatransfer-对象【在拖放事件的事件处理程序中访问-datatransfer-对象。】"><a href="#datatransfer-对象【在拖放事件的事件处理程序中访问-datatransfer-对象。】" class="header-anchor">#</a> dataTransfer 对象【在拖放事件的事件处理程序中访问 dataTransfer 对象。】</h3> <p>有两个主要方法：getData()和 setData()。
getData()可以取得由 setData()保存的值。
setData()方法的第一个参数，也是 getData()方法唯一的一个参数，是一个字符串，表示保存的数据类型，取为&quot;text&quot;或&quot;URL&quot;【HTML5 则对此加以扩展，允许指定各种 MIME 类型】
//设置和接收文本数据
event.dataTransfer.setData(&quot;text&quot;, &quot;some text&quot;);
var text = event.dataTransfer.getData(&quot;text&quot;);
//设置和接收 URL
event.dataTransfer.setData(&quot;URL&quot;, &quot;http://www.wrox.com/&quot;);
var url = event.dataTransfer.getData(&quot;URL&quot;);</p> <h3 id="datatransfer-对象的两个属性-dropeffect-和-effectallowed"><a href="#datatransfer-对象的两个属性-dropeffect-和-effectallowed" class="header-anchor">#</a> dataTransfer 对象的两个属性：dropEffect 和 effectAllowed</h3> <p>dropEffect：被拖动的元素能够执行哪种放置行为【在 ondragenter 事件处理程序中针对放置目标来设置它】
 &quot;none&quot;：不能把拖动的元素放在这里。这是除文本框之外所有元素的默认值。
 &quot;move&quot;：应该把拖动的元素移动到放置目标。
 &quot;copy&quot;：应该把拖动的元素复制到放置目标。
 &quot;link&quot;：表示放置目标会打开拖动的元素（但拖动的元素必须是一个链接，有 URL）。
effectAllowed：允许拖动元素的哪种 dropEffect【在 ondragstart 事件处理程序中设置 effectAllowed 属性】
 &quot;uninitialized&quot;：没有给被拖动的元素设置任何放置行为。
 &quot;none&quot;：被拖动的元素不能有任何行为。
 &quot;copy&quot;：只允许值为&quot;copy&quot;的 dropEffect。
 &quot;link&quot;：只允许值为&quot;link&quot;的 dropEffect。
 &quot;move&quot;：只允许值为&quot;move&quot;的 dropEffect。
 &quot;copyLink&quot;：允许值为&quot;copy&quot;和&quot;link&quot;的 dropEffect。
 &quot;copyMove&quot;：允许值为&quot;copy&quot;和&quot;move&quot;的 dropEffect。
 &quot;linkMove&quot;：允许值为&quot;link&quot;和&quot;move&quot;的 dropEffect。
 &quot;all&quot;：允许任意 dropEffect。</p> <h2 id="媒体元素"><a href="#媒体元素" class="header-anchor">#</a> 媒体元素</h2> <h3 id="开始和结束标签之间的任何内容都将作为后备内容-在浏览器不支持这两个媒体元素的情况下显示。"><a href="#开始和结束标签之间的任何内容都将作为后备内容-在浏览器不支持这两个媒体元素的情况下显示。" class="header-anchor">#</a> 开始和结束标签之间的任何内容都将作为后备内容，在浏览器不支持这两个媒体元素的情况下显示。</h3> <p>width、 height 播放器大小
poster 视频海报封面
controls 显示 UI 控件</p> <h3 id="因为并非所有浏览器都支持所有媒体格式-所以可以指定多个不同的媒体来源。为此-不用在标签中指定-src-属性-而是要像下面这样使用一或多个元素。"><a href="#因为并非所有浏览器都支持所有媒体格式-所以可以指定多个不同的媒体来源。为此-不用在标签中指定-src-属性-而是要像下面这样使用一或多个元素。" class="header-anchor">#</a> 因为并非所有浏览器都支持所有媒体格式，所以可以指定多个不同的媒体来源。为此，不用在标签中指定 src 属性，而是要像下面这样使用一或多个元素。</h3> <h3 id="音视频-audio-video-共有的属性"><a href="#音视频-audio-video-共有的属性" class="header-anchor">#</a> 音视频 audio，video 共有的属性</h3> <h3 id="事件-2"><a href="#事件-2" class="header-anchor">#</a> 事件</h3> <h3 id="事件栗子"><a href="#事件栗子" class="header-anchor">#</a> 事件栗子</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//取得元素的引用</span>
<span class="token keyword">var</span> player <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'player'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'video-btn'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  curtime <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'curtime'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  duration <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'duration'</span><span class="token punctuation">)</span>
<span class="token comment">//更新播放时间</span>
duration<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> player<span class="token punctuation">.</span>duration
<span class="token comment">//为按钮添加事件处理程序</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>btn<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>player<span class="token punctuation">.</span>paused<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    btn<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'Pause'</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    player<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    btn<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'Play'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//定时更新当前时间</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  curtime<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> player<span class="token punctuation">.</span>currentTime
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="audio-元素还有一个原生的-javascript-构造函数-audio-可以在任何时候播放音频-。"><a href="#audio-元素还有一个原生的-javascript-构造函数-audio-可以在任何时候播放音频-。" class="header-anchor">#</a> audio 元素还有一个原生的 JavaScript 构造函数 Audio，可以在任何时候播放音频 。</h3> <p>从同为 DOM 元素的角度看，Audio 与 Image 很相似，但 Audio 不用像 Image 那样必须插入到文档中。
只要创建一个新实例，并传入音频源文件即可。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> audio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Audio</span><span class="token punctuation">(</span><span class="token string">'sound.mp3'</span><span class="token punctuation">)</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>audio<span class="token punctuation">,</span> <span class="token string">'canplaythrough'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="错误"><a href="#错误" class="header-anchor">#</a> 错误</h2> <h3 id="捕获错误"><a href="#捕获错误" class="header-anchor">#</a> 捕获错误</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可能会导致错误的代码</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在错误发生时怎么处理</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="finally【只要代码中包含-finally-子句-则无论-try-或-catch-语句块中包含什么代码-甚至-return-语句-都不会阻止-finally-子句的执行】"><a href="#finally【只要代码中包含-finally-子句-则无论-try-或-catch-语句块中包含什么代码-甚至-return-语句-都不会阻止-finally-子句的执行】" class="header-anchor">#</a> finally【只要代码中包含 finally 子句，则无论 try 或 catch 语句块中包含什么代码——甚至 return 语句，都不会阻止 finally 子句的执行】</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">testFinally</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">2</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3、抛出错误【与 try-catch 语句相配的还有一个 throw 操作符，用于随时抛出自定义错误。】</p> <h2 id="json"><a href="#json" class="header-anchor">#</a> JSON</h2> <h3 id="序列化选项-json-stringify-除了要序列化的-javascript-对象外-还可以接收另外两个参数"><a href="#序列化选项-json-stringify-除了要序列化的-javascript-对象外-还可以接收另外两个参数" class="header-anchor">#</a> 序列化选项 JSON.stringify()：除了要序列化的 JavaScript 对象外，还可以接收另外两个参数</h3> <p>第一个参数是个过滤器，可以是一个数组，也可以是一个函数；</p> <p>第二个参数是一个选项，表示是否在 JSON 字符串中保留缩进</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 如下：</span>
<span class="token keyword">var</span> jsonText <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>book<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'authors'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token string">'year'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token number">5000</span>
    <span class="token keyword">case</span> <span class="token string">'edition'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token keyword">undefined</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="json-parse-方法也可以接收另一个参数-该参数是一个函数-将在每个键值对儿上调用"><a href="#json-parse-方法也可以接收另一个参数-该参数是一个函数-将在每个键值对儿上调用" class="header-anchor">#</a> JSON.parse()方法也可以接收另一个参数，该参数是一个函数，将在每个键值对儿上调用</h3> <p>区别 JSON.stringify()接收的替换（过滤）函数（replacer），这个函数被称为还原函数（reviver），但实际上这两个函数的签名是相同的——它们都接收两个参数，一个键和一个值，而且都需要返回一个值。</p> <h2 id="跨域"><a href="#跨域" class="header-anchor">#</a> 跨域</h2> <h3 id="利用图像-ping-【在线广告跟踪浏览量的主要方式】【动态地创建图像-使用它们的-onload-和-onerror-事件处理程序来确定是否接收到了响应。】"><a href="#利用图像-ping-【在线广告跟踪浏览量的主要方式】【动态地创建图像-使用它们的-onload-和-onerror-事件处理程序来确定是否接收到了响应。】" class="header-anchor">#</a> 利用图像 Ping 【在线广告跟踪浏览量的主要方式】【动态地创建图像，使用它们的 onload 和 onerror 事件处理程序来确定是否接收到了响应。】</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
img<span class="token punctuation">.</span>onload <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Done!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://www.example.com/test?name=Nicholas'</span>
</code></pre></div><p>使用 img 标签，图像 Ping 最常用于跟踪用户点击页面或动态广告曝光次数。
缺点：一、只能发送 GET 请求，二：无法访问服务器的响应文本。
图像 Ping 只能用于浏览器与服务器间的单向通信</p> <h3 id="jsonp"><a href="#jsonp" class="header-anchor">#</a> jsonp</h3> <ul><li>【优点：能够直接访问响应文本，支持在浏览器与服务器之间双向通信】</li> <li>【缺点：JSONP 是从其他域中加载代码执行，其他域不一定安全，且不知道调用是否成功】</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">handleResponse</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>
    <span class="token string">'You’re at IP address '</span> <span class="token operator">+</span>
      response<span class="token punctuation">.</span>ip <span class="token operator">+</span>
      <span class="token string">', which is in '</span> <span class="token operator">+</span>
      response<span class="token punctuation">.</span>city <span class="token operator">+</span>
      <span class="token string">', '</span> <span class="token operator">+</span>
      response<span class="token punctuation">.</span>region_name
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://freegeoip.net/json/?callback=handleResponse'</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>script<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span>
</code></pre></div><p>通过查询地理定位服务来显示你的 IP 地址和位置信息</p> <h3 id="comet-服务器推送"><a href="#comet-服务器推送" class="header-anchor">#</a> Comet 服务器推送</h3> <p>Ajax 是一种从页面向服务器请求数据的技术，而 Comet 则是一种服务器向页面推送数据的技术。Comet 能够让信息近乎实时地被推送到页面上。</p> <ul><li>两种实现 Comet 的方式：
<ul><li>1、长轮询和流【长轮询是传统轮询（也称为短轮询）的一个翻版】。</li> <li>2、HTTP 流。</li></ul></li></ul> <h3 id="web-sockets【可跨域】"><a href="#web-sockets【可跨域】" class="header-anchor">#</a> Web Sockets【可跨域】</h3> <p>要创建 Web Socket，先实例一个 WebSocket 对象并传入要连接的 URL：
var socket = new WebSocket(&quot;ws://www.example.com/server.php&quot;); 【必须给 WebSocket 构造函数传入绝对 URL】
实例化了 WebSocket 对象后，浏览器就会马上尝试创建连接：
 WebSocket.OPENING (0)：正在建立连接。
 WebSocket.OPEN (1)：已经建立连接。
 WebSocket.CLOSING (2)：正在关闭连接。
 WebSocket.CLOSE (3)：已经关闭连接。</p> <ul><li>关闭</li></ul> <p>关闭 Web Socket 连接，可以在任何时候调用 close()方法。socket.close()</p> <ul><li>send【客户端给服务器发消息】</li></ul> <p>Web Sockets 只能通过连接发送纯文本数据，发前 json 转下
socket.send(JSON.stringify(data));</p> <ul><li>message 事件【服务端给客户端发消息】</li></ul> <p>当服务器向客户端发来消息时：监听 message</p> <div class="language-js extra-class"><pre class="language-js"><code>socket<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> event<span class="token punctuation">.</span>data <span class="token comment">// data是字符串要转一下</span>
  <span class="token comment">//处理数据</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>其他事件
 open：在成功建立连接时触发。
 error：在发生错误时触发，连接不能持续。
 close：在连接关闭时触发。【事件对象 event 的属性：wasClean 布尔值是否已经明确地关闭、code 服务器返回的数值状态码、reason 字符串，包含服务器发回的消息】</li> <li></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">'ws://www.example.com/server.php'</span><span class="token punctuation">)</span>
socket<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Connection established.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
socket<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Connection error.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
socket<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Connection closed.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="安全的类型检测"><a href="#安全的类型检测" class="header-anchor">#</a> 安全的类型检测</h2> <h3 id="object-prototype-tostring"><a href="#object-prototype-tostring" class="header-anchor">#</a> Object.prototype.toString</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isArray</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'[object Array]'</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="page-visibility-api"><a href="#page-visibility-api" class="header-anchor">#</a> Page Visibility API</h3> <p>用户是不是正在与页面交互
 document.hidden：表示页面是否隐藏的布尔值。页面隐藏包括页面在后台标签页中或者浏览
器最小化。
 document.visibilityState：表示下列 4 个可能状态的值。
页面在后台标签页中或浏览器最小化。
页面在前台标签页中。
实际的页面已经隐藏，但用户可以看到页面的预览（就像在 Windows 7 中，用户把鼠标移动到
任务栏的图标上，就可以显示浏览器中当前页面的预览）。
页面在屏幕外执行预渲染处理。
 visibilitychange 事件：当文档从可见变为不可见或从不可见变为可见时，触发该事件。</p> <h3 id="geolocation-api"><a href="#geolocation-api" class="header-anchor">#</a> Geolocation API</h3> <p>navigator.geolocation 对象：
第一个方法是 getCurrentPosition()，调用这个方法就会触发请求用户共享地理定位信息的对话框。
方法接收 3 个参数：成功回调函数、可选的失败回调函数、可选的选项对象
成功回调函数：返回 Position 对象参数【对象有两个属性：coords 和 timestamp】
coords 对象中将包含下列与位置相关的信息：
 latitude：以十进制度数表示的纬度。
 longitude：以十进制度数表示的经度。
 accuracy：经、纬度坐标的精度，以米为单位。
有些浏览器还可能会在 coords 对象中提供如下属性。
 altitude：以米为单位的海拔高度，如果没有相关数据则值为 null。
 altitudeAccuracy：海拔高度的精度，以米为单位，数值越大越不精确。
 heading：指南针的方向，0° 表示正北，值为 NaN 表示没有检测到数据。
 speed：速度，即每秒移动多少米，如果没有相关数据则值为 null。
失败回调函数：参数是一个对象，包含两个属性：message 和 code。
【code 属性中保存着一个数值，表示错误的类型：用户拒绝共享（1）、位置无效（2）或者超时（3）】
第二个方法：希望跟踪用户的位置，那么可以使用另一个方法 watchPosition()。watchPosition() 与定时调用 getCurrentPosition()的效果相同</p> <h3 id="web-workers"><a href="#web-workers" class="header-anchor">#</a> Web Workers</h3> <p>实例化 Worker 对象并传入要执行的 JavaScript 文件名就可以创建一个新的 Web Worker。例如：
var worker = new Worker(&quot;stufftodo.js&quot;);
这行代码会导致浏览器下载 stufftodo.js，
但只有 Worker 接收到消息才会实际执行文件中的代码。
要给 Worker 传递消息，可以使用 postMessage()方法
worker.postMessage(“start! &quot;);
Worker 是通过 message 和 error 事件与页面通信的
worker.onmessage = function(event){
var data = event.data;
//对数据进行处理
}
Worker 不能完成给定的任务时会触发 error 事件
发生 error 事件时，事件对象中包含三个属性：filename、lineno 和 message，分别表示发生错误的文件名、代码行号和完整的错误消息
worker.terminate(); //立即停止 Worker 的工作。【Worker 中的代码会立即停止执行，后续的所有过程都不会再发生（包括 error 和 message 事件也不会再触发）。】</p> <h3 id="图文不可复制"><a href="#图文不可复制" class="header-anchor">#</a> 图文不可复制</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">-webkit-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token property">-ms-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token property">-moz-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token property">-khtml-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
</code></pre></div><ul><li>复制的文本 都会被加上一段来源说明
<ul><li>1、监听 copy 事件，并阻止这个事件的默认行为。</li> <li>2、获取选中的内容（window.getSelection()）加上版权信息，然后设置到剪切板（clipboarddata.setData()）。</li></ul></li></ul> <h3 id="微任务-宏任务"><a href="#微任务-宏任务" class="header-anchor">#</a> 微任务 宏任务</h3> <h3 id="sessionstorage-、localstorage-和-cookie-之间的区别"><a href="#sessionstorage-、localstorage-和-cookie-之间的区别" class="header-anchor">#</a> sessionStorage 、localStorage 和 cookie 之间的区别</h3> <p>共同点：用于浏览器端存储的缓存数据
不同点：
(1)、存储内容是否发送到服务器端：当设置了 Cookie 后，数据会发送到服务器端，造成一定的宽带浪费；
web storage,会将数据保存到本地，不会造成宽带浪费；
(2)、数据存储大小不同：Cookie 数据不能超过 4K,适用于会话标识；web storage 数据存储可以达到 5M;
(3)、数据存储的有效期限不同：cookie 只在设置了 Cookid 过期时间之前一直有效，即使关闭窗口或者浏览器；
sessionStorage,仅在关闭浏览器之前有效；localStorage,数据存储永久有效；
(4)、作用域不同：cookie 和 localStorage 是在同源同窗口中都是共享的；sessionStorage 不在不同的浏览器窗口中共享，即使是同一个页面；</p> <h3 id="web-storage-与-cookie-相比存在的优势"><a href="#web-storage-与-cookie-相比存在的优势" class="header-anchor">#</a> Web Storage 与 Cookie 相比存在的优势：</h3> <p>(1)、存储空间更大：IE8 下每个独立的存储空间为 10M，其他浏览器实现略有不同，但都比 Cookie 要大很多。
(2)、存储内容不会发送到服务器：当设置了 Cookie 后，Cookie 的内容会随着请求一并发送的服务器，这对于本地存储的数据是一种带宽浪费。而 Web Storage 中的数据则仅仅是存在本地，不会与服务器发生任何交互。
(3)、更多丰富易用的接口：Web Storage 提供了一套更为丰富的接口，如 setItem,getItem,removeItem,clear 等,使得数据操作更为简便。cookie 需要自己封装。
(4)、独立的存储空间：每个域（包括子域）有独立的存储空间，各个存储空间是完全独立的，因此不会造成数据混乱。</p> <h2 id="getxxxbyxxx-与-queryselector"><a href="#getxxxbyxxx-与-queryselector" class="header-anchor">#</a> getXXXByXXX 与 querySelector</h2> <p>getXXXByXXX 获取的是动态集合，querySelector 获取的是静态集合。</p> <p>简单的说就是，动态就是选出的元素会随文档改变，静态的不会，取出来之后就和文档的改变无关了。</p> <h3 id="lodash-稀疏数组"><a href="#lodash-稀疏数组" class="header-anchor">#</a> lodash 稀疏数组</h3> <p>Array.from(arrayLike[, mapFn[, thisArg]])</p> <p>参数：
arrayLike
想要转换成数组的伪数组对象或可迭代对象。
mapFn
如果指定了该参数，新数组中的每个元素会执行该回调函数。
thisArg
可选参数，执行回调函数 mapFn 时 this 对象。</p> <p>返回值：
一个新的数组实例。</p> <p>一、填充数组
【使用值填充】：
const result = Array.from({ length }, () =&gt; 0);
const result = Array(length).fill(0);
【使用对象填充】：
const resultA = Array.from({ length }, () =&gt; ({})); 每个对象都是独立的
const resultB = Array(length).fill({}); 每个对象都是引用的同一处
由 Array.from 返回的 resultA 使用不同空对象实例进行初始化。之所以发生这种情况是因为每次调用时，mapFunction，即此处的 () =&gt; ({}) 都会返回一个新的对象。</p> <p>二、序列生成器(指定范围)
三、Array.from(new Set(array));去重</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> length <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">let</span> resultA <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'2'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> resultB <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'2'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultA<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultB<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> resultA<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultB<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> resultB<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">range</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> stop<span class="token punctuation">,</span> step</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token punctuation">(</span>stop <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">/</span> step <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> start <span class="token operator">+</span> i <span class="token operator">*</span> step<span class="token punctuation">)</span>
<span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// [1, 3, 5, 7, 9]</span>
</code></pre></div><h3 id="节流函数防抖函数"><a href="#节流函数防抖函数" class="header-anchor">#</a> 节流函数防抖函数</h3> <p><a href="http://demo.nimius.net/debounce_throttle/" target="_blank" rel="noopener noreferrer">demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://juejin.cn/post/6844903651278848014" target="_blank" rel="noopener noreferrer">jieshi<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>debounce 限制多长时间才能执行一次，如果没达到该时间，就不执行
throttle 限制多长时间必须执行一次，到了时间不论啥操作都要执行下</p> <p>https://github.com/mqyqingfeng/Blog/issues/22</p> <p>https://github.com/mqyqingfeng/Blog/issues/26</p> <p>https://mp.weixin.qq.com/s?__biz=MzI0NTE5NzYyMw==&amp;mid=2247486191&amp;idx=1&amp;sn=7fd82697facf0eb1e70a975943036db2&amp;chksm=e95374b7de24fda1a9df03abcd275d5c5cfac5282c7713d9242af0dc6513786a0b9358cb8e11&amp;scene=178&amp;cur_album_id=1506334666021273601#rd</p> <p>gifcam 录制动图</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 节流函数: 所谓节流，就是指连续触发事件但是在 n 秒中只执行一次函数。 节流会稀释函数的执行频率</span>
特点：每等待某种间隔后，进行操作

持续触发并不会执行多次
到一定时间 <span class="token operator">/</span> <span class="token function">其它间隔</span> <span class="token punctuation">(</span> 如滑动的高度 <span class="token punctuation">)</span>再去执行
  <span class="token keyword">const</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">500</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 防抖函数：所谓防抖，就是指触发事件后 n 秒后才执行函数，如果在 n 秒内又触发了事件，则会重新计算函数执行时间</span>

特点：等待某种操作停止后，加以间隔进行操作

持续触发不执行
不触发的一段时间之后再执行
  <span class="token keyword">const</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="满足-if-a-1-a-2-a-3-这个条件"><a href="#满足-if-a-1-a-2-a-3-这个条件" class="header-anchor">#</a> 满足 if (a == 1 &amp; a == 2 &amp; a == 3)这个条件</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">i</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span>i<span class="token operator">++</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="js-定时器"><a href="#js-定时器" class="header-anchor">#</a> JS 定时器</h2> <h3 id="从-js-执行机制说起"><a href="#从-js-执行机制说起" class="header-anchor">#</a> 从 JS 执行机制说起</h3> <p>浏览器（或者说 JS 引擎）执行 JS 的机制是基于事件循环。</p> <p>由于 JS 是单线程，所以同一时间只能执行一个任务，其他任务就得排队，后续任务必须等到前一个任务结束才能开始执行。</p> <p>为了避免因为某些长时间任务造成的无意义等待，JS 引入了异步的概念，用另一个线程来管理异步任务。</p> <p>同步任务直接在主线程队列中顺序执行，而异步任务会进入另一个任务队列，不会阻塞主线程。等到主线程队列空了（执行完了）的时候，就会去异步队列查询是否有可执行的异步任务了（异步任务通常进入异步队列之后还要等一些条件才能执行，如 ajax 请求、文件读写），如果某个异步任务可以执行了便加入主线程队列，以此循环。</p> <h3 id="定时器"><a href="#定时器" class="header-anchor">#</a> 定时器</h3> <p>JS 的定时器目前有三个：setTimeout、setInterval 和 setImmediate。</p> <p>定时器也是一种异步任务，通常浏览器都有一个独立的定时器模块，定时器的延迟时间就由定时器模块来管理，当某个定时器到了可执行状态，就会被加入主线程队列。</p> <p>JS 定时器非常实用，做动画的肯定都用到过，也是最常用的异步模型之一。</p> <p>有时候一些奇奇怪怪的问题，加一个 setTimeout(fn, 0)（以下简写 setTimeout(0)）就解决了。不过，如果对定时器本身不熟悉，也会产生一些奇奇怪怪的问题。</p> <h3 id="settimeout"><a href="#settimeout" class="header-anchor">#</a> setTimeout</h3> <p>setTimeout(fn, x) 表示延迟 x 毫秒之后执行 fn。</p> <p>使用的时候千万不要太相信预期，延迟的时间严格来说总是大于 x 毫秒的，至于大多少就要看当时 JS 的执行情况了。</p> <p>另外，多个定时器如不及时清除（clearTimeout），会存在干扰，使延迟时间更加捉摸不透。所以，不管定时器有没有执行完，及时清除已经不需要的定时器是个好习惯。</p> <p>HTML5 规范规定最小延迟时间不能小于 4ms，即 x 如果小于 4，会被当做 4 来处理。 不过不同浏览器的实现不一样，比如，Chrome 可以设置 1ms，IE11/Edge 是 4ms。</p> <p>setTimeout 注册的函数 fn 会交给浏览器的定时器模块来管理，延迟时间到了就将 fn 加入主进程执行队列，如果队列前面还有没有执行完的代码，则又需要花一点时间等待才能执行到 fn，所以实际的延迟时间会比设置的长。如在 fn 之前正好有一个超级大循环，那延迟时间就不是一丁点了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">testSetTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token string">'setTimeout'</span>
  console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// setTimeout: 335.187ms，远远不止 10ms。</span>
</code></pre></div><h3 id="setinterval"><a href="#setinterval" class="header-anchor">#</a> setInterval</h3> <p>setInterval 的实现机制跟 setTimeout 类似，只不过 setInterval 是重复执行的。</p> <p>对于 setInterval(fn, 100) 容易产生一个误区：并不是上一次 fn 执行完了之后再过 100ms 才开始执行下一次 fn。 事实上，setInterval 并不管上一次 fn 的执行结果，而是每隔 100ms 就将 fn 放入主线程队列，而两次 fn 之间具体间隔多久就不一定了，跟 setTimeout 实际延迟时间类似，和 JS 执行情况有关。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">testSetInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">const</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    i <span class="token operator">+=</span> <span class="token number">1</span>
    i <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">次开始</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">次结束</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 第1次开始 100</span>
<span class="token comment">// 第1次结束 1089</span>
<span class="token comment">// 第2次开始 1091</span>
<span class="token comment">// 第2次结束 1396</span>
<span class="token comment">// 第3次开始 1396</span>
<span class="token comment">// 第3次结束 1701</span>
<span class="token comment">// 第4次开始 1701</span>
<span class="token comment">// 第4次结束 2004</span>
<span class="token comment">// 第5次开始 2004</span>
<span class="token comment">// 第5次结束 2307</span>
</code></pre></div><p>可见，虽然每次 fn 执行时间都很长，但下一次并不是等上一次执行完了再过 100ms 才开始执行的，实际上早就已经等在队列里了。</p> <p>另外可以看出，当 setInterval 的回调函数执行时间超过了延迟时间，已经完全看不出有时间间隔了。</p> <p>如果 setTimeout 和 setInterval 都在延迟 100ms 之后执行，那么谁先注册谁就先执行回调函数。</p> <h3 id="setimmediate"><a href="#setimmediate" class="header-anchor">#</a> setImmediate</h3> <p>这算一个比较新的定时器，目前 IE11/Edge 支持、Nodejs 支持，Chrome 不支持，其他浏览器未测试。</p> <p>从 API 名字来看很容易联想到 setTimeout(0)，不过 setImmediate 应该算是 setTimeout(0) 的替代版。</p> <p>在 IE11/Edge 中，setImmediate 延迟可以在 1ms 以内，而 setTimeout 有最低 4ms 的延迟，所以 setImmediate 比 setTimeout(0) 更早执行回调函数。不过在 Nodejs 中，两者谁先执行都有可能，原因是 Nodejs 的事件循环和浏览器的略有差异。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">testSetImmediate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token string">'setImmediate'</span>
  console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>

  <span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Edge 输出：setImmediate: 0.555 毫秒</span>
</code></pre></div><p>很明显，setImmediate 设计来是为保证让代码在下一次事件循环执行，以前 setTimeout(0) 这种不可靠的方式可以丢掉了。</p> <h3 id="requestanimationframe"><a href="#requestanimationframe" class="header-anchor">#</a> requestAnimationFrame</h3> <p><a href="https://mp.weixin.qq.com/s/ocFcBRjj8xzizF5ebFepdA" target="_blank" rel="noopener noreferrer">requestAnimationFrame<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>requestAnimationFrame 并不是定时器，但和 setTimeout 很相似，在没有 requestAnimationFrame 的浏览器一般都是用 setTimeout 模拟。</p> <p>requestAnimationFrame 跟屏幕刷新同步，大多数屏幕的刷新频率都是 60Hz，对应的 requestAnimationFrame 大概每隔 16.7ms 触发一次，如果屏幕刷新频率更高，requestAnimationFrame 也会更快触发。基于这点，在支持 requestAnimationFrame 的浏览器还使用 setTimeout 做动画显然是不明智的。</p> <p>在不支持 requestAnimationFrame 的浏览器，如果使用 setTimeout/setInterval 来做动画，最佳延迟时间也是 16.7ms。 如果太小，很可能连续两次或者多次修改 dom 才一次屏幕刷新，这样就会丢帧，动画就会卡；如果太大，显而易见也会有卡顿的感觉。</p> <p>有趣的是，第一次触发 requestAnimationFrame 的时机在不同浏览器也存在差异，Edge 中，大概 16.7ms 之后触发，而 Chrome 则立即触发，跟 setImmediate 差不多。按理说 Edge 的实现似乎更符合常理。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">testRequestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token string">'requestAnimationFrame'</span>
  console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>

  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Edge 输出：requestAnimationFrame: 16.66 毫秒</span>

<span class="token comment">// Chrome 输出：requestAnimationFrame: 0.698ms</span>
</code></pre></div><p>但相邻两次 requestAnimationFrame 的时间间隔大概都是 16.7ms，这一点是一致的。当然也不是绝对的，如果页面本身性能就比较低，相隔的时间可能会变大，这就意味着页面达不到 60fps。</p> <h3 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h3> <p>Promise 是很常用的一种异步模型，如果我们想让代码在下一个事件循环执行，可以选择使用 setTimeout(0)、setImmediate、requestAnimationFrame(Chrome) 和 Promise。</p> <p>而且 Promise 的延迟比 setImmediate 更低，意味着 Promise 比 setImmediate 先执行。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">testSetImmediate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token string">'setImmediate'</span>
  console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>

  <span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">testPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token string">'Promise'</span>
  console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">testSetImmediate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">testPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Edge 输出：Promise: 0.33 毫秒 setImmediate: 1.66 毫秒</span>
</code></pre></div><p>尽管 setImmediate 的回调函数比 Promise 先注册，但还是 Promise 先执行。</p> <p>可以肯定的是，在各 JS 环境中，Promise 都是最先执行的，setTimeout(0)、setImmediate 和 requestAnimationFrame 顺序不确定。</p> <h3 id="process-nexttick"><a href="#process-nexttick" class="header-anchor">#</a> process.nextTick</h3> <p>process.nextTick 是 Nodejs 的 API，比 Promise 更早执行。</p> <p>事实上，process.nextTick 是不会进入异步队列的，而是直接在主线程队列尾强插一个任务，虽然不会阻塞主线程，但是会阻塞异步任务的执行，如果有嵌套的 process.nextTick，那异步任务就永远没机会被执行到了。</p> <p>使用的时候要格外小心，除非你的代码明确要在本次事件循环结束之前执行，否则使用 setImmediate 或者 Promise 更保险。</p> <h2 id="事件循环、微任务、宏任务"><a href="#事件循环、微任务、宏任务" class="header-anchor">#</a> 事件循环、微任务、宏任务</h2> <h2 id="math-对象"><a href="#math-对象" class="header-anchor">#</a> Math 对象</h2> <h3 id="math-对象提供以下一些静态方法"><a href="#math-对象提供以下一些静态方法" class="header-anchor">#</a> Math 对象提供以下一些静态方法：</h3> <p>Math.abs()：绝对值</p> <p>Math.ceil()：向上取整</p> <p>Math.floor()：向下取整</p> <p>Math.max()：最大值</p> <p>Math.min()：最小值</p> <p>Math.pow()：幂运算</p> <p>Math.sqrt()：平方根</p> <p>Math.log()：自然对数</p> <p>Math.exp()：e 的指数</p> <p>Math.round()：四舍五入</p> <p>Math.random()返回 0 到 1 之间的一个伪随机数，可能等于 0，但是一定小于 1。</p> <h3 id="🌰-栗子-任意范围的随机数生成函数如下"><a href="#🌰-栗子-任意范围的随机数生成函数如下" class="header-anchor">#</a> 🌰 栗子：任意范围的随机数生成函数如下：</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getRandomArbitrary</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">+</span> min
<span class="token punctuation">}</span>

<span class="token function">getRandomArbitrary</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">6.5</span><span class="token punctuation">)</span>
<span class="token comment">// 2.4942810038223864</span>
</code></pre></div><h3 id="🌰-栗子-任意范围的随机整数生成函数如下"><a href="#🌰-栗子-任意范围的随机整数生成函数如下" class="header-anchor">#</a> 🌰 栗子：任意范围的随机整数生成函数如下：</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getRandomInt</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> min
<span class="token punctuation">}</span>

<span class="token function">getRandomInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
</code></pre></div><h3 id="🌰-栗子-返回随机字符的例子如下"><a href="#🌰-栗子-返回随机字符的例子如下" class="header-anchor">#</a> 🌰 栗子：返回随机字符的例子如下：</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">random_str</span><span class="token punctuation">(</span><span class="token parameter">length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token constant">ALPHABET</span> <span class="token operator">=</span> <span class="token string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span>
  <span class="token constant">ALPHABET</span> <span class="token operator">+=</span> <span class="token string">'abcdefghijklmnopqrstuvwxyz'</span>
  <span class="token constant">ALPHABET</span> <span class="token operator">+=</span> <span class="token string">'0123456789-_'</span>
  <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> rand <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">ALPHABET</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    str <span class="token operator">+=</span> <span class="token constant">ALPHABET</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>rand<span class="token punctuation">,</span> rand <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> str
<span class="token punctuation">}</span>

<span class="token function">random_str</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment">// &quot;NdQKOr&quot;</span>
</code></pre></div><h3 id="循环-for-of-iterator"><a href="#循环-for-of-iterator" class="header-anchor">#</a> 循环 for-of Iterator</h3> <p>跟 forEach 相比，可以正确响应 break, continue, return。</p> <p>for-of 循环不仅支持数组，还支持大多数类数组对象，例如 DOM nodelist 对象。</p> <p>for-of 循环也支持字符串遍历，它将字符串视为一系列 Unicode 字符来进行遍历。</p> <p>for-of 也支持 Map 和 Set （两者均为 ES6 中新增的类型）对象遍历。</p> <h3 id="object-freeze"><a href="#object-freeze" class="header-anchor">#</a> Object.freeze</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Joe'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pet</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'dog'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Buttercup'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>

user<span class="token punctuation">.</span>pet<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Daffodil'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>pet<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//Daffodil</span>
</code></pre></div><p>Object.freeze 将会使对象浅冻结，但不会保护深层属性不被修改。在这个例子中，不能对 user.age 进行修改，但是对 user.pet.name 进行修改却没有问题。如果我们觉得需要保护一个对象，避免其“从头到尾”发生改变，则可以递归地应用 Object.freeze 或使用现有的“深度冻结”库。</p> <h3 id="promise-解决的顺序与-promise-all-无关。"><a href="#promise-解决的顺序与-promise-all-无关。" class="header-anchor">#</a> Promise 解决的顺序与 Promise.all 无关。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">timer</span> <span class="token operator">=</span> <span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">res</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> all <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">timer</span><span class="token punctuation">(</span><span class="token string">'first'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token string">'second'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token comment">// [&quot;first&quot;, &quot;second&quot;]</span>
</code></pre></div><p>我们能够可靠地依靠它们按照数组参数中提供的相同顺序返回。</p> <h3 id="展开操作符"><a href="#展开操作符" class="header-anchor">#</a> 展开操作符</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'James'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">]</span>
arr2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> <span class="token string">'Jonah'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span>
<span class="token comment">//  [{ firstName: &quot;Jonah&quot; }]</span>
</code></pre></div><p>展开操作符会创建数组的浅表副本</p> <h3 id="数组方法绑定"><a href="#数组方法绑定" class="header-anchor">#</a> 数组方法绑定</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 123</span>
</code></pre></div><p>当 ['a', 'b', 'c'].map 被调用时，将会调用 this' 值为 '['a'，'b'，'c'] 的 Array.prototype.map。但是当用作 引用 时， Array.prototype.map 的引用。</p> <p>Function.prototype.bind 会将函数的 this 绑定到第一个参数（在本例中为 [1, 2, 3]），用 this 调用 Array.prototype.map 将会导致这些项目被迭代并输出。</p> <h2 id="js-base64-编码解码"><a href="#js-base64-编码解码" class="header-anchor">#</a> JS Base64 编码解码</h2> <h2 id="base64-解码"><a href="#base64-解码" class="header-anchor">#</a> Base64 解码</h2> <p>（浏览器中）：
var decodedData = window.atob(encodedData);
或者（浏览器或 js Worker 线程中）：
var decodedData = self.atob(encodedData);</p> <h2 id="base64-编码"><a href="#base64-编码" class="header-anchor">#</a> Base64 编码</h2> <p>语法为（浏览器中）：
var encodedData = window.btoa(stringToEncode);
或者（浏览器或 js Worker 线程中）：
var encodedData = self.btoa(stringToEncode);</p> <h2 id="中文-base64-数据转换会有报错问题"><a href="#中文-base64-数据转换会有报错问题" class="header-anchor">#</a> 中文 Base64 数据转换会有报错问题</h2> <p>中文先 encode 转码和 decode 编码。btoa(unescape(encodeURIComponent(str)))</p> <h2 id="任意文件-base64-编码"><a href="#任意文件-base64-编码" class="header-anchor">#</a> 任意文件 Base64 编码</h2> <p>借助 FileReader 对象和 readAsDataURL 方法，我们可以把任意的文件转换为 Base64 Data-URI。
var reader = new FileReader();
reader.onload = function(e) {
// e.target.result 就是该文件的完整 Base64 Data-URI
};
reader.readAsDataURL(file);</p> <h1 id="html-字符的转义和反转义"><a href="#html-字符的转义和反转义" class="header-anchor">#</a> HTML 字符的转义和反转义</h1> <h2 id="_1-转义-document-createtextnode-把-html-内容作为文本节点的-textcontent-内容-然后使用普通元素的-innerhtml-属性返回下就可以了"><a href="#_1-转义-document-createtextnode-把-html-内容作为文本节点的-textcontent-内容-然后使用普通元素的-innerhtml-属性返回下就可以了" class="header-anchor">#</a> 1. 转义 document.createTextNode 把 HTML 内容作为文本节点的 textContent 内容，然后使用普通元素的 innerHTML 属性返回下就可以了</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'&lt;span&gt;by zhangxinxu&lt;/span&gt;'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
div<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>textNode<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
</code></pre></div><h2 id="_2-反转义-domparser-api。"><a href="#_2-反转义-domparser-api。" class="header-anchor">#</a> 2.反转义 DOMParser API。</h2> <p>let str = '&lt;span&gt;by zhangxinxu&lt;/span&gt;';
let doc = new DOMParser().parseFromString(str, 'text/html');
console.log(doc.documentElement.textContent);</p> <h2 id="_3-借助-textarea-元素-这是-ie-浏览器时代常用的一种方法"><a href="#_3-借助-textarea-元素-这是-ie-浏览器时代常用的一种方法" class="header-anchor">#</a> 3.借助 textarea 元素，这是 IE 浏览器时代常用的一种方法</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> textarea <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'textarea'</span><span class="token punctuation">)</span>
textarea<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'&amp;lt;span&amp;gt;by zhangxinxu&amp;lt;/span&amp;gt;'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>textarea<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue<span class="token punctuation">)</span>
</code></pre></div><p><a href="https://www.zhangxinxu.com/wordpress/2019/06/domparser-xmlserializer-api/" target="_blank" rel="noopener noreferrer">DOMParser 和 XMLSerializer 两个 API 简介<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>DOMParser 可以让 HTML 字符串解析为 DOM 树，格式类型包括 XML 文档，或者 HTML 文档。
XMLSerializer 方法的作用和 DOMParser 相反，XMLSerializer 可以让 DOM 树对象序列化为字符串。</p> <div class="language-js extra-class"><pre class="language-js"><code>传统的字符串处理代码示意：
<span class="token comment">/**
 * 转义HTML标签的方法
 * @param  {String} str 需要转义的HTML字符串
 * @return {String}     转义后的字符串
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">funEncodeHTML</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> str <span class="token operator">==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;|&amp;|&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matches</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string-property property">'&lt;'</span><span class="token operator">:</span> <span class="token string">'&amp;lt;'</span><span class="token punctuation">,</span>
                <span class="token string-property property">'&gt;'</span><span class="token operator">:</span> <span class="token string">'&amp;gt;'</span><span class="token punctuation">,</span>
                <span class="token string-property property">'&amp;'</span><span class="token operator">:</span> <span class="token string">'&amp;amp;'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">[</span>matches<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 反转义HTML标签的方法
 * @param  {String} str 需要反转义的字符串
 * @return {String}     反转义后的字符串
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">funDecodeHTML</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> str <span class="token operator">==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;lt;|&amp;gt;|&amp;amp;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matches</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string-property property">'&amp;lt;'</span><span class="token operator">:</span> <span class="token string">'&lt;'</span><span class="token punctuation">,</span>
                <span class="token string-property property">'&amp;gt;'</span><span class="token operator">:</span> <span class="token string">'&gt;'</span><span class="token punctuation">,</span>
                <span class="token string-property property">'&amp;amp;'</span><span class="token operator">:</span> <span class="token string">'&amp;'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">[</span>matches<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="万物皆空之-javascript-原型"><a href="#万物皆空之-javascript-原型" class="header-anchor">#</a> 万物皆空之 JavaScript 原型</h2> <ul><li><a href="https://ulivz.com/2016/12/20/javascript-prototype/" target="_blank" rel="noopener noreferrer">万物皆空之 JavaScript 原型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/foreverwaiting/easy-bookmark/edit/master/docs/front/javascriptTypescript.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/6/2021, 11:42:20 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/easy-bookmark/front/http.html" class="prev">
        http请求
      </a></span> <span class="next"><a href="/easy-bookmark/front/libraryFrame.html">
        流行的库和框架
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/easy-bookmark/assets/js/app.98929521.js" defer></script><script src="/easy-bookmark/assets/js/2.6ed84ef8.js" defer></script><script src="/easy-bookmark/assets/js/60.b44a3b13.js" defer></script>
  </body>
</html>
