<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2021-10 | easy bookmark</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/easy-bookmark/favicon.ico">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?d517a1ee1e75b0fd216b5183a8f32ac0";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();      
      </script>
    <meta name="description" content="个人收藏">
    
    <link rel="preload" href="/easy-bookmark/assets/css/0.styles.9b6bb25f.css" as="style"><link rel="preload" href="/easy-bookmark/assets/js/app.98929521.js" as="script"><link rel="preload" href="/easy-bookmark/assets/js/2.6ed84ef8.js" as="script"><link rel="preload" href="/easy-bookmark/assets/js/24.a4781c35.js" as="script"><link rel="prefetch" href="/easy-bookmark/assets/js/10.59e2f598.js"><link rel="prefetch" href="/easy-bookmark/assets/js/11.9fc8a230.js"><link rel="prefetch" href="/easy-bookmark/assets/js/12.089b352b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/13.e2ac9449.js"><link rel="prefetch" href="/easy-bookmark/assets/js/14.a988d92c.js"><link rel="prefetch" href="/easy-bookmark/assets/js/15.ae6ad2bb.js"><link rel="prefetch" href="/easy-bookmark/assets/js/16.416459c2.js"><link rel="prefetch" href="/easy-bookmark/assets/js/17.3aa5cbce.js"><link rel="prefetch" href="/easy-bookmark/assets/js/18.b724b90f.js"><link rel="prefetch" href="/easy-bookmark/assets/js/19.cb360c51.js"><link rel="prefetch" href="/easy-bookmark/assets/js/20.469dd230.js"><link rel="prefetch" href="/easy-bookmark/assets/js/21.62b9147c.js"><link rel="prefetch" href="/easy-bookmark/assets/js/22.dabef7dd.js"><link rel="prefetch" href="/easy-bookmark/assets/js/23.ffa9fcfd.js"><link rel="prefetch" href="/easy-bookmark/assets/js/25.79ef71a6.js"><link rel="prefetch" href="/easy-bookmark/assets/js/26.331c4dc5.js"><link rel="prefetch" href="/easy-bookmark/assets/js/27.5b1f1b94.js"><link rel="prefetch" href="/easy-bookmark/assets/js/28.37dd571e.js"><link rel="prefetch" href="/easy-bookmark/assets/js/29.580f58e7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/3.24a9cbfa.js"><link rel="prefetch" href="/easy-bookmark/assets/js/30.0630daa0.js"><link rel="prefetch" href="/easy-bookmark/assets/js/31.172b9e48.js"><link rel="prefetch" href="/easy-bookmark/assets/js/32.3c9adea6.js"><link rel="prefetch" href="/easy-bookmark/assets/js/33.5595eb88.js"><link rel="prefetch" href="/easy-bookmark/assets/js/34.931e4ffe.js"><link rel="prefetch" href="/easy-bookmark/assets/js/35.c06f071e.js"><link rel="prefetch" href="/easy-bookmark/assets/js/36.bc28c146.js"><link rel="prefetch" href="/easy-bookmark/assets/js/37.50b96313.js"><link rel="prefetch" href="/easy-bookmark/assets/js/38.61fdc3da.js"><link rel="prefetch" href="/easy-bookmark/assets/js/39.8e94008c.js"><link rel="prefetch" href="/easy-bookmark/assets/js/4.5591ca6b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/40.b9dd3fe7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/41.44f4e080.js"><link rel="prefetch" href="/easy-bookmark/assets/js/42.cf495ac2.js"><link rel="prefetch" href="/easy-bookmark/assets/js/43.96432862.js"><link rel="prefetch" href="/easy-bookmark/assets/js/44.28acc21b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/45.10534c91.js"><link rel="prefetch" href="/easy-bookmark/assets/js/46.6d79e8a6.js"><link rel="prefetch" href="/easy-bookmark/assets/js/47.a7759570.js"><link rel="prefetch" href="/easy-bookmark/assets/js/48.bc0667ab.js"><link rel="prefetch" href="/easy-bookmark/assets/js/49.c1ebffce.js"><link rel="prefetch" href="/easy-bookmark/assets/js/5.3de96ffc.js"><link rel="prefetch" href="/easy-bookmark/assets/js/50.a0f50760.js"><link rel="prefetch" href="/easy-bookmark/assets/js/51.52913321.js"><link rel="prefetch" href="/easy-bookmark/assets/js/52.b2c32e3a.js"><link rel="prefetch" href="/easy-bookmark/assets/js/53.cd133ce2.js"><link rel="prefetch" href="/easy-bookmark/assets/js/54.5becf481.js"><link rel="prefetch" href="/easy-bookmark/assets/js/55.3ec180c8.js"><link rel="prefetch" href="/easy-bookmark/assets/js/56.24bf3181.js"><link rel="prefetch" href="/easy-bookmark/assets/js/57.5edd1dc7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/58.697b6057.js"><link rel="prefetch" href="/easy-bookmark/assets/js/59.c422bbd3.js"><link rel="prefetch" href="/easy-bookmark/assets/js/6.010a5dd5.js"><link rel="prefetch" href="/easy-bookmark/assets/js/60.b44a3b13.js"><link rel="prefetch" href="/easy-bookmark/assets/js/61.36d0c1bd.js"><link rel="prefetch" href="/easy-bookmark/assets/js/62.e4917905.js"><link rel="prefetch" href="/easy-bookmark/assets/js/63.690191bf.js"><link rel="prefetch" href="/easy-bookmark/assets/js/64.e6e01d48.js"><link rel="prefetch" href="/easy-bookmark/assets/js/65.13387ea7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/66.37c48ee9.js"><link rel="prefetch" href="/easy-bookmark/assets/js/67.fa7e4f5a.js"><link rel="prefetch" href="/easy-bookmark/assets/js/68.eb40d0ee.js"><link rel="prefetch" href="/easy-bookmark/assets/js/69.584d43ea.js"><link rel="prefetch" href="/easy-bookmark/assets/js/7.48552666.js"><link rel="prefetch" href="/easy-bookmark/assets/js/70.3abc29fb.js"><link rel="prefetch" href="/easy-bookmark/assets/js/71.e149adad.js"><link rel="prefetch" href="/easy-bookmark/assets/js/72.b73ecb17.js"><link rel="prefetch" href="/easy-bookmark/assets/js/73.9307c017.js"><link rel="prefetch" href="/easy-bookmark/assets/js/74.c1502fb4.js"><link rel="prefetch" href="/easy-bookmark/assets/js/75.69f4626b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/76.c25802cb.js"><link rel="prefetch" href="/easy-bookmark/assets/js/77.a37efc00.js"><link rel="prefetch" href="/easy-bookmark/assets/js/8.a079a873.js"><link rel="prefetch" href="/easy-bookmark/assets/js/9.e1d2376d.js">
    <link rel="stylesheet" href="/easy-bookmark/assets/css/0.styles.9b6bb25f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/easy-bookmark/" class="home-link router-link-active"><img src="/easy-bookmark/logo.jpg" alt="easy bookmark" class="logo"> <span class="site-name can-hide">easy bookmark</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/easy-bookmark/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/easy-bookmark/blogs/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/easy-bookmark/website/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/easy-bookmark/daily/" class="nav-link router-link-active">
  日常
</a></div><div class="nav-item"><a href="/easy-bookmark/front/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/easy-bookmark/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://foreverwaiting.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/foreverwaiting/easy-bookmark" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/easy-bookmark/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/easy-bookmark/blogs/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/easy-bookmark/website/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/easy-bookmark/daily/" class="nav-link router-link-active">
  日常
</a></div><div class="nav-item"><a href="/easy-bookmark/front/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/easy-bookmark/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://foreverwaiting.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/foreverwaiting/easy-bookmark" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>日常</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/easy-bookmark/daily/" aria-current="page" class="sidebar-link">日复一日诶</a></li><li><a href="/easy-bookmark/daily/day202109.html" class="sidebar-link">2021-09</a></li><li><a href="/easy-bookmark/daily/day202110.html" aria-current="page" class="active sidebar-link">2021-10</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#_31" class="sidebar-link">31</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#生成-tree" class="sidebar-link">生成 tree</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#_30" class="sidebar-link">30</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#document-execcommand-copy-true" class="sidebar-link">document.execCommand('copy', true);</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#clipboard-api" class="sidebar-link">Clipboard API</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#呼起-chrome-吸取颜色-api" class="sidebar-link">呼起 chrome 吸取颜色 api</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#javascript-允许一个块状作用域既不充当循环也不充当-if-语句的一部分而独立存在。下面的代码演示了这样一个例子-你可以通过标签命名块状作用域-并在合适的时机跳出这个作用域-返回到上层作用域中" class="sidebar-link">JavaScript 允许一个块状作用域既不充当循环也不充当 if 语句的一部分而独立存在。下面的代码演示了这样一个例子，你可以通过标签命名块状作用域，并在合适的时机跳出这个作用域，返回到上层作用域中：</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#_28" class="sidebar-link">28</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#javascript-沙箱" class="sidebar-link">JavaScript 沙箱</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#学习" class="sidebar-link">学习</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#阅读源码" class="sidebar-link">阅读源码</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#_25" class="sidebar-link">25</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#css-自定义-ul-li-的-type" class="sidebar-link">css 自定义 ul li 的 type</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#_12" class="sidebar-link">12</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#_10" class="sidebar-link">10</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#js" class="sidebar-link">js</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#node-js-在不同时间格式处理上的差异" class="sidebar-link">Node.js 在不同时间格式处理上的差异</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#tree-shaking" class="sidebar-link">Tree-shaking</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#async-await" class="sidebar-link">async await</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#衡量性能优化的性能指标-lighthouse" class="sidebar-link">衡量性能优化的性能指标 Lighthouse</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#css-命名规范" class="sidebar-link">CSS 命名规范</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#chrome-中体验实验性特性" class="sidebar-link">Chrome 中体验实验性特性</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202110.html#weakmap-和-map-的区别-weakmap-原理-为什么能被-gc" class="sidebar-link">WeakMap 和 Map 的区别，WeakMap 原理，为什么能被 GC？</a></li></ul></li></ul></li><li><a href="/easy-bookmark/daily/day202111.html" class="sidebar-link">2021-11</a></li><li><a href="/easy-bookmark/daily/day202112.html" class="sidebar-link">2021-12</a></li><li><a href="/easy-bookmark/daily/day202201.html" class="sidebar-link">2022-01</a></li><li><a href="/easy-bookmark/daily/day202208.html" class="sidebar-link">2022-08</a></li><li><a href="/easy-bookmark/daily/day202209.html" class="sidebar-link">2022-09</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2021-10"><a href="#_2021-10" class="header-anchor">#</a> 2021-10</h1> <h2 id="_31"><a href="#_31" class="header-anchor">#</a> 31</h2> <h3 id="生成-tree"><a href="#生成-tree" class="header-anchor">#</a> 生成 tree</h3> <p><a href="https://devtool.tech/tree" target="_blank" rel="noopener noreferrer">Tree 树形目录可视化生成器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_30"><a href="#_30" class="header-anchor">#</a> 30</h2> <ul><li><p><a href="https://mp.weixin.qq.com/s/XRIm4b5d10a2os20SRcD4Q" target="_blank" rel="noopener noreferrer">正则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://juejin.cn/post/7023539063424548872" target="_blank" rel="noopener noreferrer">package.json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.zhangxinxu.com/wordpress/2021/10/js-copy-paste-clipboard/" target="_blank" rel="noopener noreferrer">复制文字：execCommand &amp; Clipboard API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h3 id="document-execcommand-copy-true"><a href="#document-execcommand-copy-true" class="header-anchor">#</a> document.execCommand('copy', true);</h3> <p>1、必须文字内容选中，再执行 execCommand() 方法才有效</p> <p>2、执行 textarea.select();让其选中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建输入框</span>
<span class="token keyword">var</span> textarea <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'textarea'</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textarea<span class="token punctuation">)</span>
<span class="token comment">// 隐藏此输入框 固定定位防止执行select触发浏览器默认的控件跳转行为，也就是页面会触发滚动行为进行重定位</span>
textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'absolute'</span>
textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>clip <span class="token operator">=</span> <span class="token string">'rect(0 0 0 0)'</span>
<span class="token comment">// 赋值</span>
textarea<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'复制的文本内容...'</span>
<span class="token comment">// 选中</span>
textarea<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 复制</span>
document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre></div><p>3、缺点：</p> <ul><li>复制大段内容会卡顿：因 execCommand()同步方法，必须等复制操作结束，才能继续执行后面的代码</li> <li>无法修改复制内容</li></ul> <h3 id="clipboard-api"><a href="#clipboard-api" class="header-anchor">#</a> Clipboard API</h3> <p>1、无需浏览器权限申请，文字内容直接进入剪切板，且异步执行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2、缺点：兼容性差不支持 IE</p> <p>3、合并方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">'被复制的内容，啦啦啦~'</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// clipboard api 复制</span>
  navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> textarea <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'textarea'</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textarea<span class="token punctuation">)</span>
  <span class="token comment">// 隐藏此输入框</span>
  textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'fixed'</span>
  textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>clip <span class="token operator">=</span> <span class="token string">'rect(0 0 0 0)'</span>
  textarea<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">'10px'</span>
  <span class="token comment">// 赋值</span>
  textarea<span class="token punctuation">.</span>value <span class="token operator">=</span> text
  <span class="token comment">// 选中</span>
  textarea<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 复制</span>
  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token comment">// 移除输入框</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>textarea<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="呼起-chrome-吸取颜色-api"><a href="#呼起-chrome-吸取颜色-api" class="header-anchor">#</a> 呼起 chrome 吸取颜色 api</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> eyeDropper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EyeDropper</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> eyeDropper<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="javascript-允许一个块状作用域既不充当循环也不充当-if-语句的一部分而独立存在。下面的代码演示了这样一个例子-你可以通过标签命名块状作用域-并在合适的时机跳出这个作用域-返回到上层作用域中"><a href="#javascript-允许一个块状作用域既不充当循环也不充当-if-语句的一部分而独立存在。下面的代码演示了这样一个例子-你可以通过标签命名块状作用域-并在合适的时机跳出这个作用域-返回到上层作用域中" class="header-anchor">#</a> JavaScript 允许一个块状作用域既不充当循环也不充当 if 语句的一部分而独立存在。下面的代码演示了这样一个例子，你可以通过标签命名块状作用域，并在合适的时机跳出这个作用域，返回到上层作用域中：</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">printTwo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">printing</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;One&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>printTwo<span class="token punctuation">)</span> <span class="token keyword">break</span> printing<span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Two&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Three&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果</span>
<span class="token operator">&gt;</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  One
  Three
<span class="token operator">&gt;</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  One
  Two
  Three
</code></pre></div><h2 id="_28"><a href="#_28" class="header-anchor">#</a> 28</h2> <h3 id="javascript-沙箱"><a href="#javascript-沙箱" class="header-anchor">#</a> JavaScript 沙箱</h3> <ul><li><a href="https://mp.weixin.qq.com/s/euHJpS6rcRRqVBIPAnbUHA" target="_blank" rel="noopener noreferrer">JavaScript 沙箱<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s/8uwzZT_5unzHVY4BMx9htA" target="_blank" rel="noopener noreferrer">Google V8 引擎浅析<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s/tLKQLe1IjGv5vkDfhXIK2Q" target="_blank" rel="noopener noreferrer">二维码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s/SM76He2iHEcpSH8Nqd07gA" target="_blank" rel="noopener noreferrer">CSS 计数器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="学习"><a href="#学习" class="header-anchor">#</a> 学习</h3> <ul><li>学什么：围绕工作学可以落地实践，不然学的没有深入场景只是 demo 级别;</li> <li>如何读懂复杂代码：多用 debugger;</li> <li>长期收益：重视计算机基础
<ul><li>编译原理（它把人能读懂的源代码转成计算机能运行的代码）</li> <li>操作系统（它封装了硬件能力给上层应用，并且很好的调度各种软件资源）</li> <li>计算机网络（它提供了计算机和计算机之间的长距离通信的机制，是互联网的基础）</li> <li>计算机图形学（它是显示器中显示二维、三维图形的基础）</li> <li>音视频处理（它是音视频相关技术的基础））</li></ul></li> <li>提升学习效果和工作效率：“费曼学习法”。学完想要吸收就要多做 技术分享、写文章、给别人讲解技术点（提升学习效果和工作效率）</li></ul> <h3 id="阅读源码"><a href="#阅读源码" class="header-anchor">#</a> 阅读源码</h3> <ul><li>通过文档和测试用例了解代码的功能</li> <li>自己思考功能的实现方式</li> <li>粗读源码理清实现思路</li> <li>通过 debugger 理清实现细节</li> <li>输出文章来讲述源码实现思路</li></ul> <h2 id="_25"><a href="#_25" class="header-anchor">#</a> 25</h2> <ul><li><p>查询搜索、减枝、二分、定义左右两个指针、使用 while 循环</p></li> <li><p>双重 for 循环遍历二维数组</p></li> <li><p>递归时，可缓存已递归的值，记忆性递归。尾递归</p></li> <li><p>str.indexOf(searchValue [, fromIndex]) indexOf 第二个参数可指定开始查询的位置</p></li></ul> <h3 id="css-自定义-ul-li-的-type"><a href="#css-自定义-ul-li-的-type" class="header-anchor">#</a> css 自定义 ul li 的 type</h3> <ul><li><p>1、<code>:empty</code>伪类，表示当元素里面什么都没有的时候（包括空格、标签内换行），应用相关样式。空元素内部使用伪元素(如：::before, ::after)生成的内容，即设置 content，是不被:empty 伪类认可的，选择器依然认为这是个空元素</p></li> <li><p>2、伪类以 content 动态呈现值无法获取。<a href="https://www.zhangxinxu.com/study/201412/css-counters-get-checked-number.html" target="_blank" rel="noopener noreferrer">获得.total 这个元素目前的数值是拿不到的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>css 计数器 ↔ 伪元素 ↔content 属性 <a href="https://mp.weixin.qq.com/s/SM76He2iHEcpSH8Nqd07gA" target="_blank" rel="noopener noreferrer">CSS 计数器用法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>实现 UI 效果：每行 li 前面有个点，使用<code>list-style-type</code>设置为<code>square</code>实心方块，可根据<code>text-indent</code>设置方块与 li 第一个字之间的距离</p></li></ul> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/list-style-type" target="_blank" rel="noopener noreferrer">list-style-type: 可以设置列表元素的 marker（比如圆点、符号、或者自定义计数器样式）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@counter-style" target="_blank" rel="noopener noreferrer">@counter-style: 自定义 counter 的样式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.zhangxinxu.com/wordpress/2021/10/css-counter-style/" target="_blank" rel="noopener noreferrer">张鑫旭：CSS @counter-style 规则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 设置如下样式给 ui li */</span>
<span class="token atrule"><span class="token rule">@counter-style</span> circled-alpha</span> <span class="token punctuation">{</span>
  <span class="token property">system</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">symbols</span><span class="token punctuation">:</span> Ⓐ Ⓑ Ⓒ Ⓓ Ⓔ Ⓕ Ⓖ Ⓗ Ⓘ Ⓙ Ⓚ Ⓛ Ⓜ Ⓝ Ⓞ Ⓟ Ⓠ Ⓡ Ⓢ Ⓣ Ⓤ Ⓥ Ⓦ Ⓧ Ⓨ Ⓩ<span class="token punctuation">;</span>
  <span class="token property">suffix</span><span class="token punctuation">:</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.items</span> <span class="token punctuation">{</span>
  <span class="token property">list-style-type</span><span class="token punctuation">:</span> circled-alpha<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 得到如下效果 */</span>
Ⓐ One
Ⓑ Two
Ⓒ Three
Ⓓ Four
Ⓔ FIve
....
...
Ⓨ Twenty Five
Ⓩ Twenty Six

27 Twenty Seven
28 Twenty Eight
29 Twenty Nine
30 Thirty
</code></pre></div><h2 id="_12"><a href="#_12" class="header-anchor">#</a> 12</h2> <p>npx 调用项目内部安装的模块，让项目内部安装的模块用起来更方便，不用在 scripts 内配置或者执行 .node-modules/.bin/mocha --version 之类的命令，也可以使用，如：npx package --version</p> <p><a href="https://mp.weixin.qq.com/s/VeepNN2518QASUmYoBWDqw" target="_blank" rel="noopener noreferrer">ts 高级<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_10"><a href="#_10" class="header-anchor">#</a> 10</h2> <p><a href="https://mp.weixin.qq.com/s/Uvi2r3a2KwXrPdNAkexqLg" target="_blank" rel="noopener noreferrer">vue 模版编译<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://caibaojian.com/vue-design/appendix/ast.html" target="_blank" rel="noopener noreferrer">vue 源码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.yuque.com/chengzishuo/dty0x8/dvw94r" target="_blank" rel="noopener noreferrer">with newFunction eval<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg3OTYwMjcxMA==&amp;action=getalbum&amp;album_id=1856066636768722949&amp;scene=173&amp;from_msgid=2247484642&amp;from_itemidx=1&amp;count=3&amp;nolastread=1#wechat_redirect" target="_blank" rel="noopener noreferrer">webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mp.weixin.qq.com/s/IxfbVPc8Nx_8x-C9g3eyMw" target="_blank" rel="noopener noreferrer">矩形树图<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://plantuml.com/zh/" target="_blank" rel="noopener noreferrer">语雀代码画图语法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="js"><a href="#js" class="header-anchor">#</a> js</h3> <p>js 数字分割符号：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myMoney <span class="token operator">=</span> <span class="token number">1_000_000_000_000</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myMoney<span class="token punctuation">)</span> <span class="token comment">// 1000000000000</span>
</code></pre></div><p><code>new Error().stack</code>调试：获取当前调用栈</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">firstFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">secondFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">secondFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">thridFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">thridFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stack<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">firstFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//=&gt; Error</span>
<span class="token comment">//  at thridFunction (&lt;anonymous&gt;:2:17)</span>
<span class="token comment">//  at secondFunction (&lt;anonymous&gt;:5:5)</span>
<span class="token comment">//  at firstFunction (&lt;anonymous&gt;:8:5)</span>
<span class="token comment">//  at &lt;anonymous&gt;:10:1</span>
</code></pre></div><p>生成随机字符串：Date.now().toString(36)</p> <p>生成随机字符串：Math.random().toString(36).slice(2)</p> <h3 id="node-js-在不同时间格式处理上的差异"><a href="#node-js-在不同时间格式处理上的差异" class="header-anchor">#</a> Node.js 在不同时间格式处理上的差异</h3> <ul><li>使用「补 0」形式的以 - 连接的日期字符串时，会认为传入的字符串是基于 UTC 时区的</li> <li>其他形式的会基于本地时区</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2021-10-01'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2021-10-1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2021/10/01'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2021/10/1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2021-10-01 00:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2021/10/01 00:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在 Node.js 中的执行结果为：</span>

<span class="token number">2021</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span>01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">.</span>000Z  <span class="token comment">// 与其他不同，比其它快 8 小时</span>
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>30T16<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">.</span>000Z
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>30T16<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">.</span>000Z
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>30T16<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">.</span>000Z
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>30T16<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">.</span>000Z
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>30T16<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">.</span>000Z
</code></pre></div><p>ISO 8601 的时间字符串定义了两种时间格式：</p> <ul><li>一种是 YYYY-MM-DD 格式的日期格式</li> <li>另外一种是 YYYY-MM-DDTHH:MM:DD 格式的日期+时间格式</li> <li>如果是日期格式，那么将会使用 UTC 时区 来解析该参数</li> <li>如果是时间+日期的格式，则将会被作为 本地时区 处理</li></ul> <p>ECMA262 定义的是：</p> <ul><li>如果输入字符串是符合 ISO 8601 格式的字符串，那各种 JavaScript 引擎的行为是固定的</li> <li>如果不符合，比如除了第一个例子之外的 case，那就是各个引擎各显神通了</li></ul> <h3 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> Tree-shaking</h3> <p><a href="https://mp.weixin.qq.com/s/iO3ASHjB0gIvcAjw8AqyXg" target="_blank" rel="noopener noreferrer">Tree-shaking<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Tree-shaking 可以使得项目最终构建（Bundle）结果中只包含你实际需要的代码：</p> <ul><li>Tree-shaking 是保留 Live Code。打包前处理好</li> <li>DCE(Dead Code Elimaion) 是消除 Dead Code。打完包再剔除</li></ul> <p>Rollup 官方上对 Tree-shaking 的介绍：Tree-shaking，也被称为 Live Code Inclusion，是指 Rollup 消除项目中实际未使用的代码的过程，它是一种 Dead Code Elimation 的方式，但是在输出方面会比其他方法更有效。该名称源自模块的抽象语法树（Abstract Sytanx Tree）。该算法首先会标记所有相关的语句，然后通过摇动语法树来删除所有的 Dead Code。它在思想上类似于 GC（Garbage Collection）中的标记清除算法。尽管，该算法不限于 ES Module，但它们使其效率更高，因为它允许 Rollup 将所有模块一起视为具有共享绑定的大抽象语法树。</p> <ul><li>1、利用 ES Module 可以进行静态分析的特点来检测模块内容的导出、导入以及被使用的情况，保留 Live Code</li> <li>2、消除不会被执行和没有副作用（Side Effect） 的 Dead Code，即 DCE 过程</li></ul> <h3 id="async-await"><a href="#async-await" class="header-anchor">#</a> async await</h3> <p>async await 其实就是 迭代函数——generator 函数 的语法糖</p> <ul><li>await 只能在 async 函数中使用，不然会报错</li> <li>async 函数返回的是一个状态为 fuifilled 的 Promise 对象，有无值看有无 return 值</li> <li>await 后面只有接了 Promise 才能实现排队效果</li> <li>async/await 作用是用同步方式，执行异步操作</li></ul> <p>generator 函数：yield 使用 Promise 且 + next 传参，实现 async/await【差 async】</p> <ul><li>多了一个星号*</li> <li>其内才可使用 yield，表暂停</li> <li>yield 后面接函数的话，会立即执行，且把函数的执行返回值当作此点的 value，那么当其接的函数是 promise 时候</li> <li>next 方法，可前进</li> <li>next 函数传参，yield 可接收</li> <li>next 方法执行后会返回一个对象，对象中有 value 和 done 两个属性
<ul><li>value：暂停点后面接的值，也就是 yield 后面接的值</li> <li>done：是否 generator 函数已走完，没走完为 false，走完为 true</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span>
  <span class="token keyword">yield</span> <span class="token number">2</span>
  <span class="token keyword">yield</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 2, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 3, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: undefined, done: true }</span>
<span class="token comment">// 最后的value是undefined，取决于你generator函数有无return返回值</span>
</code></pre></div><p>实现 async 功能：高阶函数，接收一个 generator 函数，并经过一系列处理，返回一个具有 async 函数功能的函数</p> <ul><li>async 函数的执行返回值是一个 Promise</li></ul> <p>最终：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// async await</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span> <span class="token comment">// 2</span>
  <span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span> <span class="token comment">// 4</span>
  <span class="token keyword">const</span> num3 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num3<span class="token punctuation">)</span> <span class="token comment">// 8</span>
  <span class="token keyword">return</span> num3
<span class="token punctuation">}</span>
<span class="token keyword">const</span> asyncRes <span class="token operator">=</span> <span class="token function">asyncFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>asyncRes<span class="token punctuation">)</span> <span class="token comment">// Promise</span>
asyncRes<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 8</span>

<span class="token comment">// generator</span>
<span class="token comment">// 1、generatorToAsync方法</span>
<span class="token keyword">function</span> <span class="token function">generatorToAsync</span><span class="token punctuation">(</span><span class="token parameter">generatorFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> gen <span class="token operator">=</span> <span class="token function">generatorFn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span> <span class="token comment">// gen有可能传参</span>

    <span class="token comment">// 返回一个Promise</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> res
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          res <span class="token operator">=</span> gen<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token comment">// 这里有可能会执行返回reject状态的Promise</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token comment">// 报错的话会走catch，直接reject</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 解构获得value和done</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> done <span class="token punctuation">}</span> <span class="token operator">=</span> res
        <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 如果done为true，说明走完了，进行resolve(value)</span>
          <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// 如果done为false，说明没走完，还得继续走</span>

          <span class="token comment">// value有可能是：常量，Promise，Promise有可能是成功或者失败</span>
          <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token string">'throw'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">go</span><span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">)</span> <span class="token comment">// 第一次执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// const asyncFn = generatorToAsync(gen)</span>
<span class="token comment">// asyncFn().then(res =&gt; console.log(res))</span>

<span class="token comment">// 2、调用</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span> <span class="token comment">// 2</span>
  <span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">fn</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span> <span class="token comment">// 4</span>
  <span class="token keyword">const</span> num3 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">fn</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num3<span class="token punctuation">)</span> <span class="token comment">// 8</span>
  <span class="token keyword">return</span> num3
<span class="token punctuation">}</span>

<span class="token keyword">const</span> genToAsync <span class="token operator">=</span> <span class="token function">generatorToAsync</span><span class="token punctuation">(</span>gen<span class="token punctuation">)</span>
<span class="token keyword">const</span> asyncRes <span class="token operator">=</span> <span class="token function">genToAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>asyncRes<span class="token punctuation">)</span> <span class="token comment">// Promise</span>
asyncRes<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 8</span>
</code></pre></div><h3 id="衡量性能优化的性能指标-lighthouse"><a href="#衡量性能优化的性能指标-lighthouse" class="header-anchor">#</a> 衡量性能优化的性能指标 Lighthouse</h3> <p><a href="https://mp.weixin.qq.com/s/mwgeuZbYGKn_I-7k41ZquQ" target="_blank" rel="noopener noreferrer">新时代的 Google Web Vitals 性能指标<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>1、需要观测的性能指标</p> <ul><li>First Paint(FP) 首次绘制：首次渲染的时间点，可以视为<code>白屏时间</code>，比如完成背景色渲染的时间点。通常作为时间点最早的一个性能指标。</li> <li>First Contentful Paint(FCP) 首次内容绘制：首次<code>有内容</code>渲染的<code>时间点</code>，指标测量页面从开始加载到页面内容的任何部分在屏幕上完成渲染的时间。对于该指标，&quot;内容&quot;指的是文本、图像、svg 元素或非白色的 canvas 元素。可以作为首屏时间</li> <li>Largest Contentful Paint (LCP) 最大内容绘制：页面的最大内容（通常是比较<code>核心的内容</code>）加载<code>完成</code>的<code>时间</code>，这个最大内容可以是图片/文本块。它是一个 SEO 相关的指标。</li> <li>First Input Delay(FID) 首次输入延迟：交互延迟时间。这个指标的触发是在用户第一次与页面交互的的时候，记录的是是用户第一次与页面交互到浏览器真正能够开始处理事件处理程序以响应该交互的时间，即<code>交互延迟时间</code>。比如发生在用户第一次在页面进行 click， keydown 等交互。发生输入延迟是因为浏览器的主线程正忙着执行其他工作（比如解析和执行大型 JS 文件），还不能响应用户。</li> <li>Cumulative Layout Shift(CLS) 累积布局偏移：在一个页面的生命周期中，会不断的发生布局变化（layout shift），对每一次布局变化做一个累积的记分，其中得分最大布局变化即为 CLS。是衡量页面稳定性的重要指标（visual stability）</li> <li>Time to Interactive(TTI) 可交互时间：从页面加载开始到页面处于完全可交互状态所花费的时间。通常是发生在页面依赖的资源已经加载完成，此时浏览器可以快速响应用户交互的时间。</li> <li>DOMContentLoaded：DOM 加载完成即触发，不用等页面资源加载。</li> <li>Load：页面及其依赖的资源全部加载完成的时间，包括所有的资源文件，如样式表和图片等。</li></ul> <p>2、性能指标相关的 API 及采集方式</p> <p>Performance Observer API 下包含一组性能监测相关的 API</p> <ul><li>Paint Timing API：收集 FP / FCP</li> <li>Largest Contentful Paint API：收集 LCP</li> <li>Event Timing API：收集 FID</li> <li>Navigation Timing API：收集 Load / DOMContentLoaded</li> <li>Layout Instability API：收集 CLS: 将加载过程分块（session），监听 layout-shift 变化获得每次布局变动的 value 值，统计每个 session 的布局变动分数，最大的布局变动分数时段，即为 CLS。<a href="https://github.com/GoogleChrome/web-vitals/blob/main/src/getCLS.ts" target="_blank" rel="noopener noreferrer">代码 demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Long Tasks API &amp; Resource Timing API：TTI 的采集依赖这两个 API</li> <li>MutationObserver API：收集 FMP：通过 MutationObserver 对 DOM 变化进行监听，每次回调根据新旧 DOM 数量、种类、深度等，计算出当前 DOM 树的分数，分数变化最剧烈的时刻视为 FMP ，Load 事件触发后 200ms 停止监听，取最大变动的记录做上报。</li></ul> <p>3、性能指标采集工具</p> <ul><li>Chrome DevTools</li> <li>Lighthouse</li> <li>web-vitals</li></ul> <h3 id="css-命名规范"><a href="#css-命名规范" class="header-anchor">#</a> CSS 命名规范</h3> <p>BEM【块（Block）、元素（Element**）、修饰符（Modifier--）】。如：block-name**element-name--modifier-name--modifier-value</p> <h3 id="chrome-中体验实验性特性"><a href="#chrome-中体验实验性特性" class="header-anchor">#</a> Chrome 中体验实验性特性</h3> <p>地址：chrome://flags/ 查看新特性</p> <p>url：chrome://flags/#side-panel 激活阅读列表</p> <p>url：chrome://whats-new/ 查看 Chrome 新变化（中文）</p> <ul><li><p><a href="https://mp.weixin.qq.com/s/CIuMVwBNX4fAZzuohH7nrg" target="_blank" rel="noopener noreferrer">16 个 CSS 新特性-上<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://mp.weixin.qq.com/s/ww_DOWfooA1sUxhF9ptfVw" target="_blank" rel="noopener noreferrer">16 个 CSS 新特性-下<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://mp.weixin.qq.com/s/ZyVIlX8OSZvN5zvBa8lmoQ" target="_blank" rel="noopener noreferrer">微前端<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://mp.weixin.qq.com/s/Q4gbnMKTs9Fsn53XhGmxhw" target="_blank" rel="noopener noreferrer">字节-微前端<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h3 id="weakmap-和-map-的区别-weakmap-原理-为什么能被-gc"><a href="#weakmap-和-map-的区别-weakmap-原理-为什么能被-gc" class="header-anchor">#</a> WeakMap 和 Map 的区别，WeakMap 原理，为什么能被 GC？</h3> <p>程序运行中会有一些垃圾数据不再使用，如果没正确及时释放，会导致内存泄露</p> <p>「垃圾回收器」（Garbage Collection，缩写为 GC）：JS 中的垃圾数据都是由其自动回收的，不需要手动释放。其监视所有对象：引用计数（对象循环引用会导致内存泄漏，低版本 IE 采用这个）、标记清除（看对象是否被引用）。详见：<a href="https://juejin.cn/post/6981588276356317214" target="_blank" rel="noopener noreferrer">垃圾回收<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://juejin.cn/post/6984188410659340324" target="_blank" rel="noopener noreferrer">内存泄漏<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>开发中，想要让垃圾回收器回收某一对象，就将对象的引用直接设置为 null 即可，但如果一个对象被多次引用时，例如作为另一对象的键、值或子元素时，将该对象引用设置为 null 时，该对象是不会被回收的，依然存在。当然作为 map 的 key 时，也是</p> <p>故，ES6 考虑到了这一点，推出了：WeakMap 。它对于值的引用都是不计入垃圾回收机制的，所以名字里面才会有一个&quot;Weak&quot;，表示这是弱引用（对对象的弱引用是指当该对象应该被 GC 回收时不会阻止 GC 的回收行为）。</p> <p>Map 相对于 WeakMap ：</p> <ul><li>Map 的键可以是任意类型，WeakMap 只接受对象作为键（null 除外），不接受其他类型的值作为键</li> <li>Map 的键实际上是跟内存地址绑定的，只要内存地址不一样，就视为两个键；WeakMap 的键是弱引用，键所指向的对象可以被垃圾回收，此时键是无效的</li> <li>Map 可以被遍历， WeakMap 不能被遍历</li> <li>WeakMap 对象是一组键值对的集合，其中的键是弱引用对象，而值可以是任意。</li> <li>WeakMap 弱引用的只是键名，而不是键值。键值依然是正常引用。</li> <li>WeakMap 中，每个键对自己所引用对象的引用都是弱引用，在没有其他引用和该键引用同一对象，这个对象将会被垃圾回收（相应的 key 则变成无效的），所以，WeakMap 的 key 是不可枚举的</li> <li>除了 WeakMap 还有 WeakSet 都是弱引用，可以被垃圾回收机制回收，可以用来保存 DOM 节点，不容易造成内存泄漏</li></ul> <p>判断 🌰：</p> <div class="language-js extra-class"><pre class="language-js"><code>Map时候
<span class="token comment">//map.js</span>
global<span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 每次查询内存都先执行gc()再memoryUsage()，是为了确保垃圾回收，保证获取的内存使用状态准确</span>

<span class="token keyword">function</span> <span class="token function">usedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> used <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapUsed<span class="token punctuation">;</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>used <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">&quot;M&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">usedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 初始状态，执行gc()和memoryUsage()以后，heapUsed 值为 1.64M</span>

<span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

global<span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">usedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 在 Map 中加入元素b，为一个 5*1024*1024 的数组后，heapUsed为41.82M左右</span>

b <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
global<span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">usedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3 将b置为空以后，heapUsed 仍为41.82M，说明Map中的那个长度为5*1024*1024的数组依然存在</span>

<span class="token comment">/* 执行 */</span>
node <span class="token operator">--</span>expose<span class="token operator">-</span>gc map<span class="token punctuation">.</span>js <span class="token comment">// --expose-gc 参数表示允许手动执行垃圾回收机制</span>

WeakMap时候
<span class="token comment">// weakmap.js</span>
<span class="token keyword">function</span> <span class="token function">usedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> used <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapUsed<span class="token punctuation">;</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>used <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">&quot;M&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

global<span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 每次查询内存都先执行gc()再memoryUsage()，是为了确保垃圾回收，保证获取的内存使用状态准确</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">usedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 初始状态，执行gc()和 memoryUsage()以后，heapUsed 值为 1.64M</span>
<span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

global<span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">usedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 在 Map 中加入元素b，为一个 5*1024*1024 的数组后，heapUsed为41.82M左右</span>

b <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
global<span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">usedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3 将b置为空以后，heapUsed 变成了1.82M左右，说明WeakMap中的那个长度为5*1024*1024的数组被销毁了</span>

<span class="token comment">/* 执行 */</span>
node <span class="token operator">--</span>expose<span class="token operator">-</span>gc weakmap<span class="token punctuation">.</span>js <span class="token comment">// --expose-gc 参数表示允许手动执行垃圾回收机制</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/foreverwaiting/easy-bookmark/edit/master/docs/daily/day202110.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/6/2021, 11:42:20 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/easy-bookmark/daily/day202109.html" class="prev">
        2021-09
      </a></span> <span class="next"><a href="/easy-bookmark/daily/day202111.html">
        2021-11
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/easy-bookmark/assets/js/app.98929521.js" defer></script><script src="/easy-bookmark/assets/js/2.6ed84ef8.js" defer></script><script src="/easy-bookmark/assets/js/24.a4781c35.js" defer></script>
  </body>
</html>
