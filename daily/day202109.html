<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2021-09 | easy bookmark</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/easy-bookmark/favicon.ico">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?d517a1ee1e75b0fd216b5183a8f32ac0";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();      
      </script>
    <meta name="description" content="ä¸ªäººæ”¶è—">
    
    <link rel="preload" href="/easy-bookmark/assets/css/0.styles.9b6bb25f.css" as="style"><link rel="preload" href="/easy-bookmark/assets/js/app.98929521.js" as="script"><link rel="preload" href="/easy-bookmark/assets/js/2.6ed84ef8.js" as="script"><link rel="preload" href="/easy-bookmark/assets/js/23.ffa9fcfd.js" as="script"><link rel="prefetch" href="/easy-bookmark/assets/js/10.59e2f598.js"><link rel="prefetch" href="/easy-bookmark/assets/js/11.9fc8a230.js"><link rel="prefetch" href="/easy-bookmark/assets/js/12.089b352b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/13.e2ac9449.js"><link rel="prefetch" href="/easy-bookmark/assets/js/14.a988d92c.js"><link rel="prefetch" href="/easy-bookmark/assets/js/15.ae6ad2bb.js"><link rel="prefetch" href="/easy-bookmark/assets/js/16.416459c2.js"><link rel="prefetch" href="/easy-bookmark/assets/js/17.3aa5cbce.js"><link rel="prefetch" href="/easy-bookmark/assets/js/18.b724b90f.js"><link rel="prefetch" href="/easy-bookmark/assets/js/19.cb360c51.js"><link rel="prefetch" href="/easy-bookmark/assets/js/20.469dd230.js"><link rel="prefetch" href="/easy-bookmark/assets/js/21.62b9147c.js"><link rel="prefetch" href="/easy-bookmark/assets/js/22.dabef7dd.js"><link rel="prefetch" href="/easy-bookmark/assets/js/24.a4781c35.js"><link rel="prefetch" href="/easy-bookmark/assets/js/25.79ef71a6.js"><link rel="prefetch" href="/easy-bookmark/assets/js/26.331c4dc5.js"><link rel="prefetch" href="/easy-bookmark/assets/js/27.5b1f1b94.js"><link rel="prefetch" href="/easy-bookmark/assets/js/28.37dd571e.js"><link rel="prefetch" href="/easy-bookmark/assets/js/29.580f58e7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/3.24a9cbfa.js"><link rel="prefetch" href="/easy-bookmark/assets/js/30.0630daa0.js"><link rel="prefetch" href="/easy-bookmark/assets/js/31.172b9e48.js"><link rel="prefetch" href="/easy-bookmark/assets/js/32.3c9adea6.js"><link rel="prefetch" href="/easy-bookmark/assets/js/33.5595eb88.js"><link rel="prefetch" href="/easy-bookmark/assets/js/34.931e4ffe.js"><link rel="prefetch" href="/easy-bookmark/assets/js/35.c06f071e.js"><link rel="prefetch" href="/easy-bookmark/assets/js/36.bc28c146.js"><link rel="prefetch" href="/easy-bookmark/assets/js/37.50b96313.js"><link rel="prefetch" href="/easy-bookmark/assets/js/38.61fdc3da.js"><link rel="prefetch" href="/easy-bookmark/assets/js/39.8e94008c.js"><link rel="prefetch" href="/easy-bookmark/assets/js/4.5591ca6b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/40.b9dd3fe7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/41.44f4e080.js"><link rel="prefetch" href="/easy-bookmark/assets/js/42.cf495ac2.js"><link rel="prefetch" href="/easy-bookmark/assets/js/43.96432862.js"><link rel="prefetch" href="/easy-bookmark/assets/js/44.28acc21b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/45.10534c91.js"><link rel="prefetch" href="/easy-bookmark/assets/js/46.6d79e8a6.js"><link rel="prefetch" href="/easy-bookmark/assets/js/47.a7759570.js"><link rel="prefetch" href="/easy-bookmark/assets/js/48.bc0667ab.js"><link rel="prefetch" href="/easy-bookmark/assets/js/49.c1ebffce.js"><link rel="prefetch" href="/easy-bookmark/assets/js/5.3de96ffc.js"><link rel="prefetch" href="/easy-bookmark/assets/js/50.a0f50760.js"><link rel="prefetch" href="/easy-bookmark/assets/js/51.52913321.js"><link rel="prefetch" href="/easy-bookmark/assets/js/52.b2c32e3a.js"><link rel="prefetch" href="/easy-bookmark/assets/js/53.cd133ce2.js"><link rel="prefetch" href="/easy-bookmark/assets/js/54.5becf481.js"><link rel="prefetch" href="/easy-bookmark/assets/js/55.3ec180c8.js"><link rel="prefetch" href="/easy-bookmark/assets/js/56.24bf3181.js"><link rel="prefetch" href="/easy-bookmark/assets/js/57.5edd1dc7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/58.697b6057.js"><link rel="prefetch" href="/easy-bookmark/assets/js/59.c422bbd3.js"><link rel="prefetch" href="/easy-bookmark/assets/js/6.010a5dd5.js"><link rel="prefetch" href="/easy-bookmark/assets/js/60.b44a3b13.js"><link rel="prefetch" href="/easy-bookmark/assets/js/61.36d0c1bd.js"><link rel="prefetch" href="/easy-bookmark/assets/js/62.e4917905.js"><link rel="prefetch" href="/easy-bookmark/assets/js/63.690191bf.js"><link rel="prefetch" href="/easy-bookmark/assets/js/64.e6e01d48.js"><link rel="prefetch" href="/easy-bookmark/assets/js/65.13387ea7.js"><link rel="prefetch" href="/easy-bookmark/assets/js/66.37c48ee9.js"><link rel="prefetch" href="/easy-bookmark/assets/js/67.fa7e4f5a.js"><link rel="prefetch" href="/easy-bookmark/assets/js/68.eb40d0ee.js"><link rel="prefetch" href="/easy-bookmark/assets/js/69.584d43ea.js"><link rel="prefetch" href="/easy-bookmark/assets/js/7.48552666.js"><link rel="prefetch" href="/easy-bookmark/assets/js/70.3abc29fb.js"><link rel="prefetch" href="/easy-bookmark/assets/js/71.e149adad.js"><link rel="prefetch" href="/easy-bookmark/assets/js/72.b73ecb17.js"><link rel="prefetch" href="/easy-bookmark/assets/js/73.9307c017.js"><link rel="prefetch" href="/easy-bookmark/assets/js/74.c1502fb4.js"><link rel="prefetch" href="/easy-bookmark/assets/js/75.69f4626b.js"><link rel="prefetch" href="/easy-bookmark/assets/js/76.c25802cb.js"><link rel="prefetch" href="/easy-bookmark/assets/js/77.a37efc00.js"><link rel="prefetch" href="/easy-bookmark/assets/js/8.a079a873.js"><link rel="prefetch" href="/easy-bookmark/assets/js/9.e1d2376d.js">
    <link rel="stylesheet" href="/easy-bookmark/assets/css/0.styles.9b6bb25f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/easy-bookmark/" class="home-link router-link-active"><img src="/easy-bookmark/logo.jpg" alt="easy bookmark" class="logo"> <span class="site-name can-hide">easy bookmark</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/easy-bookmark/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/easy-bookmark/blogs/" class="nav-link">
  åšå®¢
</a></div><div class="nav-item"><a href="/easy-bookmark/website/" class="nav-link">
  ç½‘ç«™
</a></div><div class="nav-item"><a href="/easy-bookmark/daily/" class="nav-link router-link-active">
  æ—¥å¸¸
</a></div><div class="nav-item"><a href="/easy-bookmark/front/" class="nav-link">
  å‰ç«¯
</a></div><div class="nav-item"><a href="/easy-bookmark/life/" class="nav-link">
  ç”Ÿæ´»
</a></div><div class="nav-item"><a href="https://foreverwaiting.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/foreverwaiting/easy-bookmark" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/easy-bookmark/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/easy-bookmark/blogs/" class="nav-link">
  åšå®¢
</a></div><div class="nav-item"><a href="/easy-bookmark/website/" class="nav-link">
  ç½‘ç«™
</a></div><div class="nav-item"><a href="/easy-bookmark/daily/" class="nav-link router-link-active">
  æ—¥å¸¸
</a></div><div class="nav-item"><a href="/easy-bookmark/front/" class="nav-link">
  å‰ç«¯
</a></div><div class="nav-item"><a href="/easy-bookmark/life/" class="nav-link">
  ç”Ÿæ´»
</a></div><div class="nav-item"><a href="https://foreverwaiting.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/foreverwaiting/easy-bookmark" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>æ—¥å¸¸</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/easy-bookmark/daily/" aria-current="page" class="sidebar-link">æ—¥å¤ä¸€æ—¥è¯¶</a></li><li><a href="/easy-bookmark/daily/day202109.html" aria-current="page" class="active sidebar-link">2021-09</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_27" class="sidebar-link">27</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ " class="sidebar-link">å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#promise-allsettled" class="sidebar-link">Promise.allSettled</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_25" class="sidebar-link">25</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#ç”Ÿæˆä»£ç æˆªå›¾" class="sidebar-link">ç”Ÿæˆä»£ç æˆªå›¾</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#vue3-0" class="sidebar-link">Vue3.0</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#sourcemap-ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§" class="sidebar-link">SourceMap ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_23" class="sidebar-link">23</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#vue3" class="sidebar-link">Vue3</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æµç¨‹å›¾ã€æ—¶åºå›¾ã€ç”˜ç‰¹å›¾" class="sidebar-link">æµç¨‹å›¾ã€æ—¶åºå›¾ã€ç”˜ç‰¹å›¾</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_22" class="sidebar-link">22</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æ”»å‡»" class="sidebar-link">æ”»å‡»</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#sourcemapã€npm-yarn" class="sidebar-link">SourceMapã€npm &amp; yarn</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#ä»å”¤ç«¯å‡ºå‘-å­¦ä¹ ç¬¬ä¸‰æ–¹-js" class="sidebar-link">ä»å”¤ç«¯å‡ºå‘ï¼Œå­¦ä¹ ç¬¬ä¸‰æ–¹ JS</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_21" class="sidebar-link">21</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æ–­ç‚¹ç»­ä¼ " class="sidebar-link">æ–­ç‚¹ç»­ä¼ </a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#react-çš„-setstate" class="sidebar-link">react çš„ setState</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#å‡ å¤§-js-æ¡†æ¶çš„è®¾è®¡æ€è·¯" class="sidebar-link">å‡ å¤§ JS æ¡†æ¶çš„è®¾è®¡æ€è·¯</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#ç¼–è¯‘æ—¶ä¼˜åŒ–" class="sidebar-link">ç¼–è¯‘æ—¶ä¼˜åŒ–ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æ­»ç£•è¿è¡Œæ—¶" class="sidebar-link">æ­»ç£•è¿è¡Œæ—¶</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æ‹¼éŸ³æœç´¢-è§åˆ†äº«" class="sidebar-link">æ‹¼éŸ³æœç´¢ï¼ˆè§åˆ†äº«ï¼‰</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_20" class="sidebar-link">20</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#service-worker" class="sidebar-link">Service Worker</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_19" class="sidebar-link">19</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æé€Ÿç‰ˆ" class="sidebar-link">æé€Ÿç‰ˆ</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#vue-react-åŒºåˆ«" class="sidebar-link">vue&amp;react åŒºåˆ«</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_18" class="sidebar-link">18</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æ‰«ç ç™»é™†" class="sidebar-link">æ‰«ç ç™»é™†</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#ts-å¦‚ä½•å·¥ä½œ" class="sidebar-link">ts å¦‚ä½•å·¥ä½œ</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_17" class="sidebar-link">17</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#é“¾å¼è°ƒç”¨" class="sidebar-link">é“¾å¼è°ƒç”¨</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨" class="sidebar-link">åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#é«˜é˜¶å‡½æ•°" class="sidebar-link">é«˜é˜¶å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æŸ¯é‡ŒåŒ–" class="sidebar-link">æŸ¯é‡ŒåŒ–</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æŠ€æœ¯è°ƒç ”" class="sidebar-link">æŠ€æœ¯è°ƒç ”</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_16" class="sidebar-link">16</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æ¸²æŸ“æ€§èƒ½" class="sidebar-link">æ¸²æŸ“æ€§èƒ½</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#é‡æ’ã€é‡ç»˜ã€åˆæˆ" class="sidebar-link">é‡æ’ã€é‡ç»˜ã€åˆæˆ</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#tab-è‡ªåŠ¨å¸é¡¶å¤šæ»šåŠ¨å®¹å™¨" class="sidebar-link">tab è‡ªåŠ¨å¸é¡¶å¤šæ»šåŠ¨å®¹å™¨</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#h5" class="sidebar-link">H5:</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_15" class="sidebar-link">15</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#é˜²ç›—é“¾" class="sidebar-link">é˜²ç›—é“¾</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#css-content-visibility-é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–" class="sidebar-link">CSS: content-visibility(é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–)</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_14" class="sidebar-link">14</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#withã€evalã€newfunctionã€å¼‚å¸¸ç›‘æ§" class="sidebar-link">withã€evalã€newFunctionã€å¼‚å¸¸ç›‘æ§</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_13" class="sidebar-link">13</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#monaco-editor-çš„æ ¸å¿ƒåŠŸèƒ½ä¸ç»„ä»¶" class="sidebar-link">Monaco Editor çš„æ ¸å¿ƒåŠŸèƒ½ä¸ç»„ä»¶ï¼š</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#chrome-89-æ–°åŠŸèƒ½-å¤§é‡-devtools-æ–°ç‰¹æ€§" class="sidebar-link">Chrome 89 æ–°åŠŸèƒ½(å¤§é‡ DevTools æ–°ç‰¹æ€§)</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_12" class="sidebar-link">12</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#å‰ç«¯å¼‚å¸¸" class="sidebar-link">å‰ç«¯å¼‚å¸¸</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_11" class="sidebar-link">11</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#å‘½ä»¤" class="sidebar-link">å‘½ä»¤</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#github-actions" class="sidebar-link">Github Actions</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_08" class="sidebar-link">08</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#git-æäº¤è§„èŒƒ-cz-å·¥å…·" class="sidebar-link">git æäº¤è§„èŒƒ[cz å·¥å…·]</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#eslint-é…ç½®ã€‚ä»£ç æ ¼å¼è§„åˆ™-å’Œ-è´¨é‡è§„åˆ™" class="sidebar-link">ESLint é…ç½®ã€‚ä»£ç æ ¼å¼è§„åˆ™ å’Œ è´¨é‡è§„åˆ™</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#prettier-ä»£ç æ ¼å¼è§„åˆ™" class="sidebar-link">Prettier ä»£ç æ ¼å¼è§„åˆ™</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#lint-staged" class="sidebar-link">Lint Staged</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#npm-script-hook" class="sidebar-link">Npm Script Hook</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#æ–‡ç« " class="sidebar-link">æ–‡ç« </a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_07" class="sidebar-link">07</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#rpc" class="sidebar-link">RPC</a></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#css-ä¼ªç±»" class="sidebar-link">css ä¼ªç±»</a></li></ul></li><li class="sidebar-sub-header"><a href="/easy-bookmark/daily/day202109.html#_06" class="sidebar-link">06</a></li></ul></li><li><a href="/easy-bookmark/daily/day202110.html" class="sidebar-link">2021-10</a></li><li><a href="/easy-bookmark/daily/day202111.html" class="sidebar-link">2021-11</a></li><li><a href="/easy-bookmark/daily/day202112.html" class="sidebar-link">2021-12</a></li><li><a href="/easy-bookmark/daily/day202201.html" class="sidebar-link">2022-01</a></li><li><a href="/easy-bookmark/daily/day202208.html" class="sidebar-link">2022-08</a></li><li><a href="/easy-bookmark/daily/day202209.html" class="sidebar-link">2022-09</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2021-09"><a href="#_2021-09" class="header-anchor">#</a> 2021-09</h1> <h2 id="_27"><a href="#_27" class="header-anchor">#</a> 27</h2> <h3 id="å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ "><a href="#å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ " class="header-anchor">#</a> å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </h3> <ul><li><a href="https://mp.weixin.qq.com/s/b1_6xlBxPmfQOMCtXiIlkw" target="_blank" rel="noopener noreferrer">åœ¨é¡¹ç›®ä¸­å®ç°å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ï¼Œæš‚åœç»­ä¼ çš„<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="promise-allsettled"><a href="#promise-allsettled" class="header-anchor">#</a> Promise.allSettled</h3> <ul><li><a href="https://mp.weixin.qq.com/s/xmFvgkmm1OdydLU6ingnWw" target="_blank" rel="noopener noreferrer">Promise.allSettled çš„ä½œç”¨ï¼Œå¦‚ä½•è‡ªå·±å®ç°ä¸€ä¸ª Promise.allSettled<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_25"><a href="#_25" class="header-anchor">#</a> 25</h2> <h3 id="ç”Ÿæˆä»£ç æˆªå›¾"><a href="#ç”Ÿæˆä»£ç æˆªå›¾" class="header-anchor">#</a> ç”Ÿæˆä»£ç æˆªå›¾</h3> <ul><li>ä»£ç æˆªå›¾å·¥å…·ï¼šhttps://carbon.now.sh</li></ul> <h3 id="vue3-0"><a href="#vue3-0" class="header-anchor">#</a> Vue3.0</h3> <p>https://mp.weixin.qq.com/s/l9MyfE4sMJTbsOsboYdvIQ</p> <h4 id="ä¸€ã€composition-api"><a href="#ä¸€ã€composition-api" class="header-anchor">#</a> ä¸€ã€Composition APIï¼š</h4> <p>vue2 çš„çš„ç—›ç‚¹ä¹‹ä¸€ï¼Œè¦åœ¨ dataã€methodsã€computed ä»¥åŠ mounted ä¸­åå¤çš„è·³è½¬ï¼Œè™½ç„¶å¯ç”¨ Mixin è§£å†³ï¼Œä½†ä¼šæœ‰å‘½åå†²çªç­‰é—®é¢˜ï¼Œæ‰€ä»¥ vue3 çš„ Composition API åº”è¿è€Œç”Ÿã€‚å°†é›¶æ•£åˆ†å¸ƒçš„é€»è¾‘ç»„åˆåœ¨ä¸€èµ·æ¥ç»´æŠ¤ï¼Œå¹¶ä¸”è¿˜å¯ä»¥å°†å•ç‹¬çš„åŠŸèƒ½é€»è¾‘æ‹†åˆ†æˆå•ç‹¬çš„æ–‡ä»¶ã€‚</p> <ul><li>Composition APIï¼š
<ul><li>reactive</li> <li>ref</li> <li>toRefs</li> <li>watch</li> <li>watchEffect</li> <li>computed</li> <li>ç”Ÿå‘½å‘¨æœŸé’©å­</li></ul></li></ul> <p>1ã€setupï¼š</p> <ul><li>ç»„ä»¶å†…ä½¿ç”¨ Composition API çš„å…¥å£ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨<code>beforeCreateä¹‹å‰</code>ï¼Œæ•…<code>ä¸å¯è®¿é—®this</code></li> <li>setup(props, context) {}ï¼Œä¸¤ä¸ªå‚æ•°ï¼š
<ul><li>propsï¼šç»„ä»¶ä¼ å…¥çš„å±æ€§ï¼Œå“åº”å¼çš„ï¼Œä¼ å…¥æ–°çš„ props ä¼šæ›´æ–°ï¼Œä½†ç”±äºæ˜¯å“åº”å¼çš„ï¼Œ æ‰€ä»¥ä¸å¯ä»¥ä½¿ç”¨ ES6 è§£æ„ï¼Œè§£æ„ä¼šæ¶ˆé™¤å®ƒçš„å“åº”å¼ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">,</span>toRefs<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// å¦‚ä¸‹ä¼šæ¶ˆé™¤nameçš„å“åº”å¼ï¼š</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>*ã€æƒ³è¦ä½¿ç”¨è§£æ„ï¼Œè¿˜èƒ½ä¿æŒ props çš„å“åº”å¼ï¼štoRefsã€‘
<ul><li>contextï¼šcontext ä¸­æä¾›äº† this ä¸­æœ€å¸¸ç”¨çš„ä¸‰ä¸ªå±æ€§ï¼šattrsã€slot å’Œ emitï¼Œåˆ†åˆ«å¯¹åº” Vue2.x ä¸­çš„ $attrå±æ€§ã€slotæ’æ§½ å’Œ$emit å‘å°„äº‹ä»¶ã€‚å¹¶ä¸”è¿™å‡ ä¸ªå±æ€§éƒ½æ˜¯è‡ªåŠ¨åŒæ­¥æœ€æ–°çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡ä½¿ç”¨æ‹¿åˆ°çš„éƒ½æ˜¯æœ€æ–°å€¼ã€‚</li></ul></li></ul> <p>2ã€reactiveã€ref ä¸ toRefsï¼š</p> <ul><li>vue2 ä¸­æ•°ç»„å®šä¹‰åœ¨ dataï¼Œ3 ä½¿ç”¨ reactive å’Œ ref å®šä¹‰æ•°æ®
<ul><li>å¦‚ä¸‹ï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">,</span>toRefs<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// refå¯å®šä¹‰æ•°æ®</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> year <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// reactiveå¯ä»¥ä»£ç†ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ä¸èƒ½ä»£ç†åŸºæœ¬ç±»å‹</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">'ç”·'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>toRefsï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">,</span>toRefs<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å½“åœ¨htmlä¸­ä½¿ç”¨æ—¶å¿…é¡» obj.name ï¼Œè¾ƒä¸ºç¹çï¼Œä½†è§£æ„å¯¹è±¡åˆå›æ¶ˆé™¤å“åº”å¼ï¼Œæ•…å¯ç”¨ï¼š</span>

  <span class="token comment">// toRefsç”¨äºå°†ä¸€ä¸ªreactiveå¯¹è±¡è½¬åŒ–ä¸ºå±æ€§å…¨éƒ¨ä¸ºrefå¯¹è±¡çš„æ™®é€šå¯¹è±¡</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä½¿ç”¨reRefs</span>
    <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>3ã€ç”Ÿå‘½å‘¨æœŸé’©å­</p> <ul><li><p>æ–°å¢äº† setup ç”Ÿå‘½å‘¨æœŸï¼Œå°† Vue2.x ä¸­çš„ beforeDestroy åç§°å˜æ›´æˆ beforeUnmount; destroyed è¡¨æ›´ä¸º unmounted</p></li> <li><p>beforeCreate å’Œ created è¢« setup æ›¿æ¢äº†ï¼ˆä½†æ˜¯ Vue3 ä¸­ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼Œ å› ä¸º Vue3 æ˜¯å‘ä¸‹å…¼å®¹çš„ï¼Œ ä¹Ÿå°±æ˜¯ä½ å®é™…ä½¿ç”¨çš„æ˜¯ vue2 çš„ï¼‰ã€‚å…¶æ¬¡ï¼Œé’©å­å‘½åéƒ½å¢åŠ äº† on; Vue3.x è¿˜æ–°å¢ç”¨äºè°ƒè¯•çš„é’©å­å‡½æ•° onRenderTriggered å’Œ onRenderTricked</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// é’©å­éœ€è¦å¯¼å…¥</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  defineComponent<span class="token punctuation">,</span>
  onBeforeMount<span class="token punctuation">,</span>
  onMounted<span class="token punctuation">,</span>
  onBeforeUpdate<span class="token punctuation">,</span>
  onUpdated<span class="token punctuation">,</span>
  onBeforeUnmount<span class="token punctuation">,</span>
  onUnmounted<span class="token punctuation">,</span>
  onErrorCaptured<span class="token punctuation">,</span>
  onRenderTracked<span class="token punctuation">,</span>
  onRenderTriggered
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
</code></pre></div><p>4ã€watch ä¸ watchEffect çš„ç”¨æ³•</p> <div class="custom-block tip"><p class="custom-block-title">watch</p> <p>watch å‡½æ•°ç”¨æ¥ä¾¦å¬ç‰¹å®šçš„æ•°æ®æºï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œå‰¯ä½œç”¨ã€‚é»˜è®¤æƒ…å†µæ˜¯æƒ°æ€§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä»…åœ¨ä¾¦å¬çš„æºæ•°æ®å˜æ›´æ—¶æ‰æ‰§è¡Œå›è°ƒã€‚
watch(source, callback, [options])</p></div> <ul><li>source:å¯ä»¥æ”¯æŒ string,Object,Function,<code>Array</code>; ç”¨äºæŒ‡å®šè¦ä¾¦å¬çš„å“åº”å¼å˜é‡</li> <li>callback: æ‰§è¡Œçš„å›è°ƒå‡½æ•°</li> <li>optionsï¼šæ”¯æŒ deepã€immediate å’Œ flush é€‰é¡¹ã€‚</li></ul> <p>ğŸŒ°ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> toRefs<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1ã€ç›‘å¬reactive</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">nickname</span><span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>age<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">curAge<span class="token punctuation">,</span> preAge</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–°å€¼:'</span><span class="token punctuation">,</span> curAge<span class="token punctuation">,</span> <span class="token string">'è€å€¼:'</span><span class="token punctuation">,</span> preAge<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// 2ã€ç›‘å¬ref</span>
    <span class="token keyword">const</span> year <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–°å€¼:'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">,</span> <span class="token string">'è€å€¼:'</span><span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 3ã€ç›‘å¬å¤šä¸ªã€‚sourceä¸ºæ•°ç»„</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>age<span class="token punctuation">,</span> year<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>curAge<span class="token punctuation">,</span> preAge<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–°å€¼:'</span><span class="token punctuation">,</span> curAge<span class="token punctuation">,</span> <span class="token string">'è€å€¼:'</span><span class="token punctuation">,</span> preAge<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–°å€¼:'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">,</span> <span class="token string">'è€å€¼:'</span><span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 4ã€å¤æ‚çš„åµŒå¥—å¯¹è±¡ã€‚ä½¿ç”¨deep:true</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">room</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">'140å¹³æ–¹ç±³'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'ä¸‰å®¤ä¸¤å…'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>room<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">newType<span class="token punctuation">,</span> oldType</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–°å€¼:'</span><span class="token punctuation">,</span> newType<span class="token punctuation">,</span> <span class="token string">'è€å€¼:'</span><span class="token punctuation">,</span> oldType<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// 5ã€é»˜è®¤æƒ°æ€§çš„ï¼Œéœ€è¦ç«‹å³æ‰§è¡Œå›è°ƒï¼šimmediate: trueå³å¯</span>

    <span class="token comment">// 6ã€é»˜è®¤ç»„ä»¶é”€æ¯ä¼šåœæ­¢ç›‘å¬ï¼Œè‹¥éœ€è¦è‡ªå·±æ§åˆ¶ï¼šä½¿ç”¨watchçš„è¿”å›å€¼</span>
    <span class="token keyword">const</span> stopWatchRoom <span class="token operator">=</span> <span class="token function">watch</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>room<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">newType<span class="token punctuation">,</span> oldType</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–°å€¼:'</span><span class="token punctuation">,</span> newType<span class="token punctuation">,</span> <span class="token string">'è€å€¼:'</span><span class="token punctuation">,</span> oldType<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// åœæ­¢ç›‘å¬</span>
      <span class="token function">stopWatchRoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">watchEffect</p> <p>watchEffect ä¼šè‡ªåŠ¨æ”¶é›†ä¾èµ–, åªè¦æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œ ä¼šå…ˆæ‰§è¡Œä¸€æ¬¡æ¥æ”¶é›†ä¾èµ–ï¼Œ ç„¶åå½“æ”¶é›†åˆ°çš„ä¾èµ–ä¸­æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ å°±ä¼šå†æ¬¡æ‰§è¡Œå›è°ƒå‡½æ•°</p></div> <ul><li>watchEffect ä¸éœ€è¦æ‰‹åŠ¨ä¼ å…¥ä¾èµ–</li> <li>watchEffect ä¼šå…ˆæ‰§è¡Œä¸€æ¬¡ç”¨æ¥è‡ªåŠ¨æ”¶é›†ä¾èµ–</li> <li>watchEffect æ— æ³•è·å–åˆ°å˜åŒ–å‰çš„å€¼ï¼Œ åªèƒ½è·å–å˜åŒ–åçš„å€¼</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="äºŒã€è‡ªå®šä¹‰-hooks"><a href="#äºŒã€è‡ªå®šä¹‰-hooks" class="header-anchor">#</a> äºŒã€è‡ªå®šä¹‰ Hooks</h4> <p>èšåˆé€»è¾‘ä¸º Hooks</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1ã€make Hooks</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

type CountResultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">multiple</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">increase</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">delta<span class="token operator">?</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
  <span class="token function-variable function">decrease</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">delta<span class="token operator">?</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">useCount</span><span class="token punctuation">(</span><span class="token parameter">initValue <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span><span class="token operator">:</span> CountResultProps <span class="token punctuation">{</span>
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>initValue<span class="token punctuation">)</span>

  <span class="token keyword">const</span> increase <span class="token operator">=</span> <span class="token punctuation">(</span>delta<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> delta <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">.</span>value <span class="token operator">+=</span> delta
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> multiple <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> decrease <span class="token operator">=</span> <span class="token punctuation">(</span>delta<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> delta <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">.</span>value <span class="token operator">-=</span> delta
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">.</span>value <span class="token operator">-=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">,</span>
    multiple<span class="token punctuation">,</span>
    increase<span class="token punctuation">,</span>
    decrease
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 2ã€use Hooks --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> useCount <span class="token keyword">from</span> <span class="token string">&quot;../hooks/useCount&quot;</span><span class="token punctuation">;</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> multiple<span class="token punctuation">,</span> increase<span class="token punctuation">,</span> decrease <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCount</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">,</span>
        multiple<span class="token punctuation">,</span>
        increase<span class="token punctuation">,</span>
        decrease<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="ä¸‰ã€vue3-x-å°†ä½¿ç”¨-proxy-å–ä»£-vue2-x-ç‰ˆæœ¬çš„-object-defineproperty"><a href="#ä¸‰ã€vue3-x-å°†ä½¿ç”¨-proxy-å–ä»£-vue2-x-ç‰ˆæœ¬çš„-object-defineproperty" class="header-anchor">#</a> ä¸‰ã€Vue3.x å°†ä½¿ç”¨ Proxy å–ä»£ Vue2.x ç‰ˆæœ¬çš„ Object.defineProperty</h4> <ul><li>Object.defineProperty åªèƒ½åŠ«æŒå¯¹è±¡çš„å±æ€§ï¼Œ è€Œ Proxy æ˜¯ç›´æ¥ä»£ç†å¯¹è±¡</li></ul> <p>ç”±äº Object.defineProperty åªèƒ½åŠ«æŒå¯¹è±¡å±æ€§ï¼Œéœ€è¦éå†å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœå±æ€§å€¼ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå°±éœ€è¦é€’å½’è¿›è¡Œæ·±åº¦éå†ã€‚ä½†æ˜¯ Proxy ç›´æ¥ä»£ç†å¯¹è±¡ï¼Œ ä¸éœ€è¦éå†æ“ä½œ</p> <ul><li>Object.defineProperty å¯¹æ–°å¢å±æ€§éœ€è¦æ‰‹åŠ¨è¿›è¡Œ Observe</li></ul> <p>å› ä¸º Object.defineProperty åŠ«æŒçš„æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œæ‰€ä»¥æ–°å¢å±æ€§æ—¶ï¼Œéœ€è¦é‡æ–°éå†å¯¹è±¡ï¼Œ å¯¹å…¶æ–°å¢å±æ€§å†æ¬¡ä½¿ç”¨ Object.defineProperty è¿›è¡ŒåŠ«æŒã€‚ä¹Ÿå°±æ˜¯ Vue2.x ä¸­ç»™æ•°ç»„å’Œå¯¹è±¡æ–°å¢å±æ€§æ—¶ï¼Œéœ€è¦ä½¿ç”¨$setæ‰èƒ½ä¿è¯æ–°å¢çš„å±æ€§ä¹Ÿæ˜¯å“åº”å¼çš„, $set å†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨ Object.defineProperty å»å¤„ç†çš„ã€‚</p> <h4 id="å››ã€teleport-ä¼ é€"><a href="#å››ã€teleport-ä¼ é€" class="header-anchor">#</a> å››ã€Teleport ä¼ é€</h4> <p>å¸Œæœ›ç»§ç»­åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ Dialog(å¯ä»¥ä½¿ç”¨åˆ° Vue ç»„ä»¶å†…çš„çŠ¶æ€ï¼ˆdata æˆ–è€… propsï¼‰çš„å€¼),åˆå¸Œæœ›æ¸²æŸ“çš„ DOM ç»“æ„ä¸åµŒå¥—åœ¨ç»„ä»¶çš„ DOM ä¸­ï¼š</p> <ul><li><p>ç”¨<code>&lt;Teleport&gt;</code>åŒ…è£¹ Dialog, æ­¤æ—¶å°±å»ºç«‹äº†ä¸€ä¸ªä¼ é€é—¨ï¼Œå¯ä»¥å°† Dialog æ¸²æŸ“çš„å†…å®¹ä¼ é€åˆ°ä»»ä½•æŒ‡å®šçš„åœ°æ–¹</p></li> <li><p>å¦‚ï¼š</p></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 1ã€åœ¨å…¨å±€æ ¹èŠ‚ç‚¹å¢åŠ  dialog DOM  --&gt;</span>
<span class="token comment">&lt;!-- å¦‚åœ¨index.html ã€‚ä¸€èˆ¬åœ¨ App.vue å†… --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 2ã€å®šä¹‰ä¸€ä¸ªDialogç»„ä»¶Dialog.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- to çš„ id ä¸ 1 ä¸­çš„idä¸€è‡´ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#dialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- ä¸€äº›å†…å®¹... --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 3ã€åœ¨æŸç»„ä»¶ä¸­ä½¿ç”¨ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- &lt;navbar /&gt;ç­‰ä¸€äº›å†…å®¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 4ã€æœ€ç»ˆDOMç»“æ„ä¸º --&gt;</span>
<span class="token comment">&lt;!-- ä½¿ç”¨ teleport ç»„ä»¶ï¼Œé€šè¿‡ to å±æ€§ï¼ŒæŒ‡å®šè¯¥ç»„ä»¶æ¸²æŸ“çš„ä½ç½®ä¸ &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; åŒçº§ï¼Œä¹Ÿå°±æ˜¯åœ¨ body ä¸‹ï¼Œä½†æ˜¯ Dialog çš„çŠ¶æ€ dialogVisible åˆæ˜¯å®Œå…¨ç”±å†…éƒ¨ Vue ç»„ä»¶æ§åˆ¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="äº”ã€suspense-å¼‚æ­¥æ¸²æŸ“"><a href="#äº”ã€suspense-å¼‚æ­¥æ¸²æŸ“" class="header-anchor">#</a> äº”ã€Suspense å¼‚æ­¥æ¸²æŸ“</h4> <p>Suspense åªæ˜¯ä¸€ä¸ªå¸¦æ’æ§½çš„ç»„ä»¶ï¼Œåªæ˜¯å®ƒçš„æ’æ§½æŒ‡å®šäº† default å’Œ fallback ä¸¤ç§çŠ¶æ€</p> <p>Vue3.x æ–°å‡ºçš„<code>å†…ç½®ç»„ä»¶Suspense</code>, å®ƒæä¾›ä¸¤ä¸ª<code>template slot</code>, åˆš<code>å¼€å§‹</code>ä¼š<code>æ¸²æŸ“</code>ä¸€ä¸ª<code>fallbackçŠ¶æ€</code>ä¸‹çš„å†…å®¹ï¼Œ ç›´åˆ°åˆ°è¾¾<code>æŸä¸ªæ¡ä»¶å</code>æ‰ä¼š<code>æ¸²æŸ“defaultçŠ¶æ€</code>çš„æ­£å¼<code>å†…å®¹</code>ï¼Œ é€šè¿‡ä½¿ç”¨ Suspense ç»„ä»¶è¿›è¡Œå±•ç¤º<code>å¼‚æ­¥æ¸²æŸ“</code>å°±æ›´åŠ çš„ç®€å•ã€‚</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- default: æœ€ç»ˆæ­£å¼ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>async-component</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>async-component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- fallback: ä¸€å¼€å§‹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      Loading...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="å…­ã€ç‰‡æ®µ-fragment"><a href="#å…­ã€ç‰‡æ®µ-fragment" class="header-anchor">#</a> å…­ã€ç‰‡æ®µï¼ˆFragmentï¼‰</h4> <ul><li>åœ¨ Vue2.x ä¸­ï¼Œ template ä¸­åªå…è®¸æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹</li> <li>åœ¨ Vue3.x ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥å†™å¤šä¸ªæ ¹èŠ‚ç‚¹</li></ul> <h4 id="ä¸ƒã€slot-å…·åæ’æ§½è¯­æ³•"><a href="#ä¸ƒã€slot-å…·åæ’æ§½è¯­æ³•" class="header-anchor">#</a> ä¸ƒã€slot å…·åæ’æ§½è¯­æ³•</h4> <ul><li>vue2: å…·åæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½åˆ†åˆ«ä½¿ç”¨ slot å’Œ slot-scope æ¥å®ç°</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 1ã€å…·åæ’æ§½ï¼ˆå¸¦åå­—ï¼‰</span>
<span class="token comment">// å­ï¼š</span>
<span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token comment">// çˆ¶:</span>
<span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>æ­Œæ›²ï¼šæˆéƒ½<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

<span class="token comment">// 2ã€ä½œç”¨åŸŸæ’æ§½ï¼ˆä¼ æ•°æ®ï¼‰</span>
<span class="token comment">// å­ï¼š</span>
<span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;content&quot;</span> <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">&quot;data&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">{</span>
      data<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;èµ°è¿‡æ¥äººæ¥äººå¾€&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ä¸å–œæ¬¢ä¹Ÿå¾—æ¬£èµ&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;é™ªä¼´æ˜¯æœ€é•¿æƒ…çš„å‘Šç™½&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// çˆ¶ï¼š</span>
<span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">&quot;content&quot;</span> slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">&quot;scoped&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in scoped.data&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
</code></pre></div><ul><li>vue3: å°† slot å’Œ slot-scope è¿›è¡Œäº†åˆå¹¶åŒæ„ä½¿ç”¨</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// å­ï¼š</span>
<span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;content&quot;</span> <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">&quot;data&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">{</span>
      data<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;èµ°è¿‡æ¥äººæ¥äººå¾€&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ä¸å–œæ¬¢ä¹Ÿå¾—æ¬£èµ&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;é™ªä¼´æ˜¯æœ€é•¿æƒ…çš„å‘Šç™½&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// çˆ¶ï¼š</span>
<span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span>content<span class="token operator">=</span><span class="token string">&quot;scoped&quot;</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in scoped.data&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token comment">// çˆ¶ï¼šæˆ–ç®€å†™ #content=&quot;{data}&quot;</span>
<span class="token operator">&lt;</span>template #content<span class="token operator">=</span><span class="token string">&quot;{data}&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in data&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre></div><ul><li><a href="https://mp.weixin.qq.com/s/y6C4R04mpvBmyV80p5WOug" target="_blank" rel="noopener noreferrer">ts ç³»åˆ—<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s/y6C4R04mpvBmyV80p5WOug" target="_blank" rel="noopener noreferrer">SourceMap ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/26033573" target="_blank" rel="noopener noreferrer">SourceMap è·å–æºç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/mozilla/source-map" target="_blank" rel="noopener noreferrer">mozilla:source-map<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html" target="_blank" rel="noopener noreferrer">é˜®ä¸€å³°ï¼šJavaScript Source Map è¯¦è§£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="sourcemap-ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§"><a href="#sourcemap-ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§" class="header-anchor">#</a> SourceMap ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§</h3> <p>1ã€ä»£ç åè§£</p> <p>ç„¶åæ¯æ¬¡æŠŠ SourceMap ä¹Ÿä¸Šä¼ ä¸€ä»½ç»™ ç›‘æ§ï¼Œçº¿ä¸Šé‡åˆ°é”™è¯¯å°†é”™è¯¯ä¸Šä¼ ç»™ ç›‘æ§ Serverï¼Œç›‘æ§ Server åŸºäºé”™è¯¯å †æ ˆå’Œ SourceMap åè§£å‡ºåŸå§‹çš„å †æ ˆå°±å¯ä»¥äº†ã€‚æ˜¯çš„ï¼Œç›‘æ§ç³»ç»Ÿè¦è§£å†³çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜å°±æ˜¯ä»£ç åè§£</p> <p>å‡ºäºä¸€äº›æ€§èƒ½å’Œå®‰å…¨ç­‰çš„è€ƒè™‘ï¼Œé€šå¸¸æˆ‘ä»¬å‘å¸ƒåˆ°çº¿ä¸Šçš„ä»£ç ï¼Œé€šå¸¸å¹¶éåŸå§‹çš„ä»£ç ï¼Œè€Œæ˜¯ç»è¿‡æ··æ·†å‹ç¼©åçš„ä»£ç ï¼Œå³ä½¿ä¸ç»è¿‡å‹ç¼©ï¼Œå¤§éƒ¨åˆ†çš„å‰ç«¯å·¥ç¨‹éƒ½ä¼šç»è¿‡ä¸€ä¸ª build çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹é‡Œé€šå¸¸ä¼šåŒ…æ‹¬ä»£ç çš„è½¬æ¢ã€æ‰“åŒ…å’Œå‹ç¼©ç­‰ï¼Œè¿™ä½¿å¾—è°ƒè¯•ç”Ÿæˆçš„ä»£ç å˜å¾—å¼‚å¸¸å›°éš¾ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå·¥å…·å¸®æˆ‘ä»¬è§£å†³è¿™ç±»è°ƒè¯•é—®é¢˜ã€‚</p> <p>2ã€SourceMap</p> <p>ç¼–è¯‘çš„æ—¶å€™é™¤äº†ç”Ÿæˆæœ€ç»ˆäº§ç‰© xxx.js æ–‡ä»¶å¤–è¿˜ä¼šé¢å¤–ç”Ÿæˆä¸€ä¸ª xxx.js.map çš„æ–‡ä»¶ï¼Œè¿™ä¸ª map æ–‡ä»¶é‡ŒåŒ…å«äº†<code>åŸå§‹ä»£ç åŠå…¶ä½ç½®æ˜ å°„ä¿¡æ¯</code>ï¼Œè¿™æ ·æˆ‘ä»¬åˆ©ç”¨ xxx.js å’Œ xxx.js.map å°±å¯ä»¥å°† xxx.js çš„ä»£ç åŠå…¶ä½ç½®å®Œç¾çš„æ˜ å°„ä¼šæºä»£ç ä»¥åŠä½ç½®ï¼Œè¿™æ ·æˆ‘ä»¬çš„è°ƒè¯•å·¥å…·å°±å¯ä»¥åŸºäºè¿™ä¸ª map æ–‡ä»¶å®ç°æºç è°ƒè¯•äº†ã€‚</p> <ul><li>transformer: Babelã€typescriptã€emscriptenã€esbuildã€ã€‘</li> <li>minifier å‹ç¼©æ··æ·†: esbuild ,terser</li> <li>bundler æ‰“åŒ…: esbuild, webpack, rollupã€æ‰“åŒ…æ—¶ä¹Ÿéœ€é…ç½®ç”Ÿæˆ SourceMapã€‘</li> <li>runtime å¼€å‘è°ƒè¯•: browser &amp; node &amp; denoã€ç”¨çš„æµè§ˆå™¨çš„ SourceMap æ”¯æŒå’Œ node çš„ SourceMap æ”¯æŒã€‘</li> <li>æ—¥å¿—ä¸ŠæŠ¥: client server ã€å°† SourceMap å‘å¸ƒåˆ°å†…ç½‘è€Œéå…¬ç½‘ä¸Šï¼Œä¸ç„¶åˆ«äººä¹Ÿå¯ä»¥è§£æä½ çš„æºç äº†ã€‘</li></ul> <p>3ã€SourceMap æ ¼å¼</p> <p>å°†ä¸€ä¸ª .ts æ–‡ä»¶ç¼–è¯‘ä¸º .js æ–‡ä»¶ï¼Œçœ‹çœ‹å…¶ SourceMap ä¿¡æ¯æ˜¯å¦‚ä½•å¤„ç†æ˜ å°„çš„ã€‚æˆ‘ä»¬é¡¹ç›®åŒ…å«äº†åŸå§‹çš„ ts æ–‡ä»¶ add.tsã€ç¼–è¯‘åçš„äº§ç‰©æ–‡ä»¶ add.js å’Œ SourceMap æ–‡ä»¶ add.js.map</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// add.ts</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">x</span><span class="token operator">:</span>number<span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// add.js</span>
<span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//# sourceMappingURL=module.js.mapã€è®¿é—® http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.jsï¼Œæ‰“å¼€å‹ç¼©åçš„ç‰ˆæœ¬ï¼Œæ»šåŠ¨åˆ°åº•éƒ¨ï¼Œä½ å¯ä»¥çœ‹åˆ°æœ€åä¸€è¡Œæ˜¯è¿™æ ·çš„ï¼š//@ sourceMappingURL=jquery.min.map; è¿™å°±æ˜¯Source Mapã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„mapæ–‡ä»¶ï¼Œä¸æºç åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‘</span>

<span class="token comment">// SourceMap</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">version</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// SourceMapæ ‡å‡†ç‰ˆæœ¬,æœ€æ–°çš„ä¸º3</span>
  <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">&quot;add.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// è½¬æ¢åçš„æ–‡ä»¶å</span>
  <span class="token literal-property property">sourceRoot</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// è½¬æ¢å‰çš„æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå¦‚æœä¸è½¬æ¢å‰çš„æ–‡ä»¶åœ¨åŒä¸€ç›®å½•ï¼Œè¯¥é¡¹ä¸ºç©º</span>
  <span class="token literal-property property">sources</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;add.ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// è½¬æ¢å‰çš„æ–‡ä»¶ï¼Œè¯¥é¡¹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºå¯èƒ½å­˜åœ¨å¤šä¸ªæ–‡ä»¶åˆå¹¶</span>
  <span class="token literal-property property">names</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// è½¬æ¢å‰çš„æ‰€æœ‰å˜é‡åå’Œå±æ€§å,å¤šç”¨äºminifyçš„åœºæ™¯</span>
  <span class="token literal-property property">sourcesContent</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// åŸå§‹æ–‡ä»¶å†…å®¹</span>
    <span class="token string">&quot;const add = (x:number,y:number) =&gt; {\n  return x+y;\n}&quot;</span>
  <span class="token punctuation">]</span>
  <span class="token literal-property property">mappings</span><span class="token operator">:</span> <span class="token string">&quot;AAAA,IAAM,GAAG,GAAG,UAAC,CAAQ,EAAC,CAAQ;IAC5B,OAAO,CAAC,GAAC,CAAC,CAAC;AACb,CAAC,CAAA&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>mapping çš„æ ¼å¼:</p> <ul><li>å®é™…ä¸Šæ˜¯ä¸ªä¸‰çº§ç»“æ„</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token literal-property property">mappings</span><span class="token operator">:</span> <span class="token string">&quot;AAAA,IAAM,GAAG,GAAG,UAAC,CAAQ,EAAC,CAAQ;IAC5B,OAAO,CAAC,GAAC,CAAC,CAAC;AACb,CAAC,CAAA&quot;</span><span class="token punctuation">;</span>
lines <span class="token operator">=</span> mappings<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>
  <span class="token string">'AAAA,IAAM,GAAG,GAAG,UAAC,CAAQ,EAAC,CAAQ'</span><span class="token punctuation">,</span> <span class="token comment">// var add = function (x, y) { ä¸€çº§</span>
  <span class="token string">'IAC5B,OAAO,CAAC,GAAC,CAAC,CAAC'</span><span class="token punctuation">,</span>     <span class="token comment">// return x + y; äºŒçº§</span>
  <span class="token string">'AACb,CAAC,CAAA'</span> <span class="token comment">// }; ä¸‰çº§</span>
<span class="token punctuation">]</span>
<span class="token operator">*</span> æ¯ä¸€è¡Œéƒ½å¯¹åº”ç”Ÿæˆä»£ç çš„æ¯è¡Œæ–‡ä»¶çš„ä½ç½®æ˜ å°„ä¿¡æ¯
<span class="token operator">*</span> æ­¤å¤„ä¸‰è¡Œå¯¹åº” add æ–¹æ³•çš„ä¸‰è¡Œ
</code></pre></div><ul><li>å¯¹äº mappings çš„ä¸‰è¡Œï¼š
<ul><li>segmentï¼šæ¯ä¸€è¡ŒåŒåŒ…å«ç”± , åˆ†å‰²çš„å¤šä¸ª segment ä¿¡æ¯ï¼Œå…¶ä¸­æ¯ä¸ª segment éƒ½å¯¹åº”äº†äº§ç‰©é‡Œæ¯ä¸€è¡Œé‡Œæ¯ä¸€ä¸ªç¬¦åˆæ‰€åœ¨çš„åˆ—çš„ä¿¡æ¯</li> <li>fieldsï¼šæ¯ä¸ª segment å®é™…ä¸ŠåˆåŒ…å«äº†å‡ ä¸ª fieldï¼Œæ¯ä¸ª field éƒ½ç¼–ç äº†å…·ä½“çš„è¡Œåˆ—æ˜ å°„ä¿¡æ¯,ä¾æ¬¡ä¸ºï¼š
<ul><li>ç¬¬ä¸€ä½: è½¬æ¢åä»£ç æ‰€å¤„çš„åˆ—å·ï¼Œå¦‚æœè¿™æ˜¯å½“å‰è¡Œçš„ç¬¬ä¸€ä¸ª segmentï¼Œé‚£ä¹ˆæ˜¯ä¸ªç»å¯¹å€¼ï¼Œå¦åˆ™æ˜¯ç›¸å¯¹äºä¸Šä¸€ä¸ª segment çš„ç›¸å¯¹å€¼</li> <li>ç¬¬äºŒä½ï¼šè¡¨ç¤ºè¿™ä¸ªä½ç½®å±äº sources å±æ€§ä¸­çš„å“ªä¸€ä¸ªæ–‡ä»¶ï¼Œç›¸å¯¹äºå‰ä¸€ä¸ª segment çš„ä½ç½®ï¼ˆåŒºåˆ«äºåˆ—å·ï¼Œä¸‹ä¸€è¡Œçš„ç¬¬ä¸€ä¸ª segment ä»ç„¶æ˜¯ç›¸å¯¹äºä¸Šä¸€è¡Œçš„æœ€åä¸€ä¸ª segmentï¼Œå¹¶ä¸ä¼š resetï¼‰</li> <li>ç¬¬ä¸‰ä½ï¼šè¡¨ç¤ºè¿™ä¸ªä½ç½®å±äºè½¬æ¢å‰ä»£ç çš„ç¬¬å‡ è¡Œï¼Œç›¸å¯¹ä½ç½®ï¼ŒåŒç¬¬äºŒåˆ—</li> <li>ç¬¬å››ä½ï¼šè¡¨ç¤ºè¿™ä¸ªä½ç½®å±äºè½¬æ¢å‰ä»£ç çš„ç¬¬å‡ åˆ—ï¼Œç›¸å¯¹ä½ç½®ï¼ŒåŒç¬¬äºŒåˆ—</li> <li>ç¬¬äº”ä½ï¼šè¡¨ç¤ºè¿™ä¸ªä½ç½®å±äº names å±æ€§ä¸­çš„å“ªä¸€ä¸ªå˜é‡,ç›¸å¯¹ä½ç½®ï¼ŒåŒç¬¬äºŒåˆ—</li></ul></li></ul></li> <li>field å­˜å‚¨çš„å€¼å¹¶éæ˜¯ç›´æ¥çš„æ•°å­—å€¼ï¼Œè€Œæ˜¯å°†æ•°å­—ä½¿ç”¨ vlq è¿›è¡Œäº†ç¼–ç ï¼Œæ ¹æ®ä¸Šè¿°è¿™äº›ä¿¡æ¯æˆ‘ä»¬å®é™…ä¸Šå°±å¯ä»¥å®ç° SourceMap çš„åŒå‘æ˜ å°„äº†ï¼Œå³å¯ä»¥æ ¹æ® SourceMap å’ŒåŸå§‹ä»£ç çš„ä½ç½®ä¿¡æ¯æŸ¥æ‰¾åˆ°ç”Ÿæˆä»£ç çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ ¹æ® SourceMap å’Œç”Ÿæˆä»£ç çš„ä½ç½®ä¿¡æ¯ï¼ŒæŸ¥æ‰¾åˆ°åŸå§‹ä»£ç çš„ä¿¡æ¯
<ul><li>åŒå‘æŸ¥æ‰¾æµç¨‹ï¼švlq è§£ç </li> <li>äº‹å®ä¸Šä¸Šé¢è¿™äº›åè§£æµç¨‹å¹¶ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å»å®ç°ï¼Œ<a href="https://github.com/mozilla/source-map" target="_blank" rel="noopener noreferrer">mozilla:source-map<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å·²ç»å¸®æˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„ç¼–è¯‘æ–¹æ³•ï¼ŒåŒ…æ‹¬ä¸é™äº
<ul><li>originalPositionForï¼šæŸ¥æ‰¾æºç ä½ç½®</li> <li>generatedPositionForï¼šæŸ¥æ‰¾ç”Ÿæˆä»£ç ä½ç½®</li> <li>eachMappingï¼šç”Ÿæˆæ¯ä¸ª segment çš„è¯¦ç»†æ˜ å°„ä¿¡æ¯</li></ul></li></ul></li></ul> <h2 id="_23"><a href="#_23" class="header-anchor">#</a> 23</h2> <h3 id="vue3"><a href="#vue3" class="header-anchor">#</a> Vue3</h3> <ul><li><p>Vue.js 3.2ï¼š vnodeï¼š https://mp.weixin.qq.com/s/z2ZCUFfFzp3c1ly4IQrrMA</p> <ul><li>vnode æœ¬è´¨ä¸Šæ˜¯ç”¨æ¥æè¿° DOM çš„ JavaScript å¯¹è±¡ï¼Œå®ƒåœ¨ Vue.js ä¸­å¯ä»¥æè¿°ä¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚æ™®é€šå…ƒç´ èŠ‚ç‚¹ã€ç»„ä»¶èŠ‚ç‚¹ã€çº¯æ–‡æœ¬ vnodeã€æ³¨é‡Š vnode ç­‰ã€‚</li> <li>ä¼˜ç‚¹ï¼šæŠ½è±¡ï¼Œå¼•å…¥ vnodeï¼Œå¯ä»¥æŠŠæ¸²æŸ“è¿‡ç¨‹æŠ½è±¡åŒ–ï¼Œä»è€Œä½¿å¾—ç»„ä»¶çš„æŠ½è±¡èƒ½åŠ›ä¹Ÿå¾—åˆ°æå‡ã€‚
å…¶æ¬¡æ˜¯è·¨å¹³å°ï¼Œå› ä¸º patch vnode çš„è¿‡ç¨‹ä¸åŒå¹³å°å¯ä»¥æœ‰è‡ªå·±çš„å®ç°ï¼ŒåŸºäº vnode å†åšæœåŠ¡ç«¯æ¸²æŸ“ã€weex å¹³å°ã€å°ç¨‹åºå¹³å°çš„æ¸²æŸ“éƒ½å˜å¾—å®¹æ˜“äº†å¾ˆå¤š</li></ul></li></ul> <h3 id="æµç¨‹å›¾ã€æ—¶åºå›¾ã€ç”˜ç‰¹å›¾"><a href="#æµç¨‹å›¾ã€æ—¶åºå›¾ã€ç”˜ç‰¹å›¾" class="header-anchor">#</a> æµç¨‹å›¾ã€æ—¶åºå›¾ã€ç”˜ç‰¹å›¾</h3> <ul><li><p>æµç¨‹å›¾ï¼šdraw.ioï¼šhttps://drawio-app.com/examples/</p></li> <li><p>æ—¶åºå›¾ï¼šPlantUmlï¼šhttps://plantuml.com/zh/sequence-diagram</p></li> <li><p>ç”»å›¾å·¥å…·ï¼šOmniGraffleï¼šhttps://www.omnigroup.com/omnigraffle</p></li> <li><p>ç”˜ç‰¹å›¾ï¼šé€šè¿‡æ¡çŠ¶å›¾æ¥æ˜¾ç¤ºé¡¹ç›®ã€è¿›åº¦å’Œå…¶ä»–æ—¶é—´ç›¸å…³çš„ç³»ç»Ÿè¿›å±•çš„å†…åœ¨å…³ç³»éšç€æ—¶é—´è¿›å±•çš„æƒ…å†µï¼ˆReact å¼€æºç”˜ç‰¹å›¾ç»„ä»¶çš„æ€§èƒ½ä¼˜åŒ–ï¼‰ï¼šhttps://mp.weixin.qq.com/s/eP9M2wBJof_lOgCpVoOoXg</p></li></ul> <h2 id="_22"><a href="#_22" class="header-anchor">#</a> 22</h2> <h3 id="æ”»å‡»"><a href="#æ”»å‡»" class="header-anchor">#</a> æ”»å‡»</h3> <ul><li>xss æ”»å‡»ï¼šhttps://tech.meituan.com/2018/09/27/fe-security.html</li> <li>CSRF æ”»å‡»ï¼šhttps://mp.weixin.qq.com/s/sYoccR4-qM4crgkQBYvSpA</li></ul> <h3 id="sourcemapã€npm-yarn"><a href="#sourcemapã€npm-yarn" class="header-anchor">#</a> SourceMapã€npm &amp; yarn</h3> <ul><li>SourceMapï¼šhttps://mp.weixin.qq.com/s/UMDVbq1V-hmVKibweaoURQ</li> <li>npm &amp; yarnï¼šhttps://mp.weixin.qq.com/s/Zp9p-BAosfvCT0iDMz1aEw</li> <li>Web Componentï¼šhttps://mp.weixin.qq.com/s/h8B1YxqOKtwr5CpNSYm_2A</li> <li>Vue æºç ï¼šhttps://mp.weixin.qq.com/s/ze4PvXuEvup76safzAl5jA</li></ul> <h3 id="ä»å”¤ç«¯å‡ºå‘-å­¦ä¹ ç¬¬ä¸‰æ–¹-js"><a href="#ä»å”¤ç«¯å‡ºå‘-å­¦ä¹ ç¬¬ä¸‰æ–¹-js" class="header-anchor">#</a> ä»å”¤ç«¯å‡ºå‘ï¼Œå­¦ä¹ ç¬¬ä¸‰æ–¹ JS</h3> <ul><li>ä»å”¤ç«¯å‡ºå‘ï¼Œå­¦ä¹ ç¬¬ä¸‰æ–¹ JSï¼šhttps://mp.weixin.qq.com/s/jJJHQ3jZfUVQMayqBA6MpQ</li></ul> <h2 id="_21"><a href="#_21" class="header-anchor">#</a> 21</h2> <h3 id="æ–­ç‚¹ç»­ä¼ "><a href="#æ–­ç‚¹ç»­ä¼ " class="header-anchor">#</a> æ–­ç‚¹ç»­ä¼ </h3> <p>å‰ç«¯ï¼š</p> <ul><li>1ã€æ ¸å¿ƒæ˜¯åˆ©ç”¨ Blob.prototype.slice æ–¹æ³•ï¼Œå’Œæ•°ç»„çš„ slice æ–¹æ³•ç›¸ä¼¼ï¼Œè°ƒç”¨çš„ slice æ–¹æ³•å¯ä»¥è¿”å›åŸæ–‡ä»¶çš„æŸä¸ªåˆ‡ç‰‡ï¼Œæ ¹æ®é¢„å…ˆè®¾ç½®å¥½çš„åˆ‡ç‰‡æœ€å¤§æ•°é‡å°†æ–‡ä»¶åˆ‡åˆ†ä¸ºä¸€ä¸ªä¸ªåˆ‡ç‰‡ï¼Œç„¶åå€ŸåŠ© http çš„å¯å¹¶å‘æ€§ï¼ŒåŒæ—¶ä¸Šä¼ å¤šä¸ªåˆ‡ç‰‡ï¼Œè¿™æ ·ä»åŸæœ¬ä¼ ä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œå˜æˆäº†åŒæ—¶ä¼ å¤šä¸ªå°çš„æ–‡ä»¶åˆ‡ç‰‡ï¼Œå¯ä»¥å¤§å¤§å‡å°‘ä¸Šä¼ æ—¶é—´</li> <li>2ã€å¹¶å‘ï¼Œä¼ è¾“åˆ°æœåŠ¡ç«¯çš„é¡ºåºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ç»™æ¯ä¸ªåˆ‡ç‰‡è®°å½•é¡ºåº</li></ul> <p>æœåŠ¡ç«¯ï¼š</p> <ul><li>1ã€æœåŠ¡ç«¯éœ€è¦è´Ÿè´£æ¥å—è¿™äº›åˆ‡ç‰‡ï¼Œå¹¶åœ¨æ¥æ”¶åˆ°æ‰€æœ‰åˆ‡ç‰‡ååˆå¹¶åˆ‡ç‰‡
<ul><li>ä½•æ—¶åˆå¹¶åˆ‡ç‰‡ï¼Œå³åˆ‡ç‰‡ä»€ä¹ˆæ—¶å€™ä¼ è¾“å®Œæˆï¼Ÿ</li> <li>å¦‚ä½•åˆå¹¶åˆ‡ç‰‡ï¼Ÿ</li></ul></li> <li>2ã€ç¬¬ä¸€ä¸ªé—®é¢˜éœ€è¦å‰ç«¯è¿›è¡Œé…åˆï¼Œå‰ç«¯åœ¨æ¯ä¸ªåˆ‡ç‰‡ä¸­éƒ½æºå¸¦åˆ‡ç‰‡æœ€å¤§æ•°é‡çš„ä¿¡æ¯ï¼Œå½“æœåŠ¡ç«¯æ¥å—åˆ°è¿™ä¸ªæ•°é‡çš„åˆ‡ç‰‡æ—¶è‡ªåŠ¨åˆå¹¶ï¼Œä¹Ÿå¯ä»¥é¢å¤–å‘ä¸€ä¸ªè¯·æ±‚ä¸»åŠ¨é€šçŸ¥æœåŠ¡ç«¯è¿›è¡Œåˆ‡ç‰‡çš„åˆå¹¶</li> <li>3ã€ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå…·ä½“å¦‚ä½•åˆå¹¶åˆ‡ç‰‡å‘¢ï¼Ÿè¿™é‡Œå¯ä»¥ä½¿ç”¨ nodejs çš„ è¯»å†™æµï¼ˆreadStream/writeStreamï¼‰ï¼Œå°†æ‰€æœ‰åˆ‡ç‰‡çš„æµä¼ è¾“åˆ°æœ€ç»ˆæ–‡ä»¶çš„æµé‡Œ</li></ul> <p>https://juejin.cn/post/6844904046436843527</p> <h3 id="react-çš„-setstate"><a href="#react-çš„-setstate" class="header-anchor">#</a> react çš„ setState</h3> <p>1.setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„ï¼Œä¸ºä»€ä¹ˆæœ‰çš„æ—¶å€™ä¸èƒ½ç«‹å³æ‹¿åˆ°æ›´æ–°ç»“æœè€Œæœ‰çš„æ—¶å€™å¯ä»¥?</p> <p>1.1 é’©å­å‡½æ•°å’Œ React åˆæˆäº‹ä»¶ä¸­çš„ setState</p> <ul><li><p>1.è°ƒç”¨ setState ä¸ä¼šç«‹å³æ›´æ–°</p></li> <li><p>2.æ‰€æœ‰ç»„ä»¶ä½¿ç”¨çš„æ˜¯åŒä¸€å¥—æ›´æ–°æœºåˆ¶ï¼Œå½“æ‰€æœ‰ç»„ä»¶ didmount åï¼Œçˆ¶ç»„ä»¶ didmountï¼Œç„¶åæ‰§è¡Œæ›´æ–°</p></li> <li><p>3.æ›´æ–°æ—¶ä¼šæŠŠæ¯ä¸ªç»„ä»¶çš„æ›´æ–°åˆå¹¶ï¼Œæ¯ä¸ªç»„ä»¶åªä¼šè§¦å‘ä¸€æ¬¡æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸã€‚</p> <p>1.2 å¼‚æ­¥å‡½æ•°å’ŒåŸç”Ÿäº‹ä»¶ä¸­çš„ setstateï¼Ÿ</p></li> <li><p>1.åœ¨çˆ¶ç»„ä»¶ didmount åæ‰§è¡Œ</p></li> <li><p>2.è°ƒç”¨ setState åŒæ­¥æ›´æ–°</p> <p>2.ä¸ºä»€ä¹ˆæœ‰æ—¶è¿ç»­ä¸¤æ¬¡ setState åªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆï¼Ÿ</p></li> <li><p>1.ç›´æ¥ä¼ é€’å¯¹è±¡çš„ setstate ä¼šè¢«åˆå¹¶æˆä¸€æ¬¡</p></li> <li><p>2.ä½¿ç”¨å‡½æ•°ä¼ é€’ state ä¸ä¼šè¢«åˆå¹¶</p></li></ul> <h3 id="å‡ å¤§-js-æ¡†æ¶çš„è®¾è®¡æ€è·¯"><a href="#å‡ å¤§-js-æ¡†æ¶çš„è®¾è®¡æ€è·¯" class="header-anchor">#</a> å‡ å¤§ JS æ¡†æ¶çš„è®¾è®¡æ€è·¯</h3> <p>è¿è¡Œæ—¶ ï½œ ... ï½œ é¢„ç¼–è¯‘</p> <p>react ï½œ vue ï½œ angular</p> <p>Reactï¼šæ˜¯ä¸€ä¸ªé‡è¿è¡Œæ—¶çš„æ¡†æ¶ï¼Œåœ¨æ•°æ®å‘ç”Ÿå˜åŒ–åï¼Œå¹¶æ²¡æœ‰ç›´æ¥å»æ“ä½œ domï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„æ‰€è°“çš„è™šæ‹Ÿ domï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³è·¨å¹³å°å’Œå…¼å®¹æ€§é—®é¢˜ï¼Œå¹¶ä¸”é€šè¿‡ diff ç®—æ³•å¾—å‡ºæœ€å°çš„æ“ä½œè¡Œä¸ºï¼Œè¿™äº›å…¨éƒ¨éƒ½æ˜¯åœ¨è¿è¡Œæ—¶æ¥åšçš„ã€‚</p> <p>Svelteï¼šä¸€ä¸ªå…¸å‹çš„é‡ç¼–è¯‘çš„æ¡†æ¶ï¼Œä½œä¸ºå¼€å‘è€…æˆ‘ä»¬åªéœ€è¦å»å†™æ¨¡ç‰ˆå’Œæ•°æ®ï¼Œç»è¿‡ Svelte çš„ç¼–è¯‘å’Œé¢„å¤„ç†ï¼Œä»£ç åŸºæœ¬å…¨éƒ¨ä¼šè§£ææˆåŸç”Ÿçš„ DOM æ“ä½œï¼ŒSvelte çš„æ€§èƒ½ä¹Ÿæ˜¯æœ€æ¥è¿‘åŸç”Ÿ js</p> <p>Vueï¼šåœ¨è¿è¡Œæ—¶å’Œé¢„ç¼–è¯‘å–äº†ä¸€ä¸ªå¾ˆå¥½åœ°æƒè¡¡ï¼Œå®ƒä¿ç•™äº†è™šæ‹Ÿ domï¼Œä½†æ˜¯ä¼šé€šè¿‡å“åº”å¼å»æ§åˆ¶è™šæ‹Ÿ dom çš„é¢—ç²’åº¦ï¼Œåœ¨é¢„ç¼–è¯‘é‡Œé¢ï¼Œåˆåšäº†è¶³å¤Ÿå¤šçš„æ€§èƒ½ä¼˜åŒ–ï¼Œåšåˆ°äº†æŒ‰éœ€æ›´æ–°ã€‚</p> <h3 id="ç¼–è¯‘æ—¶ä¼˜åŒ–"><a href="#ç¼–è¯‘æ—¶ä¼˜åŒ–" class="header-anchor">#</a> ç¼–è¯‘æ—¶ä¼˜åŒ–ï¼Ÿ</h3> <p>Vue ä½¿ç”¨çš„æ˜¯æ¨¡ç‰ˆè¯­æ³•ï¼Œæ¨¡ç‰ˆ çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯è¯­æ³•å—é™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-if v-for è¿™äº›æŒ‡å®šçš„è¯­æ³•å»ç¼–ç ï¼Œè™½ç„¶è¿™ä¸å¤ŸåŠ¨æ€ï¼Œä½†æ˜¯ç”±äºè¯­æ³•æ˜¯å¯æšä¸¾çš„ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åœ¨é¢„ç¼–è¯‘å±‚é¢åšæ›´å¤šçš„é¢„åˆ¤ï¼Œè®© Vue åœ¨è¿è¡Œæ—¶æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚</p> <p>æ¯”å¦‚çœ‹ä¸€ä¸ª Vue 3.0 å…·ä½“åœ¨ç¼–è¯‘æ—¶æ‰€åšçš„ä¼˜åŒ–ï¼š</p> <ul><li>ä¼ ç»Ÿ vdom çš„ Diff ç®—æ³•æ€»å½’è¦æŒ‰ç…§ vdom æ ‘çš„å±‚çº§ç»“æ„ä¸€å±‚ä¸€å±‚çš„éå†ï¼Œæ‰€ä»¥ diff æ€§èƒ½ä¼šå’Œæ¨¡ç‰ˆçš„å¤§å°æ­£ç›¸å…³ï¼Œè·ŸåŠ¨æ€èŠ‚ç‚¹çš„æ•°é‡æ— å…³ã€‚åœ¨ä¸€äº›ç»„ä»¶æ•´ä¸ªæ¨¡ç‰ˆå†…åªæœ‰å°‘é‡åŠ¨æ€èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œè¿™äº›éå†éƒ½æ˜¯æ€§èƒ½çš„æµªè´¹ã€‚</li> <li>åœ¨ Vue3.0 é‡Œé¢ï¼Œå°±æœ‰è¿™æ ·ä¸€æ¡ç±»ä¼¼çš„ä¼˜åŒ–ç­–ç•¥ï¼Œå®ƒçš„ compiler å¯ä»¥æ ¹æ®èŠ‚ç‚¹çš„åŠ¨æ€å±æ€§ï¼Œä¸ºæ¯ä¸ª è™šæ‹Ÿ dom åˆ›å»ºä¸åŒçš„ patchflagï¼Œæ¯”å¦‚è¯´ï¼ŒèŠ‚ç‚¹å…·æœ‰åŠ¨æ€çš„ textï¼Œæˆ–è€…å…·æœ‰åŠ¨æ€çš„ classï¼Œéƒ½ä¼šè¢«æ‰“ä¸Šä¸åŒçš„ patchflagã€‚ç„¶å patchflag å†é…åˆ block treeï¼Œå°±å¯ä»¥åšåˆ°å¯¹ä¸åŒèŠ‚ç‚¹çš„é¶å‘æ›´æ–°ã€‚</li></ul> <h3 id="æ­»ç£•è¿è¡Œæ—¶"><a href="#æ­»ç£•è¿è¡Œæ—¶" class="header-anchor">#</a> æ­»ç£•è¿è¡Œæ—¶</h3> <p>React ï¼Œå®ƒæœ¬èº«çš„æ€è·¯æ˜¯çº¯ JS å†™æ³•ï¼Œè¿™ç§æ–¹å¼éå¸¸çµæ´»ï¼Œä½†æ˜¯ï¼Œè¿™ä¹Ÿä½¿å®ƒåœ¨ç¼–è¯‘æ—¶å¾ˆéš¾åšå¤ªå¤šçš„äº‹æƒ…ï¼Œåƒä¸Šé¢<code>vue</code>è¿™æ ·çš„ç¼–è¯‘æ—¶ä¼˜åŒ–æ˜¯å¾ˆéš¾å®ç°çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° React å‡ ä¸ªå¤§ç‰ˆæœ¬çš„çš„ä¼˜åŒ–ä¸»è¦éƒ½åœ¨è¿è¡Œæ—¶ã€‚</p> <p>å¦‚ CPUï¼š</p> <ul><li><p>ä¸»æµæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡ä¸€èˆ¬æ˜¯ 60Hzï¼Œä¹Ÿå°±æ˜¯æ¯ç§’åˆ·æ–° 60 æ¬¡ï¼Œå¤§æ¦‚ 16.6ms æµè§ˆå™¨åˆ·æ–°ä¸€æ¬¡ã€‚ç”±äº GUI æ¸²æŸ“çº¿ç¨‹å’Œ JS çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥ JS è„šæœ¬æ‰§è¡Œå’Œæµè§ˆå™¨å¸ƒå±€ã€ç»˜åˆ¶ä¸èƒ½åŒæ—¶æ‰§è¡Œã€‚</p></li> <li><p>åœ¨è¿™ 16.6ms çš„æ—¶é—´é‡Œï¼Œæµè§ˆå™¨æ—¢éœ€è¦å®Œæˆ JS çš„æ‰§è¡Œï¼Œä¹Ÿéœ€è¦å®Œæˆæ ·å¼çš„é‡æ’å’Œé‡ç»˜ï¼Œå¦‚æœ JS æ‰§è¡Œçš„æ—¶é—´è¿‡é•¿ï¼Œè¶…å‡ºäº† 16.6msï¼Œè¿™æ¬¡åˆ·æ–°å°±æ²¡æœ‰æ—¶é—´æ‰§è¡Œæ ·å¼å¸ƒå±€å’Œæ ·å¼ç»˜åˆ¶äº†ï¼Œäºæ˜¯åœ¨é¡µé¢ä¸Šå°±ä¼šè¡¨ç°ä¸ºå¡é¡¿ã€‚</p></li></ul> <p>æ‰¹å¤„ç†ï¼š</p> <ul><li>å¦‚æœåœ¨éœ€è¦å¤„ç†æ‰¹å¤„ç†çš„ç¯å¢ƒä¸­ï¼ˆReact ç”Ÿå‘½å‘¨æœŸã€åˆæˆäº‹ä»¶ä¸­ï¼‰æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ setStateï¼Œéƒ½ä¼šä¸ä¼šæ‰§è¡Œæ›´æ–°ï¼Œè€Œæ˜¯å°†è¦æ›´æ–°çš„ state å­˜å…¥ _pendingStateQueueï¼Œå°†è¦æ›´æ–°çš„ç»„ä»¶å­˜å…¥ dirtyComponentã€‚å½“ä¸Šä¸€æ¬¡æ›´æ–°æœºåˆ¶æ‰§è¡Œå®Œæ¯•ï¼Œä»¥ç”Ÿå‘½å‘¨æœŸä¸ºä¾‹ï¼Œæ‰€æœ‰ç»„ä»¶ï¼Œå³æœ€é¡¶å±‚ç»„ä»¶ didmount åä¼šå°† isBranchUpdate è®¾ç½®ä¸º falseã€‚è¿™æ—¶å°†æ‰§è¡Œä¹‹å‰ç´¯ç§¯çš„ setStateã€‚</li></ul> <p>Concurrent Modeï¼šï¼ˆConcurrent æ¨¡å¼æ˜¯ä¸€ç»„ React çš„æ–°åŠŸèƒ½ï¼Œå¯å¸®åŠ©åº”ç”¨ä¿æŒå“åº”ï¼Œå¹¶æ ¹æ®ç”¨æˆ·çš„è®¾å¤‡æ€§èƒ½å’Œç½‘é€Ÿè¿›è¡Œé€‚å½“çš„è°ƒæ•´ã€‚ï¼‰</p> <ul><li><p>åœ¨è¿è¡Œæ—¶çš„ä¸»è¦ç“¶é¢ˆå°±æ˜¯ CPUã€IO ï¼Œå¦‚æœèƒ½å¤Ÿç ´è¿™ä¸¤ä¸ªç“¶é¢ˆï¼Œå°±å¯ä»¥å®ç°åº”ç”¨çš„ä¿æŒå“åº”ã€‚</p></li> <li><p>åœ¨ CPU ä¸Šï¼Œæˆ‘ä»¬çš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œåœ¨ JS æ‰§è¡Œè¶…è¿‡ 16.6 ms æ—¶ï¼Œé¡µé¢å°±ä¼šäº§ç”Ÿå¡é¡¿ï¼Œé‚£ä¹ˆ React çš„è§£å†³æ€è·¯ï¼Œå°±æ˜¯åœ¨æµè§ˆå™¨æ¯ä¸€å¸§çš„æ—¶é—´ä¸­é¢„ç•™ä¸€äº›æ—¶é—´ç»™ JS çº¿ç¨‹ï¼ŒReact åˆ©ç”¨è¿™éƒ¨åˆ†æ—¶é—´æ›´æ–°ç»„ä»¶ã€‚</p></li> <li><p>å½“é¢„ç•™çš„æ—¶é—´ä¸å¤Ÿç”¨æ—¶ï¼ŒReact å°†çº¿ç¨‹æ§åˆ¶æƒäº¤è¿˜ç»™æµè§ˆå™¨è®©ä»–æœ‰æ—¶é—´æ¸²æŸ“ UIï¼ŒReact åˆ™ç­‰å¾…ä¸‹ä¸€å¸§å†ç»§ç»­è¢«ä¸­æ–­çš„å·¥ä½œã€‚</p></li> <li><p>è¿™ç§å°†é•¿ä»»åŠ¡åˆ†æ‹†åˆ°æ¯ä¸€å¸§ä¸­ï¼Œæ¯ä¸€å¸§æ‰§è¡Œä¸€å°æ®µä»»åŠ¡çš„æ“ä½œï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ—¶é—´åˆ‡ç‰‡ã€‚</p></li> <li><p><a href="https://mp.weixin.qq.com/s/4Y6DuY5rDohgdCm0MP5WBA" target="_blank" rel="noopener noreferrer">react<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h3 id="æ‹¼éŸ³æœç´¢-è§åˆ†äº«"><a href="#æ‹¼éŸ³æœç´¢-è§åˆ†äº«" class="header-anchor">#</a> æ‹¼éŸ³æœç´¢ï¼ˆè§åˆ†äº«ï¼‰</h3> <p>å¤§å¤šéƒ½æ˜¯åœ¨ç´¢å¼•é˜¶æ®µæ·»åŠ äº†æ‹¼éŸ³å­—æ®µï¼Œæœ‰çš„è¿˜åŒæ—¶åŠ äº†é¦–æ‹¼å­—æ®µï¼Œä¸è¿‡åŸºæœ¬ä¸Šéƒ½æ˜¯åªä¼šç»™æ ‡é¢˜å­—æ®µåŠ ä¸Šæ‹¼éŸ³ç´¢å¼•ã€‚ è¿˜æœ‰å¦å¤–ä¸€ç§å®ç°æ–¹æ¡ˆå°±æ˜¯å°†æ ‡é¢˜åˆ†è¯åï¼Œå°†åˆ†è¯çš„æ‹¼éŸ³å•ç‹¬å­˜å‚¨åˆ°å¦å¤–ä¸€ä¸ªç´¢å¼•åº“ï¼Œè€Œä¸”è¿™ä¸ªç´¢å¼•åº“çš„æ–‡æ¡£æ¨¡å‹åªæœ‰ä¸­æ–‡å’Œæ‹¼éŸ³ä¸¤ä¸ªå­—æ®µï¼Œç”¨æˆ·è¾“å…¥å…³é”®è¯çš„æ—¶å€™ï¼Œé€šè¿‡ ajax æ£€ç´¢åŒ¹é…çš„ä¸­æ–‡ï¼Œç„¶åå±•ç°åˆ°æœç´¢æ¡†çš„ä¸‹æ–¹ã€‚å¦‚æœä½ ä¸æ˜¯æƒ³é—®æ‹¼éŸ³è‡ªåŠ¨è¡¥å…¨çš„æ•ˆæœï¼Œè€Œæ˜¯æƒ³é—®ç›´æ¥æœç´¢æ‹¼éŸ³æ—¶ï¼Œä¼šå°†å¯¹åº”çš„æ–‡ç« æœç´¢å‡ºæ¥çš„è¯ï¼Œé‚£å¤§å¤šæ˜¯å°†æ‹¼éŸ³å’Œå¯¹åº”çš„ä¸­æ–‡è¯è¯­åšäº†åŒä¹‰è¯æ˜ å°„ã€‚</p> <h2 id="_20"><a href="#_20" class="header-anchor">#</a> 20</h2> <h3 id="service-worker"><a href="#service-worker" class="header-anchor">#</a> Service Worker</h3> <p>æµè§ˆå™¨åœ¨åå°ç‹¬ç«‹äºç½‘é¡µè¿è¡Œçš„ã€ç”¨ JavaScript ç¼–å†™çš„è„šæœ¬ã€‚æƒ³è¦ç©è½¬ Service Workerï¼Œæ˜¯éœ€è¦å­¦ä¹ å®ƒçš„ API çš„</p> <ul><li>æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç¼–å†™ service-worker.js æ–‡ä»¶ã€‚</li> <li>æˆ‘ä»¬éœ€è¦åœ¨ç½‘é¡µä¸­ä¸‹è½½å¹¶æ³¨å†Œ service-worker.js æ–‡ä»¶ã€‚</li> <li>Service Worker å…·æœ‰è¶…èƒ½åŠ›ï¼Œå¯ä»¥æ‹¦æˆªå¹¶å¤„ç† HTTP è¯·æ±‚ã€‚Service Worker è¦æ±‚ HTTPSï¼Œæ³¨æ„é‚£ä¸ª&quot;S&quot;ï¼Œä½†ä¸ºäº†å¼€å‘è°ƒè¯•æ–¹ä¾¿ï¼Œlocalhost é™¤å¤–</li></ul> <p>Service Worker çš„ç”Ÿå‘½å‘¨æœŸ:</p> <ul><li>ervice Worker ç”Ÿå‘½å‘¨æœŸï¼šå®‰è£…ä¸­ã€å®‰è£…åã€æ¿€æ´»ä¸­ã€æ¿€æ´»åã€æˆ‘åºŸäº†ã€‚</li> <li>é¦–æ¬¡å¯¼èˆªåˆ°ç½‘ç«™æ—¶ï¼Œä¼šä¸‹è½½ã€è§£æå¹¶æ‰§è¡Œ Service Worker æ–‡ä»¶ï¼Œè§¦å‘ install äº‹ä»¶ï¼Œå°è¯•å®‰è£… Service Workerï¼Œå¦‚æœ install äº‹ä»¶å›è°ƒå‡½æ•°ä¸­çš„æ“ä½œéƒ½æ‰§è¡ŒæˆåŠŸï¼Œæ ‡å¿— Service Worker å®‰è£…æˆåŠŸï¼Œæ­¤æ—¶è¿›å…¥ waiting çŠ¶æ€ï¼Œæ³¨æ„è¿™æ—¶çš„ Service Worker åªæ˜¯å‡†å¤‡å¥½äº†è€Œå·²ï¼Œå¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œå½“ç”¨æˆ·äºŒæ¬¡è¿›å…¥ç½‘ç«™æ—¶ï¼Œæ‰ä¼šæ¿€æ´» Service Workerï¼Œæ­¤æ—¶ä¼šè§¦å‘ activate äº‹ä»¶ï¼Œæ ‡å¿— Service Worker æ­£å¼å¯åŠ¨ï¼Œå¼€å§‹å“åº” fetchã€postã€sync ç­‰äº‹ä»¶ã€‚</li> <li>ä¸»è¦äº‹ä»¶
<ul><li>installï¼šService Worker å®‰è£…æ—¶è§¦å‘ï¼Œé€šå¸¸åœ¨è¿™ä¸ªæ—¶æœºç¼“å­˜æ–‡ä»¶ã€‚</li> <li>activateï¼šService Worker æ¿€æ´»æ—¶è§¦å‘ï¼Œé€šå¸¸åœ¨è¿™ä¸ªæ—¶æœºåšä¸€äº›é‡ç½®çš„æ“ä½œï¼Œä¾‹å¦‚å¤„ç†æ—§ç‰ˆæœ¬ Service Worker çš„ç¼“å­˜ã€‚</li> <li>fetchï¼šæµè§ˆå™¨å‘èµ· HTTP è¯·æ±‚æ—¶è§¦å‘ï¼Œé€šå¸¸åœ¨è¿™ä¸ªäº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸­åŒ¹é…ç¼“å­˜ï¼Œæ˜¯æœ€å¸¸ç”¨çš„äº‹ä»¶ã€‚</li> <li>pushï¼šå’Œæ¨é€é€šçŸ¥åŠŸèƒ½ç›¸å…³</li> <li>syncï¼šå’Œåå°åŒæ­¥åŠŸèƒ½ç›¸å…³</li></ul></li> <li>Service Worker çš„åº”ç”¨:
<ul><li>1.<code>ç¼“å­˜é™æ€èµ„æº</code>ã€‚ï¼ˆåˆ©ç”¨ CacheStorage API æ¥ç¼“å­˜ jsã€cssã€å­—ä½“ã€å›¾ç‰‡ç­‰é™æ€æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ Service Worker çš„ install é˜¶æ®µï¼ŒæŒ‡å®šéœ€è¦ç¼“å­˜çš„å…·ä½“æ–‡ä»¶ï¼Œåœ¨ fetch äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸­ï¼Œæ£€æŸ¥è¯·æ±‚çš„ urlï¼Œå¦‚æœåŒ¹é…äº†å·²ç¼“å­˜çš„èµ„æºï¼Œåˆ™ä¸å†ä»æœåŠ¡ç«¯è·å–ï¼Œä»¥æ­¤è¾¾åˆ°æå‡ç½‘é¡µæ€§èƒ½çš„ç›®çš„ã€‚ï¼‰</li> <li>2.<code>ç¦»çº¿ä½“éªŒ</code>ã€‚ï¼ˆå°†é¦–é¡µ index.html ä¹Ÿç¼“å­˜å‘¢ï¼Ÿé‚£ç»“æœæ˜¯æˆ‘ä»¬çš„ç½‘é¡µç”šè‡³å¯ä»¥æ”¯æŒç¦»çº¿æµè§ˆã€‚ï¼‰</li> <li>3.<code>ä½“éªŒä¼˜åŒ–</code>ã€‚ï¼ˆç½‘é¡µä¸­å›¾ç‰‡æ˜¯å¾ˆæ¶ˆè€—å¸¦å®½èµ„æºçš„ï¼Œç”¨æˆ·ç­‰å¾…ç½‘ç«™åŠ è½½ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯åœ¨ç­‰å›¾ç‰‡ï¼Œå¤§å¤šæ•°æ”¾åœ¨ CDN ä¸Šçš„å›¾ç‰‡ï¼Œéƒ½æ”¯æŒæ·»åŠ åç¼€å‚æ•°è·å–ä¸åŒåˆ†è¾¨ç‡ç…§ç‰‡çš„åŠŸèƒ½ã€‚å‡è®¾æˆ‘ä»¬æœ‰åŠæ³•çŸ¥é“ä¸€ä¸ªç”¨æˆ·çš„ç½‘ç»œæ¡ä»¶çš„å¥½åï¼ˆè‡³äºå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªç”¨æˆ·çš„ç½‘ç»œæ¡ä»¶ï¼Œæ˜¯å¦å¤–ä¸€ä»¶äº‹ï¼Œå¯ä»¥è®©ç”¨æˆ·é€‰æ‹©ï¼Œä¹Ÿå¯ç”¨æŠ€æœ¯æ‰‹æ®µè§£å†³ï¼‰ï¼ŒæŠŠç”¨æˆ·åˆ†çº§ï¼Œæš‚ä¸”åˆ†ä¸ºä¸¤çº§ï¼šç½‘é€Ÿå¿«çš„å’Œç½‘é€Ÿæ…¢çš„ã€‚æˆ‘ä»¬æŠŠç½‘é€Ÿçº§åˆ«ä¿¡æ¯æ”¾åˆ° HTTP è¯·æ±‚çš„ header ä¸­ï¼ˆæˆ–å…¶å®ƒä½ æƒ³å¾—åˆ°çš„åˆé€‚çš„åœ°æ–¹ï¼‰ï¼Œå½“å‘èµ·å›¾ç‰‡è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰æœºä¼šæ‹¿åˆ°ç”¨æˆ·çš„ç½‘ç»œçº§åˆ«ï¼Œå¦‚æœæ˜¯ç½‘é€Ÿå¿«çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬é€šè¿‡åç¼€å‚æ•°è¿”å› CDN ä¸Šé«˜åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œåä¹‹ç›¸åã€‚è¿™æ ·çš„ç»“æœæ˜¯ç½‘é€Ÿå¿«çš„ç”¨æˆ·å¯ä»¥çœ‹åˆ°æ›´æ¸…æ™°çš„ç…§ç‰‡ï¼Œè€Œç½‘é€Ÿæ…¢çš„ç”¨æˆ·è™½ç„¶çœ‹åˆ°çš„ç…§ç‰‡æ¸…æ™°åº¦å·®ï¼Œä½†å¯ä»¥æ›´æ—©åœ°çœ‹åˆ°ç…§ç‰‡ï¼Œä¸å¿…ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ã€‚ï¼‰</li></ul></li></ul> <p>Service Worker çš„åˆè¡·æ˜¯æè‡´ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œæ˜¯ç”¨æ¥é”¦ä¸Šæ·»èŠ±çš„ï¼ŒæŠ€æœ¯åªæ˜¯æŠ€æœ¯ï¼Œä½†å®é™…åº”ç”¨å‰ï¼Œåº”è€ƒè™‘æˆæœ¬å’Œæ”¶ç›Šã€‚</p> <ul><li><a href="https://juejin.cn/post/6844903887296528398" target="_blank" rel="noopener noreferrer">Service Worker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_19"><a href="#_19" class="header-anchor">#</a> 19</h2> <h3 id="æé€Ÿç‰ˆ"><a href="#æé€Ÿç‰ˆ" class="header-anchor">#</a> æé€Ÿç‰ˆ</h3> <p>ä¸ºä»€ä¹ˆ app éƒ½å¼€å‘æé€Ÿç‰ˆï¼ˆç”¨çœ‹è§†é¢‘çº¢åŒ…æ¨å¹¿ï¼‰ï¼Œå·²ç»æœ‰ä¸€ä¸ªæ™®é€šç‰ˆï¼Œä¸ºä»€ä¹ˆè¿˜è¦å»æ¨å¹¿é˜‰å‰²çš„ç‰ˆæœ¬å‘¢ï¼Ÿã€æé€Ÿç‰ˆé€šä¿—æ¥è®²å°±æ˜¯ï¼Œäº§å“çš„ç®€åŒ–ç‰ˆï¼ŒåªåŒ…å«äº§å“çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå®‰è£…åŒ…ä¼šæ›´å°ï¼Œè¿è¡Œé€Ÿåº¦ä¼šæ›´å¿«ã€‚ã€‘</p> <ul><li>æ‹‰æ–°è·å®¢æˆæœ¬é™ä½</li> <li>è·å–ä¸‹æ²‰å¸‚åœºçš„ç”¨æˆ·ï¼Œæœ‰äº›ç”¨æˆ·ç¾¤ä½“æµé‡ä¸è¶³ã€ç½‘ç»œå·®ã€æ‰‹æœºå†…å­˜å°ç­‰ç­‰ï¼Œä¸€äºŒä¸‰çº¿çš„ç”¨æˆ·å·²ç»è·å–å·®ä¸å¤šäº†ï¼Œä¸Šçº¿ç½‘èµšæ´»åŠ¨ï¼Œé‚€è¯·å¥½å‹æ‹‰æ–°é¢†çº¢åŒ…</li> <li>æé€Ÿç‰ˆç‰¹æœ‰çš„åŠŸèƒ½ï¼šçœ‹è§†é¢‘èµšé‡‘å¸
<ul><li>ç½‘èµšæ¸¸æˆï¼Œè¿™ç§æ¨¡å¼æ¯•ç«Ÿå±äºç°è‰²åœ°å¸¦ï¼Œè‹¥ä¸Šæ¶åˆ°ä¸»ç‰ˆæœ¬åï¼Œæ”¿ç­–çªç„¶é”ç´§ï¼Œä¸»ç‰ˆæœ¬ä¼šå—å½±å“å¤ªå¤§ã€‚</li> <li>å°†å…¶ä¸Šæ¶äºæé€Ÿç‰ˆæ˜¯ä¿é™©çš„æªæ–½ã€‚è€Œé€‰æ‹©ç½‘èµšæ¨¡å¼ï¼Œä¹Ÿåªæ˜¯æ°å¥½è¿™ç§æ¨¡å¼ï¼Œæ›´åŠ é€‚åˆä¸‹æ²‰å¸‚åœºã€‚</li> <li>è¯•éªŒæŸäº›å¯èƒ½æ¶‰å«Œè¿è§„çš„åŠŸèƒ½ï¼Œé¿å…ä¸»ç‰ˆæœ¬ app è¿è§„ã€‚</li></ul></li></ul> <p>æ¶æ„å›¾: 4+1 è§†å›¾ã€‚åˆ†åˆ«ä¸ºåœºæ™¯è§†å›¾ã€é€»è¾‘è§†å›¾ã€ç‰©ç†è§†å›¾ã€å¤„ç†æµç¨‹è§†å›¾å’Œå¼€å‘è§†å›¾ã€‚</p> <ul><li>åœºæ™¯è§†å›¾ï¼šæè¿°ç³»ç»Ÿçš„å‚ä¸è€…ä¸åŠŸèƒ½ç”¨ä¾‹é—´çš„å…³ç³»ï¼Œåæ˜ ç³»ç»Ÿçš„æœ€ç»ˆéœ€æ±‚å’Œäº¤äº’è®¾è®¡ï¼Œé€šå¸¸ç”±ç”¨ä¾‹å›¾è¡¨ç¤ºã€‚</li> <li>å¤„ç†æµç¨‹è§†å›¾ï¼šæè¿°ç³»ç»Ÿè½¯ä»¶ç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ—¶åºï¼Œæ•°æ®çš„è¾“å…¥è¾“å‡ºï¼Œåæ˜ ç³»ç»Ÿçš„åŠŸèƒ½æµç¨‹ä¸æ•°æ®æµç¨‹,é€šå¸¸ç”±æ—¶åºå›¾å’Œæµç¨‹å›¾è¡¨ç¤º</li> <li>å¼€å‘è§†å›¾ï¼šæè¿°ç³»ç»Ÿçš„æ¨¡å—åˆ’åˆ†å’Œç»„æˆï¼Œä»¥åŠç»†åŒ–åˆ°å†…éƒ¨åŒ…çš„ç»„æˆè®¾è®¡ï¼ŒæœåŠ¡äºå¼€å‘äººå‘˜ï¼Œåæ˜ ç³»ç»Ÿå¼€å‘å®æ–½è¿‡ç¨‹</li></ul> <h3 id="vue-react-åŒºåˆ«"><a href="#vue-react-åŒºåˆ«" class="header-anchor">#</a> vue&amp;react åŒºåˆ«</h3> <p>1ã€æ¨¡å¼</p> <ul><li>Vue ä½¿ç”¨çš„æ˜¯ web å¼€å‘è€…æ›´ç†Ÿæ‚‰çš„<code>æ¨¡æ¿ä¸ç‰¹æ€§</code>ã€‚æ¨¡æ¿+JavaScript+CSS çš„ç»„åˆæ¨¡å¼å‘ˆç°ï¼Œå®ƒè·Ÿ web ç°æœ‰çš„ HTMLã€JavaScriptã€CSS èƒ½å¤Ÿæ›´å¥½åœ°é…åˆ</li> <li>React çš„ç‰¹è‰²åœ¨äº<code>å‡½æ•°å¼ç¼–ç¨‹</code>çš„ç†å¿µå’Œä¸°å¯Œçš„æŠ€æœ¯é€‰å‹, æ›´å®¹æ˜“å¸å¼•åœ¨ FP ä¸ŠæŒç»­èµ°ä¸‹å»çš„å¼€å‘è€…ã€‚</li></ul> <p>2ã€Vue è·Ÿ React çš„æœ€å¤§åŒºåˆ«åœ¨äºæ•°æ®çš„ reactivityï¼Œå°±æ˜¯ååº”å¼ç³»ç»Ÿä¸Š</p> <ul><li>Vue æä¾›ååº”å¼çš„æ•°æ®ï¼Œå½“æ•°æ®æ”¹åŠ¨æ—¶ï¼Œç•Œé¢å°±ä¼šè‡ªåŠ¨æ›´æ–°ã€‚Push-basedï¼šæ”¹åŠ¨æ•°æ®ä¹‹åï¼Œæ•°æ®æœ¬èº«ä¼šæŠŠè¿™ä¸ªæ”¹åŠ¨æ¨é€å‡ºå»ï¼Œå‘ŠçŸ¥æ¸²æŸ“ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œæ¸²æŸ“</li> <li>React é‡Œé¢éœ€è¦è°ƒç”¨æ–¹æ³• SetStateã€‚Pull-basedï¼šç”¨æˆ·è¦ç»™ç³»ç»Ÿä¸€ä¸ªæ˜ç¡®çš„ä¿¡å·è¯´æ˜ç°åœ¨éœ€è¦é‡æ–°æ¸²æŸ“äº†ï¼Œè¿™ä¸ªç³»ç»Ÿæ‰ä¼šé‡æ–°æ¸²æŸ“</li></ul> <p>ä¸¤è€…ä¸æ˜¯å®Œå…¨äº’æ–¥çš„ï¼Œæ¯”å¦‚è¯´åœ¨ React é‡Œé¢ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“åƒ MobX å®ç° Push-based çš„ç³»ç»Ÿï¼ŒåŒæ—¶ä½ ä¹Ÿå¯ä»¥åœ¨ Vue2.0 é‡Œé¢ï¼Œé€šè¿‡ä¸€äº›æ‰‹æ®µï¼Œæ¯”å¦‚æŠŠæ•°æ® freeze èµ·æ¥ï¼Œè®©æ•°æ®ä¸å†å…·æœ‰ååº”å¼ç‰¹ç‚¹ï¼Œæˆ–è€…é€šè¿‡æ‰‹åŠ¨è°ƒç”¨ç»„ä»¶æ›´æ–°çš„æ–¹æ³•æ¥åšä¸€ä¸ª pull-based ç³»ç»Ÿã€‚æ‰€ä»¥ä¸¤è€…å¹¶æ²¡æœ‰ä¸€ä¸ªç»å¯¹çš„ç•Œé™ï¼Œåªæ˜¯é»˜è®¤çš„å€¾å‘æ€§ä¸åŒè€Œå·²ã€‚</p> <h2 id="_18"><a href="#_18" class="header-anchor">#</a> 18</h2> <h3 id="æ‰«ç ç™»é™†"><a href="#æ‰«ç ç™»é™†" class="header-anchor">#</a> æ‰«ç ç™»é™†</h3> <p>åŸºäº token çš„è®¤è¯æœºåˆ¶ï¼š</p> <ul><li>è´¦å·å¯†ç ç™»å½•æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå°†è®¾å¤‡ä¿¡æ¯ä¸€èµ·ä¼ é€’ç»™æœåŠ¡ç«¯ï¼Œ</li> <li>å¦‚æœè´¦å·å¯†ç æ ¡éªŒé€šè¿‡ï¼ŒæœåŠ¡ç«¯ä¼šæŠŠ<code>è´¦å·ä¸è®¾å¤‡è¿›è¡Œä¸€ä¸ªç»‘å®š</code>ï¼Œå­˜åœ¨ä¸€ä¸ªæ•°æ®ç»“æ„ä¸­ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„ä¸­åŒ…å«äº†è´¦å· IDï¼Œè®¾å¤‡ IDï¼Œè®¾å¤‡ç±»å‹ç­‰ç­‰ï¼Œç„¶åæœåŠ¡ç«¯ä¼šç”Ÿæˆä¸€ä¸ª tokenï¼Œç”¨å®ƒæ¥æ˜ å°„æ•°æ®ç»“æ„ï¼Œè¿™ä¸ª token å…¶å®å°±æ˜¯ä¸€ä¸²æœ‰ç€ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ä¸²ï¼Œå®ƒçš„æ„ä¹‰å°±åœ¨äºï¼Œé€šè¿‡å®ƒå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„è´¦å·ä¸è®¾å¤‡ä¿¡æ¯ï¼Œ</li> <li>å®¢æˆ·ç«¯å¾—åˆ°è¿™ä¸ª token åï¼Œéœ€è¦è¿›è¡Œä¸€ä¸ªæœ¬åœ°ä¿å­˜ï¼Œæ¯æ¬¡è®¿é—®ç³»ç»Ÿ API éƒ½<code>æºå¸¦ä¸Štokenä¸è®¾å¤‡ä¿¡æ¯</code>ã€‚</li> <li>æœåŠ¡ç«¯å°±å¯ä»¥é€šè¿‡ token æ‰¾åˆ°ä¸å®ƒç»‘å®šçš„è´¦å·ä¸è®¾å¤‡ä¿¡æ¯ï¼Œç„¶åæŠŠç»‘å®šçš„è®¾å¤‡ä¿¡æ¯ä¸å®¢æˆ·ç«¯æ¯æ¬¡ä¼ æ¥çš„è®¾å¤‡ä¿¡æ¯è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒï¼Œé‚£ä¹ˆæ ¡éªŒé€šè¿‡ï¼Œè¿”å› AP æ¥å£å“åº”æ•°æ®ï¼Œå¦‚æœä¸åŒï¼Œé‚£å°±æ˜¯æ ¡éªŒä¸é€šè¿‡æ‹’ç»è®¿é—®ã€‚</li></ul> <p>æ‰«ç ç™»é™†ï¼šã€PC ç«¯ã€æ‰‹æœºç«¯ã€æœåŠ¡ç«¯ã€‘</p> <ul><li><p>1ã€PC äºŒç»´ç å‡†å¤‡é˜¶æ®µï¼šç”¨æˆ·æ‰“å¼€ PC ç«¯ï¼Œåˆ‡æ¢åˆ°äºŒç»´ç ç™»å½•ç•Œé¢</p> <ul><li>PC ç«¯å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼Œç”Ÿæˆç”¨æˆ·ç™»å½•çš„äºŒç»´ç ï¼Œå¹¶ä¸”æŠŠ PC ç«¯è®¾å¤‡ä¿¡æ¯ä¹Ÿä¼ é€’ç»™æœåŠ¡ç«¯</li> <li>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼Œå®ƒç”ŸæˆäºŒç»´ç  IDï¼Œå¹¶å°†äºŒç»´ç  ID ä¸ PC ç«¯è®¾å¤‡ä¿¡æ¯è¿›è¡Œç»‘å®šï¼ŒæŠŠäºŒç»´ç  ID è¿”å›ç»™ PC ç«¯</li> <li>PC ç«¯æ”¶åˆ°äºŒç»´ç  ID åï¼Œç”ŸæˆäºŒç»´ç (äºŒç»´ç ä¸­è‚¯å®šåŒ…å«äº† ID)</li> <li>ä¸ºäº†<code>åŠæ—¶çŸ¥é“äºŒç»´ç çš„çŠ¶æ€</code>ï¼Œå®¢æˆ·ç«¯åœ¨<code>å±•ç°äºŒç»´ç å</code>ï¼ŒPC ç«¯<code>ä¸æ–­çš„è½®è¯¢</code>æœåŠ¡ç«¯ï¼Œæ¯”å¦‚æ¯éš”ä¸€ç§’å°±è½®è¯¢ä¸€æ¬¡ï¼Œ<code>è¯·æ±‚</code>æœåŠ¡ç«¯å‘Šè¯‰<code>å½“å‰äºŒç»´ç çš„çŠ¶æ€</code>åŠç›¸å…³ä¿¡æ¯</li></ul></li> <li><p>2ã€æ‰«æçŠ¶æ€åˆ‡æ¢</p> <ul><li>ç”¨æˆ·ç”¨æ‰‹æœºå»<code>æ‰«æ</code>PC ç«¯çš„<code>äºŒç»´ç </code>ï¼Œé€šè¿‡äºŒç»´ç å†…å®¹<code>å–åˆ°</code>å…¶ä¸­çš„<code>äºŒç»´ç ID</code></li> <li>å†<code>è°ƒç”¨</code>æœåŠ¡ç«¯<code>API</code>å°†ç§»åŠ¨ç«¯çš„<code>èº«ä»½ä¿¡æ¯</code>ä¸<code>äºŒç»´ç ID</code>ä¸€èµ·å‘é€ç»™æœåŠ¡ç«¯</li> <li>æœåŠ¡ç«¯æ¥æ”¶åˆ°åï¼Œå®ƒå¯ä»¥å°†èº«ä»½ä¿¡æ¯ä¸äºŒç»´ç  ID è¿›è¡Œç»‘å®šï¼Œç”Ÿæˆä¸´æ—¶ tokenã€‚ç„¶åè¿”å›ç»™æ‰‹æœºç«¯(ä¸´æ—¶ tokenï¼Œä¸ºçš„å°±æ˜¯æ‰‹æœºç«¯åœ¨ä¸‹ä¸€æ­¥æ“ä½œæ—¶ï¼Œå¯ä»¥ç”¨å®ƒä½œä¸ºå‡­è¯ã€‚ä»¥æ­¤ç¡®ä¿æ‰«ç ï¼Œç™»å½•ä¸¤æ­¥æ“ä½œæ˜¯åŒä¸€éƒ¨æ‰‹æœºç«¯å‘å‡ºçš„)</li> <li>å› ä¸º PC ç«¯ä¸€ç›´åœ¨è½®è¯¢äºŒç»´ç çŠ¶æ€ï¼Œæ‰€ä»¥è¿™æ—¶å€™äºŒç»´ç çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼Œå®ƒå°±å¯ä»¥åœ¨ç•Œé¢ä¸ŠæŠŠäºŒç»´ç çŠ¶æ€æ›´æ–°ä¸ºå·²æ‰«æ</li></ul></li> <li><p>3ã€çŠ¶æ€çš„ç¡®è®¤</p> <ul><li>æ‰‹æœºç«¯åœ¨æ¥æ”¶åˆ°ä¸´æ—¶ token åä¼šå¼¹å‡ºç¡®è®¤ç™»å½•ç•Œé¢ï¼Œç”¨æˆ·ç‚¹å‡»<code>ç¡®è®¤</code>æ—¶ï¼Œæ‰‹æœºç«¯æºå¸¦ä¸´æ—¶ token ç”¨æ¥è°ƒç”¨æœåŠ¡ç«¯çš„æ¥å£ï¼Œå‘Šè¯‰æœåŠ¡ç«¯ï¼Œæˆ‘å·²ç»ç¡®è®¤</li> <li>æœåŠ¡ç«¯æ”¶åˆ°ç¡®è®¤åï¼Œæ ¹æ®äºŒç»´ç  ID ç»‘å®šçš„è®¾å¤‡ä¿¡æ¯ä¸è´¦å·ä¿¡æ¯ï¼Œ<code>ç”Ÿæˆç”¨æˆ·PCç«¯ç™»å½•çš„token</code></li> <li>è¿™æ—¶å€™<code>PCç«¯çš„è½®è¯¢æ¥å£</code>ï¼Œå®ƒå°±å¯ä»¥<code>å¾—çŸ¥</code>äºŒç»´ç çš„çŠ¶æ€å·²ç»å˜æˆäº†&quot;<code>å·²ç¡®è®¤</code>&quot;ã€‚å¹¶ä¸”<code>ä»æœåŠ¡ç«¯</code>å¯ä»¥<code>è·å–</code>åˆ°ç”¨æˆ·ç™»å½•çš„<code>token</code></li> <li>åˆ°è¿™é‡Œï¼Œ<code>ç™»å½•å°±æˆåŠŸäº†</code>ï¼Œåç«¯ PC ç«¯å°±å¯ä»¥ç”¨ token å»è®¿é—®æœåŠ¡ç«¯çš„èµ„æºäº†</li></ul></li></ul> <p>scene value æ‰«ç åœºæ™¯å€¼: ä»ç›¸å†Œé€‰å–å’Œç›´æ¥æ‰«çš„ scene è‚¯å®šä¸ä¸€æ ·</p> <ul><li><a href="https://mp.weixin.qq.com/s/y_uk7wXAfvq8FzcUZrR93w" target="_blank" rel="noopener noreferrer">æ·±å…¥æµ…å‡º Commonjs å’Œ Es Module<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6940976355097985032#heading-8" target="_blank" rel="noopener noreferrer">äºŒç»´ç æ‰«ç ç™»å½•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="ts-å¦‚ä½•å·¥ä½œ"><a href="#ts-å¦‚ä½•å·¥ä½œ" class="header-anchor">#</a> ts å¦‚ä½•å·¥ä½œ</h3> <ul><li><a href="https://mp.weixin.qq.com/s/_zbrH7V-MDHnYSGXfc_Dsg" target="_blank" rel="noopener noreferrer">TS å·¥ä½œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>å·¥ä½œåŸç†ï¼š</p> <ul><li>TypeScript æºç ç»è¿‡æ‰«æå™¨æ‰«æä¹‹åå˜æˆä¸€ç³»åˆ— Tokenï¼›</li> <li>è§£æå™¨è§£æ tokenï¼Œå¾—åˆ°ä¸€æ£µ AST è¯­æ³•æ ‘ï¼›</li> <li>ç»‘å®šå™¨éå† AST è¯­æ³•æ ‘ï¼Œç”Ÿæˆä¸€ç³»åˆ— Symbolï¼Œå¹¶å°†è¿™äº› Symbol è¿æ¥åˆ°å¯¹åº”çš„èŠ‚ç‚¹ä¸Šï¼›</li> <li>æ£€æŸ¥å™¨å†æ¬¡æ‰«æ ASTï¼Œæ£€æŸ¥ç±»å‹ï¼Œå¹¶å°†é”™è¯¯æ”¶é›†èµ·æ¥ï¼›</li> <li>å‘å°„å™¨æ ¹æ® AST ç”Ÿæˆ JavaScript ä»£ç ã€‚</li></ul> <p>VSCode å†…ç½®äº†å¯¹ TypeScript è¯­è¨€çš„æ”¯æŒï¼Œç±»å‹æ£€æŸ¥ä¸»è¦é€šè¿‡ TypeScript æ’ä»¶ï¼ˆextensionï¼‰è¿›è¡Œã€‚æ’ä»¶èƒŒåå°±æ˜¯ Language Service Protocalã€‚</p> <ul><li>LSP æ˜¯ç”±å¾®è½¯æå‡ºçš„çš„ä¸€ä¸ªåè®®ï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³æ’ä»¶åœ¨ä¸åŒçš„ç¼–è¾‘å™¨ä¹‹é—´è¿›è¡Œå¤ç”¨çš„é—®é¢˜ã€‚LSP åè®®åœ¨è¯­è¨€æ’ä»¶å’Œç¼–è¾‘å™¨ä¹‹é—´åšäº†ä¸€å±‚éš”ç¦»ï¼Œæ’ä»¶ä¸å†ç›´æ¥å’Œç¼–è¾‘å™¨é€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡ LSP åè®®è¿›è¡Œè½¬å‘ã€‚è¿™æ ·åœ¨éµå¾ªäº† LSP çš„ç¼–è¯‘å™¨ä¸­ï¼Œç›¸åŒåŠŸèƒ½çš„æ’ä»¶ï¼Œå¯ä»¥ä¸€æ¬¡ç¼–å†™ï¼Œå¤šå¤„è¿è¡Œã€‚LSP åè®®çš„æ’ä»¶å­˜åœ¨ä¸¤ä¸ªéƒ¨åˆ†
<ul><li>LSP å®¢æˆ·ç«¯ï¼Œå®ƒç”¨æ¥å’Œ VSCode ç¯å¢ƒäº¤äº’ã€‚é€šå¸¸ç”¨ JS/TS å†™æˆï¼Œå¯ä»¥è·å–åˆ° VSCode APIï¼Œå› æ­¤å¯ä»¥ç›‘å¬ VSCode ä¼ è¿‡æ¥çš„äº‹ä»¶ï¼Œæˆ–è€…å‘ VSCode å‘é€é€šçŸ¥ã€‚
<ul><li>åˆ›å»ºè¯­è¨€æœåŠ¡å™¨ï¼›</li> <li>ä½œä¸º VSCode å’Œè¯­è¨€æœåŠ¡å™¨ä¹‹é—´æ²Ÿé€šçš„æ¡¥æ¢ã€‚</li></ul></li> <li>è¯­è¨€æœåŠ¡å™¨(å¦‚ï¼štsserver)ã€‚å®ƒæ˜¯è¯­è¨€ç‰¹æ€§çš„æ ¸å¿ƒå®ç°ï¼Œç”¨æ¥å¯¹æ–‡æœ¬è¿›è¡Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰è¯Šæ–­ç­‰ã€‚å®ƒåœ¨ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ä¸­è¿è¡Œã€‚
<ul><li>TypeScript æ’ä»¶çš„è¯­è¨€æœåŠ¡å™¨å…¶å®å°±æ˜¯ä¸€ä¸ªåœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­è¿è¡Œçš„ tsserver.js æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ typescript æºç çš„ src æ–‡ä»¶ä¸‹é¢æ‰¾åˆ° tsserver æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç¼–è¯‘ä¹‹åï¼Œå°±æ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­çš„ node_modules/typescript/lib/tsserver.js æ–‡ä»¶ã€‚tsserver æ¥æ”¶æ’ä»¶å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„å„ç§æ¶ˆæ¯ï¼Œå°†æ–‡ä»¶äº¤ç»™ typescript-core åˆ†æå¤„ç†ï¼Œå¤„ç†ç»“æœå›ä¼ ç»™å®¢æˆ·ç«¯åï¼Œå†ç”±æ’ä»¶å®¢æˆ·ç«¯äº¤ç»™ VSCodeï¼Œè¿›è¡Œå±•ç¤º/æ‰§è¡ŒåŠ¨ä½œç­‰</li></ul></li></ul></li></ul> <p>TypeScript ä¸ babelï¼š</p> <ul><li><p>é”™è¯¯æç¤ºåŠŸèƒ½ç”± VSCode æä¾›ã€‚ä½†æ˜¯æˆ‘ä»¬çš„ä»£ç éœ€è¦ç»è¿‡ç¼–è¯‘ä¹‹åæ‰èƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ˜¯ä»€ä¹ˆä¸œè¥¿å¤„ç†äº† TypeScript å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ Babel</p></li> <li><p>Babel æœ€åˆæ˜¯è®¾è®¡ç”¨æ¥å°† ECMAScript 2015+çš„ä»£ç è½¬æ¢æˆåå‘å…¼å®¹çš„ä»£ç ï¼Œä¸»è¦å·¥ä½œå°±æ˜¯è¯­æ³•è½¬æ¢å’Œ polyfillã€‚åªè¦ Babel èƒ½è¯†åˆ« TypeScript è¯­æ³•ï¼Œå°±èƒ½å¯¹ TypeScript è¯­æ³•è¿›è¡Œè½¬æ¢ã€‚å› æ­¤ï¼ŒBabel å’Œ TypeScript å›¢é˜Ÿè¿›è¡Œäº†é•¿è¾¾ä¸€å¹´çš„åˆä½œï¼Œæ¨å‡ºäº†<code>@babel/preset-typescript</code> è¿™ä¸ªæ’ä»¶ã€‚ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œå°±èƒ½å°† TypeScript è½¬æ¢æˆ JavaScript</p> <ul><li>Babel æœ‰ä¸¤ç§å¸¸è§ä½¿ç”¨åœºæ™¯ï¼Œä¸€ç§æ˜¯ç›´æ¥åœ¨ CLI ä¸­è°ƒç”¨ babel å‘½ä»¤ï¼Œå¦ä¸€ç§æ˜¯å°† Babel å’Œæ‰“åŒ…å·¥å…·ï¼ˆå¦‚ webpackï¼‰ç»“åˆä½¿ç”¨ã€‚</li> <li>webpack ä¸­ä½¿ç”¨ babel å¤„ç† typescriptã€‚åœ¨ webpack ä¸­ä½¿ç”¨@babel/preset-typescript æ’ä»¶ï¼Œåªéœ€è¦ä¸¤æ­¥ã€‚
<ul><li>1ã€é¦–å…ˆæ˜¯é…ç½® babelï¼Œè®©å®ƒåŠ è½½@babel/preset-typescript æ’ä»¶</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-typescript&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>2ã€é…ç½® webpackï¼Œè®© babel èƒ½å¤„ç† ts æ–‡ä»¶</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">'rules'</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.ts$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">'label-loader'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>3ã€è¿™æ ·çš„è¯ï¼Œwebpack åœ¨é‡åˆ°.ts æ–‡ä»¶æ—¶ï¼Œä¼šè°ƒç”¨ label-loader å¤„ç†è¿™ä¸ªæ–‡ä»¶ã€‚label-loader å°†è¿™ä¸ªæ–‡ä»¶è½¬æ¢æˆæ ‡å‡† JavaScript æ–‡ä»¶åï¼Œå°†å¤„ç†ç»“æœäº¤è¿˜ webpackï¼Œwebpack ç»§ç»­åé¢çš„æµç¨‹ã€‚</li></ul></li></ul></li> <li><p>label-loaderï¼šå°† TypeScript æ–‡ä»¶è½¬æ¢æˆæ ‡å‡† JavaScriptï¼Ÿç›´æ¥åˆ é™¤æ‰ç±»å‹æ³¨è§£ã€‚</p> <ul><li>è§£æï¼šå°†åŸä»£ç å¤„ç†ä¸º ASTã€‚å¯¹åº” babel-parse</li> <li>è½¬æ¢ï¼šå¯¹ AST è¿›è¡Œéå†ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­å¯¹èŠ‚ç‚¹è¿›è¡Œæ·»åŠ ã€æ›´æ–°ã€ç§»é™¤ç­‰æ“ä½œã€‚å¯¹åº” babel-tranverseã€‚</li> <li>ç”Ÿæˆï¼šæŠŠè½¬æ¢åçš„ AST è½¬æ¢æˆå­—ç¬¦ä¸²å½¢å¼çš„ä»£ç ï¼ŒåŒæ—¶åˆ›å»ºæºç æ˜ å°„ã€‚å¯¹åº” babel-generatorã€‚</li></ul></li> <li><p>æ ¡éªŒæäº¤åˆ°ä»£ç ä»“åº“çš„ä»£ç ï¼ˆVSCode åªæç¤ºç±»å‹é”™è¯¯ï¼Œbabel å®Œå…¨ä¸æ ¡éªŒç±»å‹ï¼‰</p> <ul><li>æ‰§è¡Œï¼š<code>tsc --noEmit --skipLibCheck</code>ã€‚tsc å‘½ä»¤å¯¹åº”çš„ TypeScript ç‰ˆæœ¬ï¼Œå°±æ˜¯ node_modules ä¸‹å®‰è£…çš„ TypeScript çš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬å¯èƒ½è·Ÿ VSCode çš„ TypeScript æ’ä»¶ä½¿ç”¨çš„ tsserver çš„ç‰ˆæœ¬ä¸ä¸€è‡´ã€‚è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ²¡æœ‰é—®é¢˜ï¼ŒVSCode å†…ç½®çš„ TypeScript ç‰ˆæœ¬ä¸€èˆ¬éƒ½æ¯”é¡¹ç›®ä¸­ä¾èµ–çš„ TypeScript ç‰ˆæœ¬é«˜ï¼ŒTypeScript æ˜¯åå‘å…¼å®¹çš„ã€‚å¦‚æœé‡åˆ° VSCode ç±»å‹æ£€æŸ¥æ­£å¸¸ï¼Œä½†æ˜¯ tsc å‘½ä»¤æ£€æŸ¥å‡ºé”™ï¼Œæˆ–ç›¸åçš„æƒ…å†µï¼Œå¯ä»¥ä»ç‰ˆæœ¬æ–¹é¢æ’æŸ¥ä¸€ä¸‹ã€‚</li> <li>é…åˆ huskyï¼Œåœ¨ gitcommit ä¹‹å‰å…ˆæ‰§è¡Œä¸€ä¸‹è¿™ä¸ªå‘½ä»¤ï¼Œæ£€æŸ¥ä¸€ä¸‹ç±»å‹ã€‚å¦‚æœç±»å‹éªŒè¯ä¸é€šè¿‡å°±ä¸æ‰§è¡Œ git commit</li></ul></li></ul> <h2 id="_17"><a href="#_17" class="header-anchor">#</a> 17</h2> <h3 id="é“¾å¼è°ƒç”¨"><a href="#é“¾å¼è°ƒç”¨" class="header-anchor">#</a> é“¾å¼è°ƒç”¨</h3> <p><a href="https://mp.weixin.qq.com/s/k8OFSFGQ-FdNLFGCoDyIHg" target="_blank" rel="noopener noreferrer">ms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>return this</code>å®ç°ï¼ŒæŠŠå¯¹è±¡å†è¿”å›å›æ¥ï¼Œå¯¹è±¡å°±å¯ä»¥ç»§ç»­è°ƒç”¨æ–¹æ³•ï¼Œå®ç°é“¾å¼æ“ä½œäº†ã€‚</p> <ul><li><p>Object.keys() æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªç”±ä¸€ä¸ªç»™å®šå¯¹è±¡çš„è‡ªèº«å¯æšä¸¾å±æ€§ç»„æˆçš„æ•°ç»„ï¼Œæ•°ç»„ä¸­å±æ€§åçš„æ’åˆ—é¡ºåºå’Œæ­£å¸¸å¾ªç¯éå†è¯¥å¯¹è±¡æ—¶è¿”å›çš„é¡ºåºä¸€è‡´</p></li> <li><p>Reflect.ownKeys() :ç›¸å½“äº Object.getOwnPropertyNames(target) concat(Object.getOwnPropertySymbols(target)</p></li> <li><p>Object.getOwnPropertySymbols() æ–¹æ³•è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«çš„æ‰€æœ‰ Symbol å±æ€§çš„æ•°ç»„</p></li> <li><p>Object.getOwnPropertyNames() æ–¹æ³•è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬ Symbol å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å®ç°ä¸€ä¸ªfindå‡½æ•°ï¼Œå¹¶ä¸”findå‡½æ•°èƒ½å¤Ÿæ»¡è¶³ä¸‹åˆ—æ¡ä»¶</span>

<span class="token comment">// titleæ•°æ®ç±»å‹ä¸ºstring|null</span>
<span class="token comment">// userIdä¸ºä¸»é”®ï¼Œæ•°æ®ç±»å‹ä¸ºnumber</span>

<span class="token comment">// åŸå§‹æ•°æ®</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'title1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'other'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'title2'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment">// æŸ¥æ‰¾dataä¸­ï¼Œç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ’åº</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d$</span><span class="token regex-delimiter">/</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">'userId'</span><span class="token punctuation">,</span> <span class="token string">'desc'</span><span class="token punctuation">)</span>

<span class="token comment">// è¾“å‡º</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'title2'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'title1'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">origin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> origin<span class="token punctuation">,</span>
    <span class="token function-variable function">where</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">searchObj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> keys <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>searchObj<span class="token punctuation">)</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span>
          searchObj<span class="token punctuation">[</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">orderBy</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> sorter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> sorter <span class="token operator">===</span> <span class="token string">'desc'</span> <span class="token operator">?</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">-</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">:</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨"><a href="#åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨" class="header-anchor">#</a> åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨</h3> <p>å¯ä»¥é€šè¿‡ map æ¥è¿›è¡Œæš‚å­˜ï¼Œå½“å€¼æ˜¯å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†å¯¹è±¡å­˜åœ¨ map ä¸­ï¼Œå¾ªç¯åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±æ˜¯å­˜åœ¨ç¯äº†ï¼ŒåŒæ—¶è¿›è¡Œé€’å½’è°ƒç”¨ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isHasCircle</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> hasCircle <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

    keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">==</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          hasCircle <span class="token operator">=</span> <span class="token boolean">true</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
          <span class="token function">loop</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">loop</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

  <span class="token keyword">return</span> hasCircle
<span class="token punctuation">}</span>
</code></pre></div><h3 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="header-anchor">#</a> é«˜é˜¶å‡½æ•°</h3> <p>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ï¼šåˆç§°éƒ¨åˆ†æ±‚å€¼ï¼ˆPartial Evaluationï¼‰ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„åŸå‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆåŸå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œæ–°å‡½æ•°èƒ½å¤Ÿæ¥å—ä½™ä¸‹çš„å‚æ•°ï¼Œæœ€åè¿”å›åŒåŸå‡½æ•°ä¸€æ ·çš„ç»“æœã€‚æ ¸å¿ƒæ€æƒ³æ˜¯æŠŠå¤šå‚æ•°ä¼ å…¥çš„å‡½æ•°æ‹†æˆå•ï¼ˆæˆ–éƒ¨åˆ†ï¼‰å‚æ•°å‡½æ•°ï¼Œå†…éƒ¨å†è¿”å›è°ƒç”¨ä¸‹ä¸€ä¸ªå•ï¼ˆæˆ–éƒ¨åˆ†ï¼‰å‚æ•°å‡½æ•°ï¼Œä¾æ¬¡å¤„ç†å‰©ä½™çš„å‚æ•°ã€‚</p> <p>æŸ¯é‡ŒåŒ–æœ‰ 3 ä¸ªå¸¸è§ä½œç”¨ï¼š</p> <ul><li>å‚æ•°å¤ç”¨</li> <li>æå‰è¿”å›</li> <li>å»¶è¿Ÿè®¡ç®—/è¿è¡Œ</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES5 æ–¹å¼</span>
<span class="token keyword">function</span> <span class="token function">currying</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> rest1 <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
  rest1<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> rest2 <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> rest1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>rest2<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ES6 æ–¹å¼</span>
<span class="token keyword">function</span> <span class="token function">currying</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>rest1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>rest2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> rest1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>rest2<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>bindï¼šbind() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨ bind() è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„ this è¢« bind çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šï¼Œå…¶ä½™çš„å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚</p> <p>åå‡½æ•°æ˜¯åˆ›å»ºä¸€ä¸ªè°ƒç”¨å¦å¤–ä¸€ä¸ªéƒ¨åˆ†ï¼ˆå‚æ•°æˆ–å˜é‡å·²é¢„åˆ¶çš„å‡½æ•°ï¼‰çš„å‡½æ•°ï¼Œå‡½æ•°å¯ä»¥æ ¹æ®ä¼ å…¥çš„å‚æ•°æ¥ç”Ÿæˆä¸€ä¸ªçœŸæ­£æ‰§è¡Œçš„å‡½æ•°ã€‚å…¶æœ¬èº«ä¸åŒ…æ‹¬æˆ‘ä»¬çœŸæ­£éœ€è¦çš„é€»è¾‘ä»£ç ï¼Œåªæ˜¯æ ¹æ®ä¼ å…¥çš„å‚æ•°è¿”å›å…¶ä»–çš„å‡½æ•°ï¼Œè¿”å›çš„å‡½æ•°ä¸­æ‰æœ‰çœŸæ­£çš„å¤„ç†é€»è¾‘æ¯”å¦‚ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">isType</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">returnfunction</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    returnObject<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[object </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> isString <span class="token operator">=</span> <span class="token function">isType</span><span class="token punctuation">(</span><span class="token string">'String'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> isFunction <span class="token operator">=</span> <span class="token function">isType</span><span class="token punctuation">(</span><span class="token string">'Function'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="æŸ¯é‡ŒåŒ–"><a href="#æŸ¯é‡ŒåŒ–" class="header-anchor">#</a> æŸ¯é‡ŒåŒ–</h3> <ul><li>æŸ¯é‡ŒåŒ–æ˜¯æŠŠä¸€ä¸ªæ¥å— n ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç”±åŸæœ¬çš„ä¸€æ¬¡æ€§ä¼ é€’æ‰€æœ‰å‚æ•°å¹¶æ‰§è¡Œå˜æˆäº†å¯ä»¥åˆ†å¤šæ¬¡æ¥å—å‚æ•°å†æ‰§è¡Œï¼Œä¾‹å¦‚ï¼šadd = (x, y, z) =&gt; x + y + zâ†’ curryAdd = x =&gt; y =&gt; z =&gt; x + y + zï¼›</li> <li>åå‡½æ•°å›ºå®šäº†å‡½æ•°çš„æŸä¸ªéƒ¨åˆ†ï¼Œé€šè¿‡ä¼ å…¥çš„å‚æ•°æˆ–è€…æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°æ¥æ¥å—å‰©ä½™çš„å‚æ•°ï¼Œæ•°é‡å¯èƒ½æ˜¯ä¸€ä¸ªä¹Ÿå¯èƒ½æ˜¯å¤šä¸ªï¼›</li></ul> <h3 id="æŠ€æœ¯è°ƒç ”"><a href="#æŠ€æœ¯è°ƒç ”" class="header-anchor">#</a> æŠ€æœ¯è°ƒç ”</h3> <ul><li><p>ç°å­˜æ–¹æ¡ˆ</p></li> <li><p>å¯¹æ¯”ç¯èŠ‚ï¼šechartsã€three.jsã€antdvã€d3ã€chart.js</p></li> <li><p>åŸç†ï¼šecharts æ˜¯ svg/canvas åŒå¼•æ“ï¼Œè€Œ three.js æ›´å¤šçš„æ˜¯åŸºäº webgl</p></li> <li><p>æ´»è·ƒåº¦ï¼šgithub star æ•°ã€ä»£ç æ›´æ–°é¢‘ç‡ã€issue å“åº”é€Ÿåº¦ã€æ–‡æ¡£å®Œæ•´åº¦ã€åœ¨çº¿ç¤ºä¾‹ã€å®˜æ–¹å›¢é˜Ÿå’Œç¤¾åŒºçš„è§„æ¨¡</p></li> <li><p>ç”Ÿäº§ç¯å¢ƒå¯ç”¨æ€§ï¼šweb åœ¨çº¿ç¼–è¾‘å™¨ï¼ŒACE å’Œ CodeMirrorï¼ŒCodeMirror çš„å—æ¬¢è¿ç¨‹åº¦æ›´é«˜ï¼Œç¾½é›€ã€github éƒ½æ˜¯åŸºäºå…¶æ‰“é€ è‡ªå·±çš„åœ¨çº¿ç¼–è¾‘å™¨</p></li> <li><p>åŠŸèƒ½ï¼šå¯è§†åŒ–æ˜¯å…³ç³»æ•°æ®ï¼ˆæ ‘çŠ¶å›¾ã€è„‘å›¾ã€æµç¨‹å›¾ï¼‰ï¼Œantv-G6ï¼›3D ç¯ç»•åœ°çƒæ•ˆæœæ¥è¯´ï¼Œechartsã€three.jsï¼›</p></li> <li><p>å…¼å®¹æ€§ï¼šæµè§ˆå™¨çš„æœ€ä½å…¼å®¹ç‰ˆæœ¬ã€æ˜¯å¦æ¶‰åŠ pc ç«¯/ç§»åŠ¨ç«¯</p></li> <li><p>æ€§èƒ½ï¼šåŒ…ä½“ç§¯ã€æ¸²æŸ“é€Ÿåº¦ã€‚å¯¹äºç§»åŠ¨ç«¯ gzip ä¹‹åè¶…è¿‡ 200kï¼Œpc ç«¯ gzip ä¹‹åè¶…è¿‡ 500kï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯ä½“ç§¯æœ‰ç‚¹å¤§äº†</p></li> <li><p>å¯ç»´æŠ¤æ€§ï¼šå·¥ä½œé‡ã€å­¦ä¹ /ç»´æŠ¤æˆæœ¬ã€å¯¹äºä¸šåŠ¡çš„ä¾µå…¥åº¦ã€æœ€ä½³å®è·µ</p></li> <li><p>ç¼ºé™·åŠéšæ‚£</p></li> <li><p>æœ€åäº§å‡ºæ–‡æ¡£</p> <ul><li>1ã€éœ€æ±‚èƒŒæ™¯</li> <li>2ã€ä¸€å¥è¯ç»“è®º</li> <li>3ã€ç°å­˜æ–¹æ¡ˆå¯¹æ¯”è®°å½•</li> <li>4ã€å‚è€ƒæ–‡æ¡£é“¾æ¥</li></ul></li> <li><p><a href="https://juejin.cn/post/6901845776880795662#heading-15" target="_blank" rel="noopener noreferrer">æŠ€æœ¯è°ƒç ”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="_16"><a href="#_16" class="header-anchor">#</a> 16</h2> <h3 id="æ¸²æŸ“æ€§èƒ½"><a href="#æ¸²æŸ“æ€§èƒ½" class="header-anchor">#</a> æ¸²æŸ“æ€§èƒ½</h3> <p>HTML å’Œ CSS å®šä¹‰äº†æ¸²æŸ“çš„å†…å®¹ï¼Œè€Œ JavaScript å¯ä»¥å¹²é¢„å†…å®¹å’Œæ¸²æŸ“è¿‡ç¨‹ã€‚</p> <p>æ¸²æŸ“è§†è§’æ‹†åˆ†ä¸ºï¼šæ¸²æŸ“å†…å®¹ã€æ¸²æŸ“è¿‡ç¨‹ã€JavaScript å¹²é¢„</p> <p>é€šè¿‡ç½‘ç»œ I/O æˆ–ç£ç›˜ I/O ï¼ˆç¼“å­˜ï¼‰åŠ è½½ HTML CSS ä¹‹åçš„é“¾è·¯ä¸ºï¼šè§£ç  HTMLã€CSS æ–‡ä»¶ï¼ˆGZip æ–‡æœ¬ä¼ è¾“å‰å‹ç¼©ç­‰ï¼‰ã€å¤„ç†è¿‡ç¨‹ï¼ˆHTMLã€CSS Passingï¼‰ã€DOM Tree æ„å»ºã€Style å†…è”ã€å¸ƒå±€ã€åˆæˆå™¨ã€ç»˜åˆ¶ï¼Œè¿™é‡Œæ¶‰åŠæµè§ˆå™¨å¼•æ“è¿›è¡Œå¤§é‡çš„è§£æå’Œè®¡ç®—ç­‰å¤„ç†è¿‡ç¨‹ï¼Œä¸ºæ­¤ï¼Œéœ€è¦å¼•å…¥ä¸€ä¸ªæ¦‚å¿µï¼šå…³é”®æ¸²æŸ“è·¯å¾„ï¼ˆCritical Rendering Pathï¼‰ï¼Œç®€ç§°ï¼šCRPã€‚<code>https://mp.weixin.qq.com/s/cpSBcCHB7lYYGq1PE26qtg</code></p> <p>CRP çš„æ­¥éª¤ï¼šã€å…³é”®æ¸²æŸ“è·¯å¾„ CRPã€‘</p> <ul><li><p>åœ°å€æ è¾“å…¥ urlï¼Œrequest page -&gt; get Pageï¼Œä¸€æ—¦æµè§ˆå™¨å¾—åˆ°å“åº”ï¼Œå®ƒå°±å¼€å§‹è§£æå®ƒã€‚å½“å®ƒé‡åˆ°ä¸€ä¸ªä¾èµ–å…³ç³»æ—¶ï¼Œå®ƒå°±ä¼šå°è¯•ä¸‹è½½å®ƒ</p></li> <li><p>å¤„ç† HTML æ ‡è®°å¹¶æ„å»º DOM æ ‘ï¼šå¦‚æœå®ƒæ˜¯ä¸€ä¸ªæ ·å¼æ–‡ä»¶ï¼ˆCSS æ–‡ä»¶ï¼‰ï¼Œæµè§ˆå™¨å°±å¿…é¡»åœ¨æ¸²æŸ“é¡µé¢ä¹‹å‰å®Œå…¨è§£æå®ƒï¼ˆ<code>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¯´CSSå…·æœ‰æ¸²æŸ“é˜»ç¢æ€§</code>ï¼‰</p></li> <li><p>å¤„ç† CSS æ ‡è®°å¹¶æ„å»º CSSOM æ ‘ï¼šå¦‚æœå®ƒæ˜¯ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼ˆJavaScript æ–‡ä»¶ï¼‰ï¼Œæµè§ˆå™¨å¿…é¡»ï¼š åœæ­¢è§£æï¼Œä¸‹è½½è„šæœ¬ï¼Œå¹¶è¿è¡Œå®ƒã€‚åªæœ‰åœ¨è¿™ä¹‹åï¼Œå®ƒæ‰èƒ½ç»§ç»­è§£æï¼Œå› ä¸º JavaScript è„šæœ¬å¯ä»¥æ”¹å˜é¡µé¢å†…å®¹ï¼ˆç‰¹åˆ«æ˜¯ HTMLï¼‰ã€‚ï¼ˆ<code>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¯´JavaScripté˜»å¡è§£æ</code>ï¼‰</p></li> <li><p>å°† DOM æ ‘å’Œ CSSOM æ ‘åˆå¹¶å¤§ä¸€ä¸ªæ¸²æŸ“æ ‘ï¼šå»ºç«‹äº† DOM æ ‘å’Œ CSSOM æ ‘ï¼Œç»“åˆåœ¨ä¸€èµ·å°±å¾—åˆ°äº†æ¸²æŸ“æ ‘</p></li> <li><p>æ ¹æ®æ¸²æŸ“æ ‘æ¥ç”Ÿæˆå¸ƒå±€ flowï¼šå°†æ¸²æŸ“æ ‘è½¬æ¢ä¸ºå¸ƒå±€ã€‚</p></li> <li><p>å°†å„ä¸ªèŠ‚ç‚¹å¸ƒå±€ç»˜åˆ¶ paint åˆ°å±å¹•ä¸Šï¼šæ ¹æ®æµè§ˆå™¨åœ¨å‰å‡ ä¸ªé˜¶æ®µè®¡ç®—å‡ºæ¥çš„æ•°æ®å¯¹åƒç´ è¿›è¡Œå­—é¢ä¸Šçš„ç€è‰²</p></li></ul> <p>ä¼˜åŒ–é¡µé¢çš„å…³é”®æ¸²æŸ“è·¯å¾„ï¼ˆCritical Rendering Pathï¼‰ä¸‰ä»¶äº‹ï¼š</p> <ul><li><p>å‡å°‘å…³é”®èµ„æºè¯·æ±‚æ•°: å‡å°ä½¿ç”¨é˜»å¡çš„èµ„æºï¼ˆCSS å’Œ JSï¼‰ï¼Œæ³¨æ„ï¼Œå¹¶éæ‰€æœ‰èµ„æºæ˜¯å…³é”®èµ„æºï¼Œå°¤å…¶æ˜¯ CSS å’Œ JSï¼ˆæ¯”å¦‚ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„ CSSï¼Œä½¿ç”¨å¼‚æ­¥çš„ JS å°±ä¸å…³é”®äº†ï¼‰</p></li> <li><p>å‡å°‘å…³é”®èµ„æºå¤§å°ï¼šä½¿ç”¨å„ç§æ‰‹æ®µï¼Œæ¯”å¦‚å‡å°‘ã€å‹ç¼©å’Œç¼“å­˜å…³é”®èµ„æºï¼Œæ•°æ®é‡è¶Šå°ï¼Œå¼•æ“è®¡ç®—å¤æ‚åº¦è¶Šå°</p></li> <li><p>ç¼©çŸ­å…³é”®æ¸²æŸ“è·¯å¾„é•¿åº¦</p> <ul><li>å¯¹ CRP è¿›è¡Œåˆ†æå’Œç‰¹æ€§æè¿°ï¼Œè®°å½• å…³é”®èµ„æºæ•°é‡ã€å…³é”®èµ„æºå¤§å° å’Œ CRP é•¿åº¦</li> <li>æœ€å¤§é™åº¦å‡å°‘å…³é”®èµ„æºçš„æ•°é‡ï¼šåˆ é™¤å®ƒä»¬ï¼Œå»¶è¿Ÿå®ƒä»¬çš„ä¸‹è½½ï¼Œå°†å®ƒä»¬æ ‡è®°ä¸ºå¼‚æ­¥ç­‰</li> <li>ä¼˜åŒ–å…³é”®èµ„æºå­—èŠ‚æ•°ä»¥ç¼©çŸ­ä¸‹è½½æ—¶é—´ï¼ˆå¾€è¿”æ¬¡æ•°ï¼‰ï¼Œå‡å°‘ CRP é•¿åº¦</li> <li>ä¼˜åŒ–å…¶ä½™å…³é”®èµ„æºçš„åŠ è½½é¡ºåºï¼Œéœ€è¦å°½æ—©ä¸‹è½½æ‰€æœ‰å…³é”®èµ„æºï¼Œä»¥ç¼©çŸ­ CRP é•¿åº¦</li> <li>æ£€æµ‹ CRP ä¸­ä¸€äº›é‡è¦æŒ‡æ ‡ï¼ˆå…³é”®èµ„æºæ•°é‡ã€å…³é”®èµ„æºå¤§å° ã€CRP é•¿åº¦ç­‰ç­‰ï¼‰ï¼šåœ¨ Chrome ä¸­ä½¿ç”¨ Lighthouse æ’ä»¶</li></ul></li></ul> <p>é‡ç»˜ä¸ä¸€å®šéœ€è¦é‡æ’ï¼Œé‡æ’å¿…ç„¶ä¼šå¯¼è‡´é‡ç»˜ã€‚</p> <ul><li>é‡æ’ repaintï¼šå½“æ¸²æŸ“æ ‘çš„ä¸€éƒ¨åˆ†å¿…é¡»æ›´æ–°å¹¶ä¸”èŠ‚ç‚¹çš„å°ºå¯¸å‘ç”Ÿäº†å˜åŒ–ï¼Œæµè§ˆå™¨ä¼šä½¿æ¸²æŸ“æ ‘ä¸­å—åˆ°å½±å“çš„éƒ¨åˆ†å¤±æ•ˆï¼Œå¹¶é‡æ–°æ„é€ æ¸²æŸ“æ ‘ã€‚ï¼ˆå°ºå¯¸ã€ä½ç½®ã€å¢åˆ  DOMã€æµè§ˆå™¨çª—å£å˜åŒ–ã€set styleï¼‰</li> <li>é‡ç»˜ reflowï¼šæ˜¯åœ¨ä¸€ä¸ªå…ƒç´ çš„å¤–è§‚è¢«æ”¹å˜æ‰€è§¦å‘çš„æµè§ˆå™¨è¡Œä¸ºï¼Œæµè§ˆå™¨ä¼šæ ¹æ®å…ƒç´ çš„æ–°å±æ€§é‡æ–°ç»˜åˆ¶ï¼Œä½¿å…ƒç´ å‘ˆç°æ–°çš„å¤–è§‚ã€‚ï¼ˆposition å±æ€§ä¸º absolute æˆ– fixed çš„å…ƒç´ ï¼Œé‡æ’å¼€é”€æ¯”è¾ƒå°ï¼Œä¸ç”¨è€ƒè™‘å®ƒå¯¹å…¶ä»–å…ƒç´ çš„å½±å“ï¼‰</li></ul> <h3 id="é‡æ’ã€é‡ç»˜ã€åˆæˆ"><a href="#é‡æ’ã€é‡ç»˜ã€åˆæˆ" class="header-anchor">#</a> é‡æ’ã€é‡ç»˜ã€åˆæˆ</h3> <h4 id="æµè§ˆå™¨æ¸²æŸ“åŸç†"><a href="#æµè§ˆå™¨æ¸²æŸ“åŸç†" class="header-anchor">#</a> æµè§ˆå™¨æ¸²æŸ“åŸç†</h4> <ul><li>HTML è¢« HTML è§£æå™¨è§£ææˆ DOM Tree</li> <li>CSS åˆ™è¢« CSS è§£æå™¨è§£ææˆ CSSOM Tree</li> <li>DOM Tree å’Œ CSSOM Tree è§£æå®Œæˆåï¼Œè¢«é™„åŠ åˆ°ä¸€èµ·ï¼Œå½¢æˆæ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰</li> <li>å¸ƒå±€ï¼Œæ ¹æ®æ¸²æŸ“æ ‘è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å‡ ä½•ä¿¡æ¯ç”Ÿæˆå¸ƒå±€æ ‘ï¼ˆLayout Treeï¼‰</li> <li>å¯¹å¸ƒå±€æ ‘è¿›è¡Œåˆ†å±‚ï¼Œå¹¶ç”Ÿæˆåˆ†å±‚æ ‘ï¼ˆLayer Treeï¼‰</li> <li>ä¸ºæ¯ä¸ªå›¾å±‚ç”Ÿæˆç»˜åˆ¶åˆ—è¡¨</li> <li>æ¸²æŸ“ç»˜åˆ¶(Paint)ã€‚æ ¹æ®è®¡ç®—å¥½çš„ç»˜åˆ¶åˆ—è¡¨ä¿¡æ¯ç»˜åˆ¶æ•´ä¸ªé¡µé¢ï¼Œå¹¶å°†å…¶æäº¤åˆ°åˆæˆçº¿ç¨‹</li> <li>åˆæˆçº¿ç¨‹å°†å›¾å±‚åˆ†æˆå›¾å—ï¼Œå¹¶åœ¨å…‰æ …åŒ–çº¿ç¨‹æ± ä¸­å°†å›¾å—è½¬æ¢æˆä½å›¾ï¼Œå‘é€ç»˜åˆ¶å›¾å—å‘½ä»¤ DrawQuad ç»™æµè§ˆå™¨è¿›ç¨‹</li> <li>æµè§ˆå™¨è¿›ç¨‹æ ¹æ® DrawQuad æ¶ˆæ¯ç”Ÿæˆé¡µé¢ï¼Œå¹¶æ˜¾ç¤ºåˆ°æ˜¾ç¤ºå™¨ä¸Š</li></ul> <h4 id="é‡æ’"><a href="#é‡æ’" class="header-anchor">#</a> é‡æ’</h4> <p>é€šè¿‡ JS æˆ– css æ”¹å˜äº†å…ƒç´ çš„å®½åº¦ã€é«˜åº¦ç­‰ï¼Œä¿®æ”¹äº†å…ƒç´ çš„å‡ ä½•ä½ç½®å±æ€§ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šè§¦å‘é‡æ–°å¸ƒå±€ï¼Œè§£æä¹‹åçš„ä¸€ç³»åˆ—å­é˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«é‡æ’ã€‚ä¹Ÿå°±æ˜¯ä¸Šè¿° Layout Treeï¼Œæ•…é‡æ’éœ€è¦æ›´æ–°å®Œæ•´çš„æ¸²æŸ“æµæ°´çº¿ï¼Œæ‰€ä»¥å¼€é”€ä¹Ÿæ˜¯æœ€å¤§çš„</p> <h4 id="é‡ç»˜"><a href="#é‡ç»˜" class="header-anchor">#</a> é‡ç»˜</h4> <p>å¦‚æœä¿®æ”¹äº†å…ƒç´ çš„èƒŒæ™¯é¢œè‰²ï¼Œå¹¶æ²¡æœ‰å¼•èµ·å‡ ä½•ä½ç½®çš„å˜æ¢ï¼Œæ‰€ä»¥å°±ç›´æ¥è¿›å…¥äº†ç»˜åˆ¶é˜¶æ®µï¼Œç„¶åæ‰§è¡Œä¹‹åçš„ä¸€ç³»åˆ—å­é˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«é‡ç»˜ã€‚ç›¸è¾ƒäºé‡æ’æ“ä½œï¼Œé‡ç»˜çœå»äº†å¸ƒå±€å’Œåˆ†å±‚é˜¶æ®µï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡ä¼šæ¯”é‡æ’æ“ä½œè¦é«˜ä¸€äº›</p> <h4 id="åˆæˆ"><a href="#åˆæˆ" class="header-anchor">#</a> åˆæˆ</h4> <p>åˆæˆæ˜¯ä¸€ç§å°†é¡µé¢çš„å„ä¸ªéƒ¨åˆ†åˆ†ç¦»æˆå±‚ï¼ˆLayer Treeï¼‰ï¼Œåˆ†åˆ«å°†å®ƒä»¬æ …æ ¼åŒ–ï¼Œç„¶ååœ¨ç§°ä¸ºâ€œåˆæˆçº¿ç¨‹â€çš„ä¸­ç»„åˆä¸ºé¡µé¢çš„æŠ€æœ¯</p> <p>åœ¨ GUI æ¸²æŸ“çº¿ç¨‹åæ‰§è¡Œï¼Œå°† GUI æ¸²æŸ“çº¿ç¨‹ç”Ÿæˆçš„ç»˜åˆ¶åˆ—è¡¨è½¬æ¢ä¸ºä½å›¾,ç„¶åå‘é€ç»˜åˆ¶å›¾å—å‘½ä»¤ DrawQuad ç»™æµè§ˆå™¨è¿›ç¨‹ï¼Œæµè§ˆå™¨è¿›ç¨‹æ ¹æ® DrawQuad æ¶ˆæ¯ç”Ÿæˆé¡µé¢ï¼Œå°†é¡µé¢æ˜¾ç¤ºåˆ°æ˜¾ç¤ºå™¨ä¸Š</p> <p>æˆ‘ä»¬ä½¿ç”¨äº† CSS çš„ transform æ¥å®ç°åŠ¨ç”»æ•ˆæœï¼Œé¿å¼€äº†é‡æ’å’Œé‡ç»˜é˜¶æ®µï¼Œç›´æ¥åœ¨éä¸»çº¿ç¨‹ä¸Šæ‰§è¡ŒåˆæˆåŠ¨ç”»æ“ä½œã€‚è¿™æ ·çš„æ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå› ä¸ºæ˜¯åœ¨éä¸»çº¿ç¨‹ä¸Šåˆæˆï¼Œå¹¶æ²¡æœ‰å ç”¨ä¸»çº¿ç¨‹çš„èµ„æºï¼Œå¦å¤–ä¹Ÿé¿å¼€äº†å¸ƒå±€å’Œç»˜åˆ¶ä¸¤ä¸ªå­é˜¶æ®µï¼Œæ‰€ä»¥ç›¸å¯¹äºé‡ç»˜å’Œé‡æ’ï¼Œåˆæˆèƒ½å¤§å¤§æå‡ç»˜åˆ¶æ•ˆç‡</p> <p><a href="https://mp.weixin.qq.com/s/57aMCVDjuVswEFFep3omLQ" target="_blank" rel="noopener noreferrer">é‡æ’ã€é‡ç»˜ã€åˆæˆ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="tab-è‡ªåŠ¨å¸é¡¶å¤šæ»šåŠ¨å®¹å™¨"><a href="#tab-è‡ªåŠ¨å¸é¡¶å¤šæ»šåŠ¨å®¹å™¨" class="header-anchor">#</a> tab è‡ªåŠ¨å¸é¡¶å¤šæ»šåŠ¨å®¹å™¨</h3> <ul><li>1.å¤–å±‚æ»šåŠ¨å®¹å™¨ä¸ tab å®¹å™¨æ»šåŠ¨æ˜¯ä¸€ä½“åŒ–ï¼Œæ»šåŠ¨è¿‡æ¸¡è¦è‡ªç„¶</li> <li>2.tabbar åœ¨æ»šåŠ¨è‡³é¡¶æ—¶éœ€è‡ªåŠ¨å¸é¡¶</li> <li>3.ä¸åŒ tab å®¹å™¨ä¹‹é—´æ”¯æŒæ¨ªæ»‘åˆ‡æ¢æµè§ˆæ“ä½œ</li> <li>4.ä¸åŒ tab å®¹å™¨çš„æ»šåŠ¨æµè§ˆæ˜¯éš”ç¦»çš„ï¼Œéœ€è¦ä¿æŒå„è‡ªçš„æµè§ˆä½ç½®</li> <li>5.ä¸åŒ tab å®¹å™¨å¯ä»¥æ‰¿è½½ç€æ— é™åˆ—è¡¨å†…å®¹</li></ul> <h3 id="h5"><a href="#h5" class="header-anchor">#</a> H5:</h3> <ul><li>position:sticky å¸é¡¶
<ul><li>sticky èŠ‚ç‚¹æ˜¯ä»¥æœ€è¿‘ä¸€ä¸ªæ‹¥æœ‰æ»šåŠ¨æœºåˆ¶çš„çˆ¶èŠ‚ç‚¹ï¼ˆoverflow ä¸ç­‰äº visible æ—¶ï¼‰æ¥å›ºå®š</li></ul></li> <li>åµŒå¥—æ»šåŠ¨ä¸­çš„æ»šåŠ¨æƒ¯æ€§ä¼ é€’</li> <li>æ¨ªæ»‘ï¼štranslate3d</li> <li><a href="https://foreverwaiting.github.io/easy-bookmark/blogs/mdn.html#intersectionobserver-%E4%BA%A4%E5%8F%89%E8%A7%82%E5%AF%9F%E8%80%85%E3%80%90%E8%AE%A1%E7%AE%97web%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%85%83%E7%B4%A0%E7%9A%84%E4%BD%8D%E7%BD%AE%E3%80%91" target="_blank" rel="noopener noreferrer">intersectionobserverï¼š<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_15"><a href="#_15" class="header-anchor">#</a> 15</h2> <h3 id="é˜²ç›—é“¾"><a href="#é˜²ç›—é“¾" class="header-anchor">#</a> é˜²ç›—é“¾</h3> <p>é˜²æ­¢åˆ«äººç›—ç”¨é“¾æ¥ï¼ˆå›¾ç‰‡éŸ³è§†é¢‘ç­‰ï¼‰ï¼š</p> <p>å½“åœ¨è¯·æ±‚ä¸Šè¿°èµ„æºæ—¶å€™ï¼Œè¯·æ±‚å¤´ä¸­æœ‰ Host(è¯·æ±‚çš„ä¸»æœº)å’Œ Referer(æ¥æº)ä¸¤ä¸ªå‚æ•°ï¼Œä¸¤è€…ä¸åŒå³å¯åˆ¤å®šä¸ºç›—é“¾ï¼Œåœ¨ node æœåŠ¡ä¸­åˆ¤æ–­å¹¶ä½œå‡ºæ“ä½œå³å¯ã€‚ï¼ˆè¿”å›è£‚å›¾æˆ–æ›¿æ¢ï¼‰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// jséƒ¨åˆ†</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">getHostName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> hostname <span class="token punctuation">}</span> <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
  <span class="token keyword">return</span> hostname
<span class="token punctuation">}</span>

http
  <span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> refer <span class="token operator">=</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'referer'</span><span class="token punctuation">]</span> <span class="token operator">||</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'referrer'</span><span class="token punctuation">]</span> <span class="token comment">// è¯·æ±‚å¤´éƒ½æ˜¯å°å†™çš„</span>
    <span class="token comment">// å…ˆçœ‹ä¸€ä¸‹referçš„å€¼ï¼Œå»å’Œhostçš„å€¼ä½œå¯¹æ¯”ï¼Œä¸ç›¸ç­‰å°±éœ€è¦é˜²ç›—é“¾äº†</span>
    <span class="token comment">// è¦è¯»å–æ–‡ä»¶ è¿”å›ç»™å®¢æˆ·ç«¯</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
    <span class="token keyword">let</span> src <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'.'</span> <span class="token operator">+</span> pathname<span class="token punctuation">)</span>
    <span class="token comment">// srcä»£è¡¨æˆ‘è¦æ‰¾çš„æ–‡ä»¶</span>
    fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// å…ˆåˆ¤æ–­æ–‡ä»¶å­˜ä¸å­˜åœ¨</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>refer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// ä¸æ˜¯æ‰€æœ‰å›¾ç‰‡éƒ½æœ‰æ¥æº</span>
          <span class="token keyword">let</span> referHost <span class="token operator">=</span> <span class="token function">getHostName</span><span class="token punctuation">(</span>refer<span class="token punctuation">)</span>
          <span class="token keyword">let</span> host <span class="token operator">=</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'host'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>referHost <span class="token operator">!==</span> host<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// é˜²ç›—é“¾</span>
            fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'./1.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
              res
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ­£å¸¸æ˜¾ç¤ºï¼Œå¦‚æœè·¯å¾„å­˜åœ¨ï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºç›´æ¥è¿”å›</span>
            fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// æ­£å¸¸æ˜¾ç¤ºï¼Œå¦‚æœè·¯å¾„å­˜åœ¨ï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºç›´æ¥è¿”å›</span>
          fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="css-content-visibility-é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–"><a href="#css-content-visibility-é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–" class="header-anchor">#</a> CSS: content-visibility(é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–)</h3> <p>å…è®¸ç”¨æˆ·ä»£ç†è·³è¿‡å…ƒç´ çš„å‘ˆç°å·¥ä½œ(åŒ…æ‹¬å¸ƒå±€å’Œç»˜åˆ¶)ï¼Œç›´åˆ°éœ€è¦å®ƒæ—¶ï¼Œè¿™ä½¿å¾—åˆå§‹é¡µé¢åŠ è½½é€Ÿåº¦æ›´å¿«ã€‚</p> <p>å±æ€§åŠä¼˜ç‚¹ï¼š</p> <ul><li>visibleï¼šé»˜è®¤å€¼ï¼Œå¯¹å¸ƒå±€å’Œå‘ˆç°ä¸ä¼šäº§ç”Ÿä»€ä¹ˆå½±å“</li> <li>hiddenï¼šå…ƒç´ è·³è¿‡å…¶å†…å®¹çš„å‘ˆç°ã€‚ç”¨æˆ·ä»£ç†åŠŸèƒ½ä¹Ÿä¸å¯è®¿é—®ï¼ˆç›¸å½“äºè®¾ç½®äº† displayï¼šnoneï¼‰
<ul><li>ç”¨æˆ·ä»£ç†ï¼šå¦‚ï¼Œåœ¨é¡µé¢ä¸­æŸ¥æ‰¾(command F)ï¼ŒæŒ‰ Tab é”®é¡ºåºå¯¼èˆªï¼Œç„¦ç‚¹äº‹ä»¶ã€‚</li></ul></li> <li>autoï¼šå¯¹äºç”¨æˆ·å¯è§åŒºåŸŸçš„å…ƒç´ ï¼Œæµè§ˆå™¨ä¼šæ­£å¸¸æ¸²æŸ“å…¶å†…å®¹ï¼›å¯¹äºä¸å¯è§åŒºåŸŸçš„å…ƒç´ ï¼Œæµè§ˆå™¨ä¼š<code>æš‚æ—¶è·³è¿‡</code>å…¶å†…å®¹çš„å‘ˆç°ï¼Œç­‰åˆ°å…¶å¤„äºç”¨æˆ·å¯è§åŒºåŸŸæ—¶ï¼Œæµè§ˆå™¨åœ¨æ¸²æŸ“å…¶å†…å®¹ã€‚ã€å¯¹äºæš‚æ—¶è·³è¿‡çš„ï¼Œè™½æœªåœ¨è§†åŒºï¼Œä½†å…¶ç”¨æˆ·ä»£ç†ä»å¯è®¿é—®ã€‘</li></ul> <p>ç¼ºç‚¹ï¼š</p> <ul><li>å…¼å®¹æ€§å·®ï¼šhttps://caniuse.com/?search=content-visibility</li> <li>å¯¹æ»šåŠ¨æ¡çš„å½±å“ï¼šç”±äºè§†å›¾å¤–çš„ img æœªæ¸²æŸ“æ—¶å€™é«˜åº¦ä¸º 0ï¼Œå‡ºç°è§†åŒº-&gt;å›¾ç‰‡æ¸²æŸ“-&gt;é¡µé¢é«˜åº¦å¢åŠ -&gt;æ»šåŠ¨æ¡æ»šåŠ¨é—ªåŠ¨
<ul><li>è§£å†³ï¼š<code>contains -intrinsic-size</code> æ­¤ CSS å±æ€§æ§åˆ¶ç”± content-visibility æŒ‡å®šçš„å…ƒç´ çš„è‡ªç„¶å¤§å°ï¼Œæ‰€ä»¥è®¾å®šä¸€ä¸ªé»˜è®¤å€¼å³å¯æš‚æ—¶è§£å†³ã€‚</li></ul></li></ul> <h2 id="_14"><a href="#_14" class="header-anchor">#</a> 14</h2> <h3 id="withã€evalã€newfunctionã€å¼‚å¸¸ç›‘æ§"><a href="#withã€evalã€newfunctionã€å¼‚å¸¸ç›‘æ§" class="header-anchor">#</a> withã€evalã€newFunctionã€å¼‚å¸¸ç›‘æ§</h3> <ul><li><p>å¼‚å¸¸ç›‘æ§ï¼šhttps://mp.weixin.qq.com/s/4UyEHM-YmdgrfF_yze9Bpgã€https://mp.weixin.qq.com/s/jSx_Es72jcC2gZl9k181xwã€https://mp.weixin.qq.com/s/wI-_69GV3r55EMG-DaTNUA</p></li> <li><p>rpcï¼ŒgraphQlï¼šhttps://segmentfault.com/a/1190000013961872ï¼Œhttps://segmentfault.com/a/1190000014131950</p></li> <li><p>ast è¯­æ³•æ ‘ï¼šhttps://github.com/CodeLittlePrince/blog/issues/19</p></li> <li><p>withã€evalã€newFunctionï¼šhttps://www.yuque.com/chengzishuo/dty0x8/dvw94r</p></li> <li><p>æŠ€æœ¯æ¸…å•ï¼šhttps://github.com/alienzhou/frontend-tech-list</p></li> <li><p>å•çº¿ç¨‹ jsï¼šhttps://github.com/JChehe/blog/blob/master/posts/%E5%85%B3%E4%BA%8EJavaScript%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BA%8B.md</p></li> <li><p>è„šæ‰‹æ¶ nodeï¼šhttps://juejin.cn/post/6844903526947110919</p></li></ul> <h2 id="_13"><a href="#_13" class="header-anchor">#</a> 13</h2> <p>Monaco Editor: vscode çš„å‰èº«ï¼Œä¸»è¦åŠŸèƒ½ä¸ºç¼–è¾‘å™¨</p> <h3 id="monaco-editor-çš„æ ¸å¿ƒåŠŸèƒ½ä¸ç»„ä»¶"><a href="#monaco-editor-çš„æ ¸å¿ƒåŠŸèƒ½ä¸ç»„ä»¶" class="header-anchor">#</a> Monaco Editor çš„æ ¸å¿ƒåŠŸèƒ½ä¸ç»„ä»¶ï¼š</h3> <p>è¡Œå·</p> <p>Overlay Widgetï¼Œå¯ä»¥æ¸²æŸ“ä»»æ„çš„å†…å®¹å°éƒ¨ä»¶ï¼Œèƒ½é€‰æ‹©æ”¾ç½®åœ¨é¡¶éƒ¨ã€åº•éƒ¨æˆ–ç¼–è¾‘å™¨ä¸­é—´ã€‚ä¾‹å¦‚ç¼–è¾‘å™¨å†…çš„æŸ¥æ‰¾æ¡†å³æ˜¯ä¸€ä¸ª Overlay Widget</p> <p>ViewLineï¼Œæ¯ä¸€è¡Œéƒ½è¡¨ç¤ºä¸€ä¸ª ViewLine</p> <p>Decorations è£…é¥°å—ï¼Œå¯ä»¥æŒ‡å®šæŸä¸ªä½ç½®çš„ä»£ç å—ä»¥ä½•ç§æ ·å¼å‘ˆç°ï¼Œä¾‹å¦‚ä¿®æ”¹å…¶èƒŒæ™¯è‰²ã€å‰æ™¯è‰²ç­‰</p> <p>Content Widgetï¼Œä¸ Overlay Widget ç±»ä¼¼ï¼Œä½†å¯ä»¥åŸºäºè¡Œã€åˆ—æŒ‡å®šå…¶ä½ç½®ã€‚ä¾‹å¦‚è‡ªåŠ¨è¡¥å…¨çš„åˆ—è¡¨æ¡†å°±æ˜¯ä¸€ä¸ª Content Widget</p> <p>View Zone, ä¸ Overlayã€Content Widget ä¸åŒï¼Œå®ƒå¯ä»¥æ’å…¥åˆ°ç‰¹å®šçš„è¡Œä¹‹é—´å°†å…¶æ’‘å¼€ã€‚ä¾‹å¦‚åœ¨ä¸Šå›¾ä¸­ 88 è¡Œä¸ 89 è¡Œä¹‹é—´çš„æŸ¥æ‰¾å¼•ç”¨çª—å£</p> <p>æ”¯æŒé€šè¿‡ Decorations API æ¥æ·»åŠ æ›´å¤šçš„è£…é¥°ï¼Œä¾‹å¦‚ç‰ˆæœ¬æ§åˆ¶ä¸­ä¸ºä¿®æ”¹è¿‡çš„è¡Œå·æ·»åŠ ä¸€ä¸ªè‰²å—ï¼Œåˆæˆ–è€…åœ¨è°ƒè¯•çŠ¶æ€ä¸‹æ˜¾ç¤ºæ–­ç‚¹ä¿¡æ¯ç­‰</p> <p>å¯¹äºä¸åŒç¼–ç¨‹è¯­è¨€çš„åŸºç¡€æ”¯æŒï¼ˆå³<code>é«˜äº®</code>ï¼‰åˆ™éœ€è¦é€šè¿‡<code>æ³¨å†Œè¯­è¨€</code>è§„åˆ™çš„æ–¹å¼æ¥å®ç°ï¼ŒMonaco é»˜è®¤ä½¿ç”¨äº†åä¸º Monarch çš„é«˜äº®ç³»ç»Ÿï¼ˆè€Œ VS Code ä½¿ç”¨çš„åˆ™æ˜¯ Textmateï¼‰ï¼ŒMonarch è§„å®šäº†è¯­è¨€éœ€è¦åŒ…å«çš„å…³é”®å­—ã€ç±»å‹ã€æ“ä½œç¬¦ï¼Œä»¥åŠ Tokenizerã€‚Tokenizer æ˜¯ä¸€ç»„æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºä»¥ä½•ç§è§„åˆ™æ¥è¯†åˆ«è¿™äº›å…³é”®å­—ä»¥åŠæ‹¬å·ã€æ³¨é‡Šå—ï¼ŒMonarch å°†ä¼šä¾ç…§æ­£åˆ™è¡¨è¾¾å¼çš„é…ç½®æ¥åŒ¹é…æ¯ä¸ª Tokenï¼Œå¹¶ä¸ºä¹‹æ¸²æŸ“å¯¹åº”çš„ä¸»é¢˜è‰²</p> <p>å¯¹äºé«˜çº§çš„<code>è¯­è¨€ç‰¹æ€§</code>æ”¯æŒï¼ŒMonaco ä¹Ÿæä¾›äº†éµå¾ª LSP æ ‡å‡†çš„ APIï¼Œä¾‹å¦‚<code>è‡ªåŠ¨è¡¥å…¨ã€é¼ æ ‡æ‚¬åœã€æŸ¥æ‰¾å¼•ç”¨ã€å®šä¹‰è·³è½¬</code>ç­‰å¸¸è§åŠŸèƒ½éƒ½å¯ä»¥é€šè¿‡<code>æ³¨å†Œè¯­è¨€æœåŠ¡å™¨</code>æ¥å®ç°ï¼Œè€Œ Monaco æœ¬èº«è‡ªå¸¦äº†åŒ…æ‹¬ TypeScirpt/JavaScriptã€CSSã€HTML çš„è¯­è¨€æœåŠ¡æ”¯æŒ</p> <ul><li><a href="https://www.npmjs.com/package/react-json-view" target="_blank" rel="noopener noreferrer">json view ç¼–è¾‘å™¨åŸºäº Monaco<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="chrome-89-æ–°åŠŸèƒ½-å¤§é‡-devtools-æ–°ç‰¹æ€§"><a href="#chrome-89-æ–°åŠŸèƒ½-å¤§é‡-devtools-æ–°ç‰¹æ€§" class="header-anchor">#</a> Chrome 89 æ–°åŠŸèƒ½(å¤§é‡ DevTools æ–°ç‰¹æ€§)</h3> <p>æ”¯æŒé€‰æ‹© CSS çš„ :target ä¼ªç±»ï¼Œå½“ URL ä¸­çš„ hash å’Œ DOM å…ƒç´ çš„ id ç›¸åŒæ—¶ï¼Œå°†è§¦å‘è¯¥å…ƒç´ çš„ :target ä¼ªç±»</p> <p>å¤åˆ¶ CSS å±æ€§çš„æ–°é€‰é¡¹</p> <ul><li>ç±»çš„å¤åˆ¶é€‰é¡¹:
<ul><li>Copy selectorï¼šå¤åˆ¶å½“å‰é€‰æ‹©å™¨åç§°ï¼›</li> <li>Copy ruleï¼šå¤åˆ¶å½“å‰é€‰æ‹©å™¨çš„è§„åˆ™ï¼›</li> <li>Copy all declarationsï¼šå¤åˆ¶å½“å‰è§„åˆ™ä¸‹çš„æ‰€æœ‰å£°æ˜ï¼ŒåŒ…æ‹¬æ— æ•ˆå±æ€§å’Œå¸¦å‰ç¼€çš„å±æ€§ã€‚</li></ul></li> <li>å±æ€§çš„å¤åˆ¶é€‰é¡¹:
<ul><li>Copy declarationï¼šå¤åˆ¶å½“å‰è¡Œçš„å£°æ˜ï¼›</li> <li>Copy propertyï¼šå¤åˆ¶å½“å‰è¡Œçš„å±æ€§ï¼›</li> <li>Copy valueï¼šå¤åˆ¶å½“å‰è¡Œçš„å€¼ã€‚</li></ul></li></ul> <p>ä¿æŒè®°å½•ç½‘ç»œæ—¥å¿—ï¼šDevTools ç°åœ¨å§‹ç»ˆä¿æŒè®°å½•ç½‘ç»œæ—¥å¿—ï¼ˆRecord network logï¼‰è®¾ç½®ã€‚ä»¥å‰ï¼Œæ¯å½“é¡µé¢é‡æ–°åŠ è½½æ—¶ï¼ŒDevTools éƒ½ä¼šé‡ç½®ç”¨æˆ·çš„é€‰æ‹©ã€‚</p> <p>Consoleã€Sources é¢æ¿ä¸­å¤åˆ¶å¯¹è±¡çš„æ–°é€‰é¡¹ï¼šç°åœ¨å¯ä»¥ä½¿ç”¨ Console å’Œ Sources é¢æ¿ä¸­çš„æ–°é€‰é¡¹æ¥å¿«æ·å¤åˆ¶å¯¹è±¡å€¼ã€‚è¿™éå¸¸æ–¹ä¾¿ï¼Œå°¤å…¶æ˜¯å½“éœ€è¦å¤åˆ¶ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ä¸€ä¸ªé•¿æ•°ç»„ï¼‰æ—¶ã€‚ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p> <p>æ”¯æŒè¶…å‡ºè§†å£çš„å…ƒç´ æˆªå›¾ï¼šåœ¨ Element é¢æ¿ä¸­ï¼Œå³é”®å•å‡»ä¸€ä¸ª DOM å…ƒç´ å¹¶é€‰æ‹© Capture node screenshot å¯ä»¥ä½¿ç”¨å…ƒç´ æˆªå›¾åŠŸèƒ½ã€‚</p> <p>Cookies ç›¸å…³æ›´æ–°ï¼šæ˜¾ç¤º url è§£ç åçš„ cookie çš„æ–°é€‰é¡¹</p> <p>åœ¨è®¾å¤‡æ¨¡å¼ä¸‹æ¨¡æ‹ŸåŒå±å’Œ<code>å¯æŠ˜å å±å¹•</code></p> <h2 id="_12"><a href="#_12" class="header-anchor">#</a> 12</h2> <ul><li>æ–‡ä»¶ä¸Šä¼ ï¼Œæ–­ç‚¹ä¸Šä¼ ï¼šhttps://mp.weixin.qq.com/s/hOkxwjSHGZ-3oXyN3CwwqQ</li></ul> <h3 id="å‰ç«¯å¼‚å¸¸"><a href="#å‰ç«¯å¼‚å¸¸" class="header-anchor">#</a> å‰ç«¯å¼‚å¸¸</h3> <ul><li><p>å‰ç«¯å¼‚å¸¸åŸ‹ç‚¹ï¼šhttps://mp.weixin.qq.com/s/ithQ2DDFvTfpuaixH8pt2A</p> <ul><li>å‰ç«¯å¼‚å¸¸æ•è·
<ul><li>tryâ€¦catch: æ— æ³•æ•è·ï¼ˆå¼‚æ­¥ä»»åŠ¡æŠ›å‡ºçš„å¼‚å¸¸ï¼Œpromiseï¼ˆå¼‚å¸¸å†…éƒ¨æ•è·åˆ°äº†ï¼Œå¹¶æœªå¾€ä¸ŠæŠ›å¼‚å¸¸ï¼Œä½¿ç”¨ catch å¤„ç†ï¼‰ï¼‰</li> <li>å…¨å±€å¼‚å¸¸ç›‘å¬ window.onerror<div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token comment">// å¼‚å¸¸ä¸ŠæŠ¥</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>å¥½å¤„ï¼šåŒæ­¥ä»»åŠ¡ã€å¼‚æ­¥ä»»åŠ¡éƒ½å¯æ•è·ï¼Œå¯ä»¥å¾—åˆ°å…·ä½“çš„å¼‚å¸¸ä¿¡æ¯ã€å¼‚å¸¸æ–‡ä»¶çš„ URLã€å¼‚å¸¸çš„è¡Œå·ä¸åˆ—å·åŠå¼‚å¸¸çš„å †æ ˆä¿¡æ¯ï¼Œå†æ•è·å¼‚å¸¸åï¼Œç»Ÿä¸€ä¸ŠæŠ¥è‡³æˆ‘ä»¬çš„æ—¥å¿—æœåŠ¡å™¨ï¼Œè€Œä¸”å¯ä»¥å…¨å±€ç›‘å¬</li> <li>åå¤„ï¼šæµè§ˆå™¨å…¼å®¹æ€§ã€è·¨åŸŸè„šæœ¬æ— æ³•å‡†ç¡®æ•è·å¼‚å¸¸ï¼Œè·¨åŸŸä¹‹å window.onerror æ•è·ä¸åˆ°æ­£ç¡®çš„å¼‚å¸¸ä¿¡æ¯ï¼Œè€Œæ˜¯ç»Ÿä¸€è¿”å›ä¸€ä¸ª Script errorï¼Œå¯é€šè¿‡åœ¨ script æ ‡ç­¾ä½¿ç”¨ crossorigin å±æ€§æ¥è§„é¿è¿™ä¸ªé—®é¢˜</li></ul></li> <li>Promise å†…éƒ¨å¼‚å¸¸: onerror ä»¥åŠ try-catch ä¹Ÿæ— æ³•æ•è· Promise å®ä¾‹æŠ›å‡ºçš„å¼‚å¸¸ï¼Œåªèƒ½æœ€ååœ¨ catch å‡½æ•°ä¸Šå¤„ç†</li></ul></li> <li>vue å·¥ç¨‹å¼‚å¸¸
<ul><li>Vue.config.errorHandler è¿™æ ·çš„ Vue å…¨å±€é…ç½®ï¼Œå¯ä»¥åœ¨ Vue æŒ‡å®šç»„ä»¶çš„æ¸²æŸ“å’Œè§‚å¯ŸæœŸé—´æœªæ•è·é”™è¯¯çš„å¤„ç†å‡½æ•°</li></ul></li> <li>ç”Ÿäº§ç¯å¢ƒï¼šç”±äºä»£ç æ˜¯ç»è¿‡ webpack æ‰“åŒ…åå‹ç¼©<code>æ··æ·†</code>çš„ä»£ç ï¼Œå¯¼è‡´ error å †æ ˆä¿¡æ¯é‡Œçš„æŠ¥é”™çš„ä»£ç è¡Œæ•°éƒ½åœ¨ç¬¬ä¸€è¡Œäº†</li> <li>é”™è¯¯ä¸ŠæŠ¥ï¼š
<ul><li>img æ ‡ç­¾ è¿™ç§æ–¹å¼æ— éœ€åŠ è½½ä»»ä½•é€šè®¯åº“ï¼Œè€Œä¸”é¡µé¢æ˜¯æ— éœ€åˆ·æ–°çš„ï¼Œç›¸å½“äº get è¯·æ±‚ï¼Œæ²¡æœ‰è·¨åŸŸé—®é¢˜ã€‚ç¼ºç‚¹æ˜¯æœ‰ url é•¿åº¦é™åˆ¶ã€‚ï¼ˆé€šè¿‡åŠ¨æ€åˆ›å»ºä¸€ä¸ª img,æµè§ˆå™¨å°±ä¼šå‘æœåŠ¡å™¨å‘é€ get è¯·æ±‚ã€‚å°†éœ€è¦ä¸ŠæŠ¥çš„é”™è¯¯æ•°æ®æ”¾åœ¨ url ä¸­ï¼Œåˆ©ç”¨è¿™ç§æ–¹å¼å°±å¯ä»¥å°†é”™è¯¯ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨äº†ï¼‰</li> <li>ajax ä¸æ­£å¸¸çš„æ¥å£è¯·æ±‚æ— å¼‚ï¼Œå¯ä»¥ç”¨ post</li></ul></li> <li>ä¸ŠæŠ¥ä¿¡æ¯ï¼šåº”è¯¥åŒ…å«å¼‚å¸¸ä½ç½®ï¼ˆè¡Œå·ï¼Œåˆ—å·ï¼‰ï¼Œå¼‚å¸¸ä¿¡æ¯ç­‰ã€‚</li> <li>æœåŠ¡ç«¯æ”¶é›†æ—¥å¿—ï¼š<code>log4js-node</code>æ’ä»¶ã€‚æ‹¿åˆ°ä¸ŠæŠ¥çš„ error æ—¥å¿—åï¼Œè§£æï¼ˆä¼šæ‹¿åˆ° colno ä¸º 2319ï¼Œlineno ä¸º 1ï¼‰ï¼Œå®‰è£…ä¸€ä¸ªæ’ä»¶å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°å¯¹åº”<code>å‹ç¼©å‰</code>çš„ä»£ç ä½ç½®(npm install source-map -S:å…ˆè¯»å–å¯¹åº”çš„ map æ–‡ä»¶ï¼ˆæŒ‰ filename å¯¹åº”ï¼‰ï¼Œç„¶ååªéœ€ä¼ å…¥å‹ç¼©åçš„æŠ¥é”™è¡Œå·åˆ—å·å³å¯ï¼Œå°±ä¼šè¿”å›å‹ç¼©å‰çš„é”™è¯¯ä¿¡æ¯ã€‚)ã€‚</li> <li>æ•°æ®å­˜å‚¨ æ—¥å¿—å¯è§†åŒ–</li> <li>é”™è¯¯æ—¥å¿—ç±»å‹åˆ†ç±»</li> <li>ä¸ŠæŠ¥é¢‘ç‡ï¼Œé˜²æŠ–</li> <li>https://mp.weixin.qq.com/s/4UyEHM-YmdgrfF_yze9Bpg</li> <li>https://mp.weixin.qq.com/s/jSx_Es72jcC2gZl9k181xw</li> <li>ut æ‰“ç‚¹ä¸ŠæŠ¥ï¼Œslsã€odps æ—¥å¿—å­˜å‚¨ï¼ˆæµé‡æŸ“è‰²ï¼‰ï¼ŒtraceId é€ä¼ æ³¨å…¥</li></ul> <p>try catch: åŒæ­¥ã€async await</p> <p>onerrorï¼šåŒæ­¥ã€å¼‚æ­¥</p> <p>error äº‹ä»¶ç›‘å¬ï¼šåŒæ­¥ã€å¼‚æ­¥ã€èµ„æºåŠ è½½ï¼ˆimgï¼‰</p> <p>unhandlerejectionï¼šPromiseã€async await</p></li> <li><p>Bundlelessã€ç»„ä»¶åŠ¨æ€åŠ è½½ã€‘ï¼š https://mp.weixin.qq.com/s/1v9UX_z27_lioId1ZSEcDQ</p></li> <li><p>graphQl ç½‘å…³ä¸ cdnï¼šhttps://mp.weixin.qq.com/s/ZO1Vpslk3-17YxUVt9Vhrw</p></li> <li><p>js æ•°æ®ç±»å‹è½¬æ¢ï¼šhttps://mp.weixin.qq.com/s/NN8DiH9ATZ2RuaDjlls-aw</p></li> <li><p>ç›‘æ§é¡µé¢ç™½å±ï¼šhttps://mp.weixin.qq.com/s/q1oXKJCAW7NQjaF0MP3vuA</p> <ul><li><a href="https://github.com/joeyguo/blog/issues/13" target="_blank" rel="noopener noreferrer">è„šæœ¬é”™è¯¯é‡æè‡´ä¼˜åŒ–-ç›‘æ§ä¸ŠæŠ¥ä¸ Script error<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/joeyguo/blog/issues/21" target="_blank" rel="noopener noreferrer">Webpack æ‰“åŒ…åä»£ç æ‰§è¡Œæ—¶æœºåˆ†æä¸ä¼˜åŒ–<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.alloyteam.com/2021/01/15358/" target="_blank" rel="noopener noreferrer">å‰ç«¯èµ„æºåŠ è½½å¤±è´¥ä¼˜åŒ–<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>jest æµ‹è¯•ï¼šhttp://www.alloyteam.com/2020/02/14255/</p></li> <li><p>h5 é—ªå¼€ï¼šhttp://www.alloyteam.com/2020/06/fast-open-h5/</p></li></ul> <h2 id="_11"><a href="#_11" class="header-anchor">#</a> 11</h2> <ul><li><p>css: https://qishaoxuan.github.io/css_tricks/createTriangle/</p></li> <li><p>vimï¼šhttps://shanyue.tech/op/vim-setting.html#%E5%B0%8F%E7%BB%93</p></li> <li><p>æµè§ˆå™¨å·¥ä½œåŸç†ï¼šhttps://cloud.tencent.com/developer/article/1360028</p></li></ul> <h3 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="header-anchor">#</a> å‘½ä»¤</h3> <p>1ã€rimfaf ã€https://github.com/isaacs/rimrafã€‘ç”¨äºåœ¨æ„å»ºä¹‹å‰æ¸…é™¤ dist ç›®å½•æ–‡ä»¶å†…å®¹ã€‚å¦‚ï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run lint &amp;&amp; rimraf dist types &amp;&amp; gulp&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2ã€create a directory recursively é€’å½’çš„åˆ›å»ºç›®å½•ï¼šã€https://github.com/substack/node-mkdirpã€‘</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mkdirp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mkdirp'</span><span class="token punctuation">)</span>
<span class="token function">mkdirp</span><span class="token punctuation">(</span><span class="token string">'/tmp/foo/bar/baz'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pow!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// And now /tmp/foo/bar/baz exists, huzzah!</span>
</code></pre></div><h3 id="github-actions"><a href="#github-actions" class="header-anchor">#</a> Github Actions</h3> <p>Travisã€Gitlab CI / CD ä»¥åŠ Jenkins</p> <p>åœ¨ .github/workflows ä¸‹æ–°å¢ mian.yml é…ç½®æ–‡ä»¶:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># ä»¥ä¸‹éƒ½æ˜¯å®˜æ–¹æ–‡æ¡£çš„ç®€å•ç¿»è¯‘</span>
<span class="token comment"># å½“å‰çš„ ymlï¼ˆ.yamlï¼‰ æ–‡ä»¶æ˜¯ä¸€ä¸ª workflowï¼Œæ˜¯æŒç»­é›†æˆä¸€æ¬¡è¿è¡Œçš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œå¿…é¡»æ”¾ç½®åœ¨é¡¹ç›®çš„ .github/workflow ç›®å½•ä¸‹</span>
<span class="token comment"># å¦‚æœä¸æ¸…æ¥š .yml æ–‡ä»¶æ ¼å¼è¯­æ³•ï¼Œå¯ä»¥æŸ¥çœ‹ https://www.codeproject.com/Articles/1214409/Learn-YAML-in-five-minutes</span>
<span class="token comment"># åˆæ¬¡ç¼–å†™éš¾å…ä¼šäº§ç”Ÿæ ¼å¼é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ VS Code æ’ä»¶è¿›è¡Œæ ¼å¼æ£€æµ‹ï¼Œhttps://marketplace.visualstudio.com/items?itemName=OmarTawfik.github-actions-vscode</span>

<span class="token comment"># å…·ä½“å„ä¸ªé…ç½®å±æ€§å¯æŸ¥çœ‹ https: //docs.github.com/en/actions/reference/workflow-syntax-for-github-actions</span>

<span class="token comment"># workflow çš„æ‰§è¡Œä»ç„¶ä¼šå—åˆ°ä¸€äº›é™åˆ¶ï¼Œä¾‹å¦‚</span>
<span class="token comment">#  - æ¯ä¸ª job æœ€å¤šæ‰§è¡Œ 6 å°æ—¶ï¼ˆæœ¬åœ°æœºå™¨ä¸å—é™åˆ¶ï¼‰</span>
<span class="token comment">#  - æ¯ä¸ª workflow æœ€å¤šæ‰§è¡Œ 72 å°æ—¶</span>
<span class="token comment">#  - å¹¶å‘ job çš„æ•°é‡ä¼šå—åˆ°é™åˆ¶</span>
<span class="token comment">#  - æ›´å¤šæŸ¥çœ‹ https: //docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#usage-limits</span>

<span class="token comment"># name: å½“å‰ workflow çš„åç§°</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Algorithms

<span class="token comment"># on:  æŒ‡å®š workflow è§¦å‘çš„ event</span>
<span class="token comment">#</span>
<span class="token comment">#      event æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹</span>
<span class="token comment">#         - webhook</span>
<span class="token comment">#         - scheduled</span>
<span class="token comment">#         - manual</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token comment"># push: ä¸€ä¸ª webhook eventï¼Œç”¨äºæäº¤ä»£ç æ—¶è§¦å‘ workflowï¼Œä¹Ÿå¯ä»¥æ˜¯è§¦å‘åˆ—è¡¨ï¼Œä¾‹å¦‚ [push, pull_request]</span>

  <span class="token comment">#        workflows è§¦å‘çš„ event å¤§éƒ¨åˆ†æ˜¯åŸºäº webhook é…ç½®ï¼Œä»¥ä¸‹åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„ webhook:</span>
  <span class="token comment">#           - delete:  åˆ é™¤ä¸€ä¸ª branch æˆ– tag æ—¶è§¦å‘</span>
  <span class="token comment">#           - fork / watch:  æŸäºº fork / watch é¡¹ç›®æ—¶è§¦å‘ï¼ˆä½ é—®æœ‰ä»€ä¹ˆç”¨ï¼Œå‘é€é‚®ä»¶é€šçŸ¥ä¸é¦™å—ï¼Ÿï¼‰</span>
  <span class="token comment">#           - pull_request:  æäº¤ PR æ—¶è§¦å‘</span>
  <span class="token comment">#           - page_build:  æäº¤ Github Pages-enabled åˆ†æ”¯ä»£ç æ—¶è§¦å‘</span>
  <span class="token comment">#           - push:  æäº¤ä»£ç åˆ°ç‰¹å®šåˆ†æ”¯æ—¶è§¦å‘</span>
  <span class="token comment">#           - registry_package:  å‘å¸ƒæˆ–è·Ÿæ–° package æ—¶è§¦å‘</span>
  <span class="token comment">#           æ›´å¤š webhook å¯æŸ¥çœ‹ https: //docs.github.com/en/actions/reference/events-that-trigger-workflows</span>
  <span class="token comment">#           ä»è¿™é‡Œå¯ä»¥çœ‹å‡º Git Actions çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯ Gihub å®˜æ–¹æä¾›çš„ä¸€ç³»åˆ— webhook</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token comment"># branches: æŒ‡å®š push è§¦å‘çš„ç‰¹å®šåˆ†æ”¯ï¼Œè¿™é‡Œä½ å¯ä»¥é€šè¿‡åˆ—è¡¨çš„å½¢å¼æŒ‡å®šå¤šä¸ªåˆ†æ”¯</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> feat/framework
    <span class="token comment">#</span>
    <span class="token comment"># branches çš„æŒ‡å®šå¯ä»¥æ˜¯é€šé…ç¬¦ç±»å‹ï¼Œä¾‹å¦‚ä»¥ä¸‹é…ç½®å¯ä»¥åŒ¹é… refs/heads/releases/10</span>
    <span class="token comment"># - 'releases/**'</span>
    <span class="token comment">#</span>
    <span class="token comment"># branches ä¹Ÿå¯ä»¥ä½¿ç”¨åå‘åŒ¹é…ï¼Œä¾‹å¦‚ä»¥ä¸‹ä¸ä¼šåŒ¹é… refs/heads/releases/10</span>
    <span class="token comment"># - '!releases/**'</span>
    <span class="token comment">#</span>
    <span class="token comment"># branches-ignore:  åªå¯¹ [push, pull_request] ä¸¤ä¸ª webhook èµ·ä½œç”¨ï¼Œç”¨äºæŒ‡å®šå½“å‰ webhook ä¸è§¦å‘çš„åˆ†æ”¯</span>
    <span class="token comment"># éœ€è¦æ³¨æ„åœ¨åŒä¸€ä¸ª webhook ä¸­ä¸èƒ½å’Œ branches åŒæ—¶ä½¿ç”¨</span>
    <span class="token comment">#</span>
    <span class="token comment"># tags:  åªå¯¹ [push, pull_request] ä¸¤ä¸ª webhook èµ·ä½œç”¨ï¼Œç”¨äºæŒ‡å®šå½“å‰ webhook è§¦å‘çš„ tag</span>
    <span class="token comment">#</span>
    <span class="token comment"># tags:</span>
    <span class="token comment">#   - v1             # Push events to v1 tag</span>
    <span class="token comment">#   - v1.*           # Push events to v1.0, v1.1, and v1.9 tags</span>
    <span class="token comment">#</span>
    <span class="token comment"># tags-ignore:  ç±»ä¼¼äº branches-ignore</span>
    <span class="token comment">#</span>
    <span class="token comment"># pathsã€paths-ignore...</span>
    <span class="token comment">#</span>
    <span class="token comment"># æ›´å¤šå…³äºç‰¹å®šè¿‡æ»¤æ¨¡å¼å¯æŸ¥çœ‹ https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#filter-pattern-cheat-sheet</span>
    <span class="token comment">#</span>
    <span class="token comment"># å…¶ä»–çš„ webhook æ§åˆ¶é¡¹è¿˜åŒ…æ‹¬ typesï¼ˆä¸æ˜¯æ‰€æœ‰çš„ webhook éƒ½æœ‰ typesï¼‰ï¼Œä¾‹å¦‚å·² issues ä¸ºä¾‹ï¼Œå¯ä»¥åœ¨ issues è¢« openã€reopenedã€closed ç­‰æƒ…å†µä¸‹è§¦å‘ workflow</span>
    <span class="token comment"># æ›´å¤š webhook çš„ types å¯æŸ¥çœ‹ https: //docs.github.com/en/actions/reference/events-that-trigger-workflows#webhook-events</span>
    <span class="token comment">#</span>
    <span class="token comment"># on:</span>
    <span class="token comment">#   issues:</span>
    <span class="token comment">#     types:  [opened, edited, closed]</span>

  <span class="token comment"># é™¤æ­¤ä¹‹å¤–å¦‚æœå¯¹äºæ¯ä¸ªåˆ†æ”¯æœ‰ä¸åŒçš„ webhook è§¦å‘ï¼Œåˆ™å¯ä»¥é€šè¿‡ä»¥ä¸‹å½¢å¼è¿›è¡Œå¤šä¸ª webhook é…ç½®</span>
  <span class="token comment">#</span>
  <span class="token comment"># push:</span>
  <span class="token comment">#   branches:</span>
  <span class="token comment">#     - master</span>
  <span class="token comment"># pull_request:</span>
  <span class="token comment">#   branches:</span>
  <span class="token comment">#     - dev</span>
  <span class="token comment">#</span>
  <span class="token comment"># é™¤äº†ä»¥ä¸Šæ‰€è¯´çš„ webhook eventï¼Œè¿˜æœ‰ scheduled event å’Œ manual event</span>
  <span class="token comment"># scheduled event:  ç”¨äºå®šæ—¶æ„å»ºï¼Œä¾‹å¦‚æœ€å°çš„æ—¶é—´é—´éš”æ˜¯ 5 min æ„å»ºä¸€æ¬¡</span>
  <span class="token comment"># å…·ä½“å¯æŸ¥çœ‹ https: //docs.github.com/en/actions/reference/events-that-trigger-workflows#scheduled-events</span>

<span class="token comment"># env:  æŒ‡å®šç¯å¢ƒå˜é‡ï¼ˆæ‰€æœ‰çš„ job ç”Ÿæ•ˆï¼Œæ¯ä¸€ä¸ª job å¯ä»¥ç‹¬ç«‹é€šè¿‡ jobs.&lt;job_id&gt;.envã€jobs.&lt;job_id&gt;.steps.env é…ç½®ï¼‰</span>
<span class="token comment"># defaults / defaults.run: æ‰€æœ‰çš„ job ç”Ÿæ•ˆï¼Œæ¯ä¸€ä¸ª job å¯ä»¥ç‹¬ç«‹é€šè¿‡ jobs.&lt;job_id&gt;.defaults é…ç½®</span>
<span class="token comment"># deafults</span>
<span class="token comment"># defaults.run</span>

<span class="token comment"># jobs: ä¸€ä¸ª workflow ç”±ä¸€ä¸ªæˆ–å¤šä¸ª job ç»„æˆ</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token comment"># job id: æ˜¯ job çš„å”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥é€šè¿‡ _ è¿›è¡Œè¿æ¥ï¼Œä¾‹å¦‚:  my_first_jobï¼Œä¾‹å¦‚è¿™é‡Œçš„ build å°±æ˜¯ä¸€ä¸ª job id</span>
  <span class="token key atrule">build_and_deploy</span><span class="token punctuation">:</span>
    <span class="token comment"># name: åœ¨ Github ä¸­æ˜¾ç¤ºçš„ job åç§°</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Build And Deploy
    <span class="token comment">#</span>
    <span class="token comment"># needs: ç”¨äºç»§å‘æ‰§è¡Œ jobï¼Œä¾‹å¦‚å½“å‰ job build å¿…é¡»åœ¨ job1 å’Œ job2 éƒ½æ‰§è¡ŒæˆåŠŸçš„åŸºç¡€ä¸Šæ‰§è¡Œ</span>
    <span class="token comment"># needs: [job1, job2]</span>
    <span class="token comment">#</span>
    <span class="token comment"># runs-on: job è¿è¡Œçš„ç¯å¢ƒé…ç½®ï¼ŒåŒ…æ‹¬:</span>
    <span class="token comment">#   - windows-latest</span>
    <span class="token comment">#   - windows-2019</span>
    <span class="token comment">#   - ubuntu-20.04</span>
    <span class="token comment">#   - ubuntu-latest</span>
    <span class="token comment">#   - ubuntu-18.04</span>
    <span class="token comment">#   - ubuntu-16.04</span>
    <span class="token comment">#   - macos-latest</span>
    <span class="token comment">#   - macos-10.15</span>
    <span class="token comment">#   - self-hostedï¼ˆæœ¬åœ°æœºå™¨ï¼Œå…·ä½“å¯æŸ¥çœ‹ https: //docs.github.com/en/actions/hosting-your-own-runners/using-self-hosted-runners-in-a-workflowï¼‰</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token comment">#</span>
    <span class="token comment"># outputs:  ç”¨äºè¾“å‡ºä¿¡æ¯</span>
    <span class="token comment">#</span>
    <span class="token comment"># env:  ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡</span>
    <span class="token comment">#</span>
    <span class="token comment"># defaults:  å½“å‰æ‰€æœ‰ step çš„é»˜è®¤é…ç½®</span>
    <span class="token comment">#</span>
    <span class="token comment"># defaults.run</span>

    <span class="token comment"># if: æ»¡è¶³æ¡ä»¶æ‰§è¡Œå½“å‰ job</span>

    <span class="token comment"># steps:  ä¸€ä¸ª job ç”±å¤šä¸ª step ç»„æˆï¼Œstep å¯ä»¥</span>
    <span class="token comment">#   - æ‰§è¡Œä¸€ç³»åˆ— tasks</span>
    <span class="token comment">#   - æ‰§è¡Œå‘½ä»¤</span>
    <span class="token comment">#   - æ‰§è¡Œ action</span>
    <span class="token comment">#   - æ‰§è¡Œå…¬å…±çš„ repository</span>
    <span class="token comment">#   - åœ¨ Docker registry ä¸­çš„ action</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment">#</span>
      <span class="token comment"># id: ç±»ä¼¼äº job id</span>
      <span class="token comment">#</span>
      <span class="token comment"># if:  ç±»ä¼¼äº job if</span>
      <span class="token comment">#</span>
      <span class="token comment"># name:  å½“å‰ step çš„åå­—</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token comment">#</span>
        <span class="token comment"># uses: ç”¨äºæ‰§è¡Œ action</span>
        <span class="token comment">#</span>
        <span class="token comment">#       action: å¯ä»¥é‡å¤ä½¿ç”¨çš„å•å…ƒä»£ç </span>
        <span class="token comment">#          - ä¸ºäº† workflow çš„å®‰å…¨å’Œç¨³å®šå»ºè®®æŒ‡å®š action çš„å‘å¸ƒç‰ˆæœ¬æˆ– commit SHA</span>
        <span class="token comment">#          - ä½¿ç”¨æŒ‡å®š action çš„ major ç‰ˆæœ¬ï¼Œè¿™æ ·å¯ä»¥å…è®¸ä½ æ¥æ”¶ fixs ä»¥åŠ å®‰å…¨è¡¥ä¸å¹¶åŒæ—¶ä¿æŒå…¼å®¹æ€§</span>
        <span class="token comment">#          - å°½é‡ä¸å»ºè®®ä½¿ç”¨ master ç‰ˆæœ¬ï¼Œå› ä¸º master å¾ˆæœ‰å¯èƒ½ä¼šè¢«å‘å¸ƒæ–°çš„ major ç‰ˆæœ¬ä»è€Œç ´åäº† action çš„å…¼å®¹æ€§</span>
        <span class="token comment">#          - action å¯èƒ½æ˜¯ JavaScript æ–‡ä»¶æˆ– Docker å®¹å™¨ï¼Œå¦‚æœæ˜¯ Docker å®¹å™¨ï¼Œé‚£ä¹ˆ runs-on å¿…é¡»æŒ‡å®š Linux ç¯å¢ƒ</span>
        <span class="token comment">#</span>
        <span class="token comment">#         æŒ‡å®šå›ºå®š commit SHA</span>
        <span class="token comment">#         uses:  actions/setup-node@74bc508</span>
        <span class="token comment">#         æŒ‡å®šä¸€ä¸ª major å‘å¸ƒç‰ˆæœ¬</span>
        <span class="token comment">#         uses:  actions/setup-node@v1</span>
        <span class="token comment">#         æŒ‡å®šä¸€ä¸ª minor å‘å¸ƒç‰ˆæœ¬</span>
        <span class="token comment">#         uses:  actions/setup-node@v1.2</span>
        <span class="token comment">#         æŒ‡å®šä¸€ä¸ªåˆ†æ”¯</span>
        <span class="token comment">#         uses:  actions/setup-node@master</span>
        <span class="token comment">#         æŒ‡å®šä¸€ä¸ª Github ä»“åº“å­ç›®å½•çš„ç‰¹å®šåˆ†æ”¯ã€ref æˆ– SHA</span>
        <span class="token comment">#         uses:  actions/aws/ec2@master</span>
        <span class="token comment">#         æŒ‡å®šå½“å‰ä»“åº“æ‰€åœ¨ workflows çš„ç›®å½•åœ°å€</span>
        <span class="token comment">#         uses:  ./.github/actions/my-action</span>
        <span class="token comment">#         æŒ‡å®šåœ¨ Dock Hub å‘å¸ƒçš„ Docker é•œåƒåœ°å€</span>
        <span class="token comment">#         uses:  docker: //alpine: 3.8</span>
        <span class="token comment">#         A Docker image in a public registry</span>
        <span class="token comment">#         uses:  docker: //gcr.io/cloud-builders/gradle</span>

        <span class="token comment"># checkout action ä¸»è¦ç”¨äºå‘ github ä»“åº“æ‹‰å–æºä»£ç ï¼ˆéœ€è¦æ³¨æ„ workflow æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œå› æ­¤éœ€è¦å‘å½“å‰ github æ‹‰å–ä»“åº“æºä»£ç ï¼‰</span>
        <span class="token comment"># å®ƒçš„åŠŸèƒ½åŒ…æ‹¬ä½†ä¸é™äº</span>
        <span class="token comment">#   - Fetch all history for all tags and branches</span>
        <span class="token comment">#   - Checkout a different branch</span>
        <span class="token comment">#   - Checkout HEAD^</span>
        <span class="token comment">#   - Checkout multiple repos (side by side)</span>
        <span class="token comment">#   - Checkout multiple repos (nested)</span>
        <span class="token comment">#   - Checkout multiple repos (private)</span>
        <span class="token comment">#   - Checkout pull request HEAD commit instead of merge commit</span>
        <span class="token comment">#   - Checkout pull request on closed event</span>
        <span class="token comment">#   - Push a commit using the built-in token</span>

        <span class="token comment"># checkout action:  https: //github.com/actions/checkout</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
        <span class="token comment"># with: action æä¾›çš„è¾“å…¥å‚æ•°</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># æŒ‡å®š checkout çš„åˆ†æ”¯ã€tag æˆ– SHA</span>
          <span class="token comment"># æ›´å¤š checkout action çš„é…ç½®å¯æŸ¥çœ‹ https: //github.com/actions/checkout#usage</span>
          <span class="token key atrule">ref</span><span class="token punctuation">:</span> feat/ci
        <span class="token comment"># args: ç”¨äº Docker å®¹å™¨çš„ CMD æŒ‡ä»¤å‚æ•°</span>
        <span class="token comment"># entrypoint: Docker å®¹å™¨ actionï¼ˆè¦†ç›– Dockerfile çš„ ENTRYPOINTï¼‰ å’Œ JavaScript action éƒ½å¯ä»¥ä½¿ç”¨</span>
      <span class="token comment">#</span>
      <span class="token comment"># run: ä½¿ç”¨å½“å‰çš„æ“ä½œç³»ç»Ÿçš„é»˜è®¤çš„ non-login shell æ‰§è¡Œå‘½ä»¤è¡Œç¨‹åº</span>
      <span class="token comment"># è¿è¡Œå•ä¸ªè„šæœ¬</span>
      <span class="token comment"># run: npm install</span>
      <span class="token comment"># è¿è¡Œå¤šä¸ªè„šæœ¬</span>
      <span class="token comment"># run: |</span><span class="token scalar string">
      #   npm ci
      #   npm run build
      #
      # working-directory: ç”¨äºæŒ‡å®šå½“å‰è„šæœ¬è¿è¡Œçš„ç›®å½•
      # working-directory: ./temp
      #
      # shell: å¯ä»¥æŒ‡å®š shell ç±»å‹è¿›è¡Œæ‰§è¡Œï¼Œä¾‹å¦‚ bashã€pwshã€pythonã€shã€cmdã€powershell
      # shell: bash
      #
      # env: é™¤äº†å¯ä»¥è®¾ç½® workflow ä»¥åŠ job çš„ envï¼Œä¹Ÿå¯ä»¥è®¾ç½® step çš„ envï¼ˆå¯ä»¥ç†è§£ä¸ºä½œç”¨åŸŸä¸åŒï¼Œå±€éƒ¨ä½œç”¨åŸŸçš„ä¼˜å…ˆçº§æ›´é«˜ï¼‰
      #
      # comtinue-on-error: é»˜è®¤å½“å‰ step å¤±è´¥åˆ™ä¼šé˜»æ­¢å½“å‰ job ç»§ç»­æ‰§è¡Œï¼Œè®¾ç½® true æ—¶å½“å‰ step å¤±è´¥åˆ™å¯ä»¥è·³è¿‡å½“å‰ job çš„æ‰§è¡Œ</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cache
        <span class="token comment"># cache action: https://github.com/actions/cache</span>
        <span class="token comment"># cache åœ¨è¿™é‡Œä¸»è¦ç”¨äºç¼“å­˜ npmï¼Œæå‡æ„å»ºé€Ÿç‡</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v2
        <span class="token comment"># npm ç¼“å­˜çš„è·¯å¾„å¯æŸ¥çœ‹ https://docs.npmjs.com/cli/cache#cache</span>
        <span class="token comment"># ç”±äºè¿™é‡Œ runs-on æ˜¯ ubuntu-latestï¼Œå› æ­¤é…ç½® ~/.npm</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> ~/.npm
          <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> runner.os <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">-</span>node<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> hashFiles('<span class="token important">**/package-lock.json')</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            ${{ runner.os }}-node-</span>
      <span class="token comment"># github-script action: https://github.com/actions/github-script</span>
      <span class="token comment"># åœ¨ workflow ä¸­ä½¿ç”¨ Script è¯­æ³•è°ƒç”¨ Github API æˆ–å¼•ç”¨ workflow context</span>

      <span class="token comment"># setup-node action: https://github.com/actions/setup-node</span>
      <span class="token comment"># é…ç½® Node æ‰§è¡Œç¯å¢ƒï¼ˆå½“å‰æ„å»ºçš„æœåŠ¡å™¨é»˜è®¤æ²¡æœ‰ Node ç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡ Action å®‰è£… Nodeï¼‰</span>
      <span class="token comment"># éœ€è¦æ³¨æ„å®‰è£… Node çš„åŒæ—¶ä¼šæ†ç»‘å®‰è£… npmï¼Œå¦‚æœæƒ³äº†è§£ä¸ºä»€ä¹ˆä¼šæ†ç»‘ï¼Œå¯ä»¥ Google ä¸€ä¸‹æœ‰è¶£çš„æ•…äº‹å“¦</span>
      <span class="token comment"># å› æ­¤ä½¿ç”¨äº†è¯¥ action åå°±å¯ä»¥ä½¿ç”¨ npm çš„è„šæœ¬åœ¨æœåŠ¡å™¨è¿›è¡Œæ‰§è¡Œå•¦</span>
      <span class="token comment"># è¿™é‡Œä¹Ÿå¯ä»¥å°è¯• v2-beta ç‰ˆæœ¬å“¦</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Set Node
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># ä¹Ÿå¯ä»¥é€šè¿‡ strategy.matrix.node è¿›è¡Œçµæ´»é…ç½®</span>
          <span class="token comment"># è¿™é‡Œæœ¬åœ°ä½¿ç”¨ node çš„ 12 ç‰ˆæœ¬æ„å»ºï¼Œå› æ­¤è¿™é‡Œå°±è¿›è¡Œç‰ˆæœ¬å›ºå®šå•¦</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">'12'</span>

      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm run build
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm run docs<span class="token punctuation">:</span>build

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token comment"># ç”¨äºå‘å¸ƒé™æ€ç«™ç‚¹èµ„æº</span>
        <span class="token comment"># actions-gh-pages action: https://github.com/peaceiris/actions-gh-pages</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># GTIHUB_TOKENï¼šhttps://docs.github.com/en/actions/configuring-and-managing-workflows/authenticating-with-the-github_token</span>
          <span class="token comment"># Github ä¼šåœ¨ workflow ä¸­è‡ªåŠ¨ç”Ÿæˆ GIHUBT_TOKENï¼Œç”¨äºè®¤è¯ workflow çš„è¿è¡Œ</span>
          <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># é™æ€èµ„æºç›®å½•è®¾ç½®</span>
          <span class="token key atrule">publish_dir</span><span class="token punctuation">:</span> ./docs/.vuepress/dist
          <span class="token comment"># é»˜è®¤å‘å¸ƒåˆ° gh-pages åˆ†æ”¯ä¸Šï¼Œå¯ä»¥æŒ‡å®šç‰¹å®šçš„å‘å¸ƒåˆ†æ”¯</span>
          <span class="token key atrule">publish_branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages1 <span class="token comment"># default: gh-pages</span>
          <span class="token key atrule">full_commit_message</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> github.event.head_commit.message <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token comment">#</span>
    <span class="token comment"># timeout-minutes: ä¸€ä¸ª job æ‰§è¡Œçš„æœ€å¤§æ—¶é—´ï¼Œé»˜è®¤æ˜¯ 6hï¼Œå¦‚æœè¶…è¿‡æ—¶é—´åˆ™å–æ¶ˆæ‰§è¡Œ</span>
    <span class="token comment">#</span>
    <span class="token comment"># strategy.matrix: ä¾‹å¦‚æŒ‡å®šå½“å‰ job çš„ node ç‰ˆæœ¬åˆ—è¡¨ã€æ“ä½œç³»ç»Ÿç±»å‹åˆ—è¡¨ç­‰</span>
    <span class="token comment"># strategy.fail-fast</span>
    <span class="token comment"># strategy.max-parallel</span>
    <span class="token comment"># continue-on-error:  ä¸€æ—¦å½“å‰ job æ‰§è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆ workflow åœæ­¢æ‰§è¡Œã€‚è®¾ç½®ä¸º true å¯ä»¥è·³è¿‡å½“å‰ job æ‰§è¡Œ</span>
    <span class="token comment"># container: Docker å®¹å™¨é…ç½®ï¼ŒåŒ…æ‹¬ imageã€envã€portsã€volumesã€options ç­‰é…ç½®</span>
    <span class="token comment">#</span>
    <span class="token comment"># services: ä½¿ç”¨ Docker å®¹å™¨ Action æˆ–è€… æœåŠ¡ Action å¿…é¡»ä½¿ç”¨ Linux ç¯å¢ƒè¿è¡Œ</span>
</code></pre></div><h2 id="_08"><a href="#_08" class="header-anchor">#</a> 08</h2> <h3 id="git-æäº¤è§„èŒƒ-cz-å·¥å…·"><a href="#git-æäº¤è§„èŒƒ-cz-å·¥å…·" class="header-anchor">#</a> git æäº¤è§„èŒƒ[cz å·¥å…·]</h3> <h4 id="git-æäº¤è¯´æ˜å¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†-header-body-footer"><a href="#git-æäº¤è¯´æ˜å¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†-header-body-footer" class="header-anchor">#</a> Git æäº¤è¯´æ˜å¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š<code>&lt;Header&gt; &lt;Body&gt; &lt;Footer&gt;</code></h4> <ul><li><p><code>&lt;Header&gt;</code>: åŒ…å«<code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</code>ï¼Œåˆ†åˆ«æ˜¯ï¼š</p> <ul><li>typeï¼šæäº¤æ€§è´¨ã€‚å¦‚ featã€fix ç­‰</li> <li>scopeï¼šcommit çš„å½±å“èŒƒå›´ï¼Œä¾æ®åŠŸèƒ½æˆ–è€…ç»„ä»¶åº“åˆ’åˆ†</li> <li>subjectï¼šcommit å†…å®¹çš„ç®€è¿°</li></ul></li> <li><p><code>&lt;Body&gt;</code>: commit çš„å†…å®¹</p></li> <li><p><code>&lt;Footer&gt;</code>: å¦‚æœä»£ç çš„æäº¤æ˜¯[ä¸å…¼å®¹å˜æ›´]æˆ–[å…³é—­ç¼ºé™·]ï¼ŒFooter æ˜¯å¿…éœ€çš„ï¼Œå¦åˆ™å¯ä»¥çœç•¥ã€‚</p> <ul><li>å…³é—­ issuesï¼š # + issues çš„ç¼–å·</li> <li>å½“å‰ä»£ç ä¸ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸å…¼å®¹ï¼Œåˆ™ Footer ä»¥ BREAKING CHANGE å¼€å¤´ï¼Œåé¢æ˜¯å¯¹å˜åŠ¨çš„æè¿°ã€ä»¥åŠå˜åŠ¨çš„ç†ç”±å’Œè¿ç§»æ–¹æ³•ã€‚</li></ul></li></ul> <h4 id="è§„èŒƒæäº¤è¯´æ˜-ä½¿ç”¨-npm-install-g-commitizen-åä½¿ç”¨-git-cz-å³å¯"><a href="#è§„èŒƒæäº¤è¯´æ˜-ä½¿ç”¨-npm-install-g-commitizen-åä½¿ç”¨-git-cz-å³å¯" class="header-anchor">#</a> è§„èŒƒæäº¤è¯´æ˜ï¼šä½¿ç”¨ npm install -g commitizenï¼ˆåä½¿ç”¨ git cz å³å¯ï¼‰</h4> <p>ä½¿ç”¨ commitizen ç”Ÿæˆç¬¦åˆ AngularJS è§„èŒƒçš„æäº¤è¯´æ˜ï¼šcz-conventional-changelog</p> <p>1ã€commitizen init cz-conventional-changelog --save --save-exact</p> <p>2ã€package.json ä¸­æ–°å¢ config.commitizen å­—æ®µä¿¡æ¯ï¼Œä¸»è¦ç”¨äºé…ç½® cz å·¥å…·çš„é€‚é…å™¨è·¯å¾„</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 <span class="token string-property property">&quot;cz-conventional-changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.1.0&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/cz-conventional-changelog&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3ã€ä½¿ç”¨ git cz ä»£æ›¿ git commit è¿›è¡Œæäº¤è¯´æ˜ã€‚ä¼šåœ¨æ‰§è¡Œåå‘½ä»¤è¡Œæç¤ºé€‰æ‹©<code>&lt;Header&gt;</code></p> <p>ä½¿ç”¨è‡ªå®šä¹‰è§„èŒƒé…ç½®ï¼šnpm install cz-customizable --save-dev</p> <p>1ã€å°†ä¹‹å‰ç¬¦åˆ Angular è§„èŒƒçš„ cz-conventional-changelog é€‚é…å™¨è·¯å¾„æ”¹æˆ cz-customizable é€‚é…å™¨è·¯å¾„ï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;cz-customizable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.3.0&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/cz-customizable&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2ã€å¢åŠ  [.cz-config.js] æ–‡ä»¶é…ç½®è‡ªå®šä¹‰è§„èŒƒã€‚å‚è€ƒï¼šhttps://github.com/leoforfree/cz-customizable/blob/master/cz-config-EXAMPLE.js</p> <h4 id="æ ¡éªŒå·¥å…·-commitlint-commitizen-æäº¤æ ¡éªŒ-git-commit-m-æµ‹è¯•æäº¤å†…å®¹"><a href="#æ ¡éªŒå·¥å…·-commitlint-commitizen-æäº¤æ ¡éªŒ-git-commit-m-æµ‹è¯•æäº¤å†…å®¹" class="header-anchor">#</a> æ ¡éªŒå·¥å…· commitlintï¼ŒCommitizen æäº¤æ ¡éªŒï¼ˆgit commit -m 'æµ‹è¯•æäº¤å†…å®¹'ï¼‰</h4> <p>æ ¡éªŒæäº¤è¯´æ˜æ˜¯å¦ç¬¦åˆè§„èŒƒ</p> <p>1ã€npm install --save-dev @commitlint/cli</p> <p>2ã€npm install --save-dev @commitlint/config-conventional</p> <p>3ã€æ–°å»º[commitlint.config.js]æ–‡ä»¶å¹¶è®¾ç½®æ ¡éªŒè§„åˆ™</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>4ã€å®‰è£… husky(å“ˆå£«å¥‡)ï¼šnpm install husky --save-dev</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commit-msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="commitizen-æ—¥å¿—"><a href="#commitizen-æ—¥å¿—" class="header-anchor">#</a> Commitizen æ—¥å¿—</h4> <p>ä½¿ç”¨äº† cz å·¥å…·é›†ï¼Œé…å¥— conventional-changelog å¯ä»¥å¿«é€Ÿç”Ÿæˆå¼€å‘æ—¥å¿—:</p> <p>1ã€npm install conventional-changelog -D</p> <p>2ã€package.json ä¿®æ”¹ï¼š&quot;version&quot;: &quot;conventional-changelog -p angular -i CHANGELOG.md -s -r 0 &amp;&amp; git add CHANGELOG.md&quot;</p> <p>3ã€æ‰§è¡Œ npm run version åå¯æŸ¥çœ‹ç”Ÿäº§çš„æ—¥å¿— CHANGELOG.md</p> <p>èµ„æ–™ï¼š - <a href="https://juejin.cn/post/6844903831893966856#heading-14" target="_blank" rel="noopener noreferrer">commit æäº¤<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="eslint-é…ç½®ã€‚ä»£ç æ ¼å¼è§„åˆ™-å’Œ-è´¨é‡è§„åˆ™"><a href="#eslint-é…ç½®ã€‚ä»£ç æ ¼å¼è§„åˆ™-å’Œ-è´¨é‡è§„åˆ™" class="header-anchor">#</a> ESLint é…ç½®ã€‚ä»£ç æ ¼å¼è§„åˆ™ å’Œ è´¨é‡è§„åˆ™</h3> <p>1ã€å®‰è£…ï¼šnpm i --save-dev eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin</p> <p>2ã€æ–°å»º .eslintrc.js é…ç½®æ–‡ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span> <span class="token comment">// ä½¿ç”¨ ESLint è§£æ TypeScript è¯­æ³•</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@typescript-eslint'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// åœ¨ ESLint ä¸­åŠ è½½æ’ä»¶ @typescript-eslint/eslint-pluginï¼Œè¯¥æ’ä»¶å¯ç”¨äºé…ç½® TypeScript æ ¡éªŒè§„åˆ™</span>
  <span class="token comment">// åœ¨ ESLint ä¸­ä½¿ç”¨å…±äº«è§„åˆ™é…ç½®ï¼Œå…¶ä¸­ eslint:recommended æ˜¯ ESLint å†…ç½®çš„æ¨èæ ¡éªŒè§„åˆ™é…ç½®ï¼ˆä¹Ÿè¢«ç§°ä½œæœ€ä½³è§„åˆ™å®è·µï¼‰ï¼Œplugin:@typescript-eslint/recommended æ˜¯ç±»ä¼¼äº eslint:recommended çš„ TypeScript æ¨èæ ¡éªŒè§„åˆ™é…ç½®</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span> <span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3ã€package.josn è®¾ç½®ï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>4ã€æµ‹è¯•åœ¨ src ä¸‹æ˜¯å¦æœ‰ä¹¦å†™é”™è¯¯çš„è¯­æ³•ï¼šnpm run lint ä¼šè¾“å…¥é”™è¯¯ä¿¡æ¯ã€‚ &gt;eslint src...</p> <p>5ã€ESLint æ’ä»¶ä»£ç çš„å®æ—¶æç¤ºï¼Œä¸éœ€è¦æ‰§è¡Œ npm run lint</p> <p>6ã€é˜²æ­¢ä¸éœ€è¦è¢«æ ¡éªŒçš„æ–‡ä»¶å‡ºç°æ ¡éªŒä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ .eslintignore æ–‡ä»¶è¿›è¡Œé…ç½®</p> <p>7ã€ESLint ç¡®ä¿æ„å»ºã€‚</p> <ul><li><p>åœ¨æ„å»ºæ‰“åŒ…å‰è¿›è¡Œ ESLint æ ¡éªŒèƒ½å¤Ÿç¡®ä¿æ„å»ºæ—¶æ— ä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œä¸€æ—¦ ESLint æ ¡éªŒä¸é€šè¿‡åˆ™ä¸å…è®¸è¿›è¡Œæºç çš„æ„å»ºæ“ä½œã€‚</p></li> <li><p>åœ¨æ„å»ºæ—¶è¿›è¡Œæ ¡éªŒçš„ä¸¥æ ¼æ§åˆ¶ï¼Œä¸€æ—¦ lint æŠ›å‡º warning æˆ–è€… error åˆ™ç«‹é©¬ç»ˆæ­¢æ„å»º</p></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// éœ€è¦æ³¨æ„ Shell ä¸­çš„ &amp;&amp; å’Œ &amp; æ˜¯æœ‰å·®å¼‚çš„ï¼Œ&amp;&amp; ä¸»è¦ç”¨äºç»§å‘æ‰§è¡Œï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡ŒæˆåŠŸï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œ&amp; ä¸»è¦ç”¨äºå¹¶å‘æ‰§è¡Œï¼Œè¡¨ç¤ºä¸¤ä¸ªè„šæœ¬åŒæ—¶æ‰§è¡Œã€‚è¿™é‡Œæ„å»ºçš„å‘½ä»¤éœ€è¦ç­‰å¾… lint å‘½ä»¤æ‰§è¡Œé€šè¿‡æ‰èƒ½è¿›è¡Œï¼Œä¸€æ—¦ lint å¤±è´¥é‚£ä¹ˆæ„å»ºå‘½ä»¤å°†ä¸å†æ‰§è¡Œã€‚</span>
<span class="token comment">// bashæ•™ç¨‹ï¼šhttps://wangdoc.com/bash/</span>
<span class="token comment">// cè¯­è¨€æ•™ç¨‹ï¼šhttps://wangdoc.com/clang/</span>
<span class="token comment">// sshï¼šhttp://wangdoc.com/ssh</span>
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src --max-warnings 0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run lint &amp;&amp; rimraf dist types &amp;&amp; gulp&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>8ã€å¼€å‘è€…æ‰‹å†Œï¼ï¼ï¼ï¼šhttps://www.ruanyifeng.com/blog/developer/</p> <h3 id="prettier-ä»£ç æ ¼å¼è§„åˆ™"><a href="#prettier-ä»£ç æ ¼å¼è§„åˆ™" class="header-anchor">#</a> Prettier ä»£ç æ ¼å¼è§„åˆ™</h3> <p>1ã€å®‰è£…ï¼šnpm i prettier eslint-config-prettier --save-devã€‚ï¼ˆeslint-config-prettierï¼Œç”¨äºè§£å†³ ESLint å’Œ Prettier é…åˆä½¿ç”¨æ—¶å®¹æ˜“äº§ç”Ÿçš„æ ¼å¼è§„åˆ™å†²çªé—®é¢˜ï¼‰</p> <p>2ã€ä½¿ç”¨ï¼š--write å‚æ•°ç±»ä¼¼äº ESLint ä¸­çš„ --fixï¼ˆåœ¨ ESLint ä¸­ä½¿ç”¨è¯¥å‚æ•°è¿˜æ˜¯éœ€è¦è°¨æ…å“ˆï¼Œå»ºè®®è¿˜æ˜¯ä½¿ç”¨ VS Code çš„ Save Auto Fix åŠŸèƒ½ï¼‰ï¼Œä¸»è¦ç”¨äºè‡ªåŠ¨ä¿®å¤æ ¼å¼é”™è¯¯</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prettier src test --write&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>3ã€ä½¿ç”¨ npm run prettier ä»£ç æ ¼å¼ä¿®å¤</p> <p>4ã€Prettier æ’ä»¶ã€‚VS Code çš„ Prettier - Code formatter æ’ä»¶è¿›è¡Œ Save Auto Fix</p> <h3 id="lint-staged"><a href="#lint-staged" class="header-anchor">#</a> Lint Staged</h3> <h4 id="lint-staged-èƒŒæ™¯"><a href="#lint-staged-èƒŒæ™¯" class="header-anchor">#</a> Lint Staged èƒŒæ™¯</h4> <p>åœ¨ Git Commit Message ä¸­ä½¿ç”¨äº† commitlint å·¥å…·é…åˆ husky å¯ä»¥é˜²æ­¢ç”Ÿæˆä¸è§„èŒƒçš„ Git Commit Messageï¼Œä»è€Œé˜»æ­¢ç”¨æˆ·è¿›è¡Œä¸è§„èŒƒçš„ Git ä»£ç æäº¤ï¼Œå…¶åŸç†å°±æ˜¯ç›‘å¬äº† Git Hook çš„æ‰§è¡Œè„šæœ¬ï¼ˆä¼šåœ¨ç‰¹å®šçš„ Git æ‰§è¡Œå‘½ä»¤è¯¸å¦‚ commitã€pushã€merge ç­‰è§¦å‘ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œç›¸åº”çš„è„šæœ¬é’©å­ï¼‰ã€‚Git Hook å…¶å®æ˜¯è¿›è¡Œé¡¹ç›®çº¦æŸéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œå®ƒçš„ä½œç”¨åŒ…æ‹¬ä½†ä¸é™äºï¼š</p> <ul><li>Git Commit Message è§„èŒƒå¼ºåˆ¶ç»Ÿä¸€</li> <li>ESLint è§„åˆ™ç»Ÿä¸€ï¼Œé˜²æ­¢ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç æäº¤</li> <li>Prettier è‡ªåŠ¨æ ¼å¼åŒ–ï¼ˆç±»ä¼¼çš„è¿˜åŒ…æ‹¬ Style æ ·å¼æ ¼å¼ç­‰ï¼‰</li> <li>ä»£ç ç¨³å®šæ€§æäº¤ï¼Œæäº¤ä¹‹å‰ç¡®ä¿æµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡</li> <li>å‘é€é‚®ä»¶é€šçŸ¥</li> <li>CI é›†æˆï¼ˆæœåŠ¡ç«¯é’©å­ï¼‰</li></ul> <p>git é’©å­ï¼šGit ä¸­ pre ç³»åˆ—é’©å­å…è®¸ç»ˆæ­¢å³å°†å‘ç”Ÿçš„ Git æ“ä½œï¼Œè€Œ post ç³»åˆ—å¾€å¾€ç”¨ä½œé€šçŸ¥è¡Œä¸ºã€‚</p> <p>Git Hook çš„é’©å­éå¸¸å¤šï¼Œä½†æ˜¯åœ¨å®¢æˆ·ç«¯ä¸­å¯èƒ½å¸¸ç”¨çš„é’©å­æ˜¯ä»¥ä¸‹ä¸¤ä¸ªï¼š</p> <ul><li><p>pre-commitï¼špre-commit é’©å­åœ¨é”®å…¥æäº¤ä¿¡æ¯ï¼ˆè¿è¡Œ git commit æˆ– git czï¼‰å‰è¿è¡Œï¼Œä¸»è¦ç”¨äºæ£€æŸ¥å½“å‰å³å°†è¢«æäº¤çš„ä»£ç å¿«ç…§ï¼Œä¾‹å¦‚æäº¤é—æ¼ã€æµ‹è¯•ç”¨ä¾‹ä»¥åŠä»£ç ç­‰ã€‚è¯¥é’©å­å¦‚æœä»¥éé›¶å€¼é€€å‡ºåˆ™ Git å°†æ”¾å¼ƒæœ¬æ¬¡æäº¤ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®å‘½ä»¤è¡Œå‚æ•° git commit --no-verify ç»•è¿‡é’©å­çš„è¿è¡Œã€‚</p></li> <li><p>commit-msgï¼šè¯¥é’©å­åœ¨ç”¨æˆ·è¾“å…¥ Commit Message åè¢«è°ƒç”¨ï¼Œæ¥æ”¶å­˜æœ‰å½“å‰ Commit Message ä¿¡æ¯çš„ä¸´æ—¶æ–‡ä»¶è·¯å¾„ä½œä¸ºå”¯ä¸€å‚æ•°ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨è¯¥é’©å­æ¥æ ¸å¯¹ Commit Meesage ä¿¡æ¯ï¼ˆåœ¨ Git Commit Message ä¸­ä½¿ç”¨äº†è¯¥é’©å­å¯¹æäº¤ä¿¡æ¯è¿›è¡Œäº†æ˜¯å¦ç¬¦åˆ Angular è§„èŒƒçš„æ ¡éªŒï¼‰ã€‚è¯¥é’©å­å’Œ pre-commit ç±»ä¼¼ï¼Œä¸€æ—¦ä»¥éé›¶å€¼é€€å‡º Git å°†æ”¾å¼ƒæœ¬æ¬¡æäº¤ã€‚</p></li></ul> <h4 id="lint-staged-é…ç½®"><a href="#lint-staged-é…ç½®" class="header-anchor">#</a> Lint Staged é…ç½®</h4> <p>lint çš„æ˜¯å·²ç»æ”¾å…¥ Git Stage æš‚å­˜åŒºä¸­çš„ä»£ç ï¼Œed åœ¨è‹±æ–‡ä¸­è¡¨æ˜å·²ç»åšè¿‡ï¼Œå‡å°‘ä»£ç çš„æ£€æµ‹é‡ã€‚</p> <p>lint-staged å¯ä»¥åœ¨ç”¨æˆ·æäº¤ä»£ç ä¹‹å‰ï¼ˆç”Ÿæˆ Git Commit Message ä¿¡æ¯ä¹‹å‰ï¼‰ä½¿ç”¨ ESLint æ£€æŸ¥ Git æš‚å­˜åŒºä¸­çš„ä»£ç ä¿¡æ¯ï¼ˆgit add ä¹‹åçš„ä¿®æ”¹ä»£ç ï¼‰ï¼Œä¸€æ—¦å­˜åœ¨ ğŸ’© ä¸€æ ·ä¸ç¬¦åˆæ ¡éªŒè§„åˆ™çš„ä»£ç ï¼Œåˆ™å¯ä»¥ç»ˆæ­¢æäº¤è¡Œä¸ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ lint-staged ä¸ä¼šæ£€æŸ¥é¡¹ç›®çš„å…¨é‡ä»£ç ï¼ˆå…¨é‡ä½¿ç”¨ ESLint æ ¡éªŒå¯¹äºè¾ƒå¤§çš„é¡¹ç›®å¯èƒ½ä¼šæ˜¯ä¸€ä¸ªç›¸å¯¹è€—æ—¶çš„è¿‡ç¨‹ï¼‰ï¼Œè€Œåªä¼šæ£€æŸ¥æ·»åŠ åˆ° Git æš‚å­˜åŒºä¸­çš„ä»£ç ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆé…ç½®é¡¹ä¿¡æ¯ï¼š</p> <p>1ã€å®‰è£…ï¼šnpx mrm lint-staged</p> <p>2ã€é»˜è®¤ç”Ÿæˆçš„é…ç½®æ–‡ä»¶æ˜¯é’ˆå¯¹ JavaScript ç¯å¢ƒçš„ï¼Œæ‰‹åŠ¨ä¿®æ”¹ package.json ä¸­çš„é…ç½®ä¿¡æ¯è¿›è¡Œ TypeScript é€‚é…ï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// æˆ‘ä»¬çš„å“ˆå£«å¥‡å†æ¬¡ä¸Šåœºï¼Œè¿™æ¬¡å®ƒæ˜¯è¦å’¬ç€ä½ çš„ ESLint ä¸æ”¾äº†ï¼Œè¿™é‡Œæˆ‘ç®€ç§°å®ƒçš„åŠ¨ä½œä¸º &quot;å’¬ ğŸ’©&quot; ~~~</span>
<span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">//</span>
    <span class="token property">&quot;commit-msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿™é‡Œéœ€è¦æ³¨æ„ ESLint è„šæœ¬çš„ --max-warnings 0</span>
  <span class="token comment">// å¦åˆ™å°±ç®—å­˜åœ¨ warning ä¹Ÿä¸ä¼šç»ˆæ­¢æäº¤è¡Œä¸º</span>
  <span class="token comment">// è¿™é‡Œè¿½åŠ äº† Prettier çš„è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œç¡®ä¿ä»£ç æäº¤ä¹‹å‰æ‰€æœ‰çš„æ ¼å¼èƒ½å¤Ÿä¿®å¤</span>
  <span class="token property">&quot;*.ts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;npm run lint&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;npm run prettier&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// å³</span>
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// --max-warnings 0</span>
  <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src --max-warnings 0&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3ã€husky åœ¨ package.json ä¸­é…ç½®äº† pre-commit å’Œ commit-msg ä¸¤ä¸ª Git é’©å­ï¼Œä¼˜å…ˆä½¿ç”¨ pre-commit é’©å­æ‰§è¡Œ ESLint æ ¡éªŒï¼Œå¦‚æœæ ¡éªŒå¤±è´¥åˆ™ç»ˆæ­¢è¿è¡Œã€‚å¦‚æœæ ¡éªŒæˆåŠŸåˆ™ä¼šç»§ç»­æ‰§è¡Œ commit-msg æ ¡éªŒ Git Commit Message</p> <h3 id="npm-script-hook"><a href="#npm-script-hook" class="header-anchor">#</a> Npm Script Hook</h3> <p>1ã€github å¼€æºé¡¹ç›®ï¼špackage.json ä¸­çš„ mainã€binã€filesã€script</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// è„šæœ¬å‘½ä»¤</span>
<span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src test --max-warnings 0&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jest --bail --coverage&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run lint &amp;&amp; npm run prettier &amp;&amp; npm run test &amp;&amp; rimraf dist types &amp;&amp; gulp&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rimraf CHANGELOG.md &amp;&amp; conventional-changelog -p angular -i CHANGELOG.md -s&quot;</span>
</code></pre></div><p>2ã€build è„šæœ¬å‘½ä»¤è¿‡äºå¤æ‚ï¼Œé€šè¿‡ npm çš„è„šæœ¬é’©å­ pre å’Œ post å°†è„šæœ¬çš„åŠŸèƒ½åŒºåˆ†å¼€ï¼Œä»è€Œä½¿è„šæœ¬çš„è¯­ä¹‰æ›´åŠ æ¸…æ™°</p> <p>ä¹‹åæ‰§è¡Œ npm run build å‘½ä»¤æ—¶äº‹å®ä¸Šç±»ä¼¼äºæ‰§è¡Œäº†ï¼šnpm run prebuild &amp;&amp; npm run build</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src test --max-warnings 0&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jest --bail --coverage&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;prebuild&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run lint &amp;&amp; npm run prettier &amp;&amp; npm run test&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rimraf dist types &amp;&amp; gulp&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rimraf CHANGELOG.md &amp;&amp; conventional-changelog -p angular -i CHANGELOG.md -s&quot;</span>
</code></pre></div><p>3ã€npm é™¤äº†æŒ‡å®šä¸€äº›ç‰¹æ®Šçš„è„šæœ¬é’©å­ä»¥å¤–ï¼ˆä¾‹å¦‚ prepublishã€postpublishã€preinstallã€postinstall ç­‰ï¼‰ï¼Œè¿˜å¯ä»¥å¯¹ä»»æ„è„šæœ¬å¢åŠ  pre å’Œ post é’©å­ã€‚</p> <h3 id="æ–‡ç« "><a href="#æ–‡ç« " class="header-anchor">#</a> æ–‡ç« </h3> <ul><li><p>ts é¡¹ç›®ï¼šhttps://juejin.cn/post/6856410900577026061ï¼ˆï¼‰</p></li> <li><p>æ‰“åŒ…å·¥å…·ï¼šrollupï¼ˆç»„ä»¶åŠ¨æ€åŠ è½½ï¼Œæ„å»º [ES Module]ï¼ˆhttps://github.com/rollup/rollup/wiki/ES6-modulesï¼‰ çš„ç‰¹æ€§ï¼‰ã€webpackã€viteã€‚</p></li> <li><p>äº’è”ç½‘å¹¿å‘Šï¼š https://www.huxiu.com/article/363114.html</p> <ul><li>è½åœ°é¡µ</li> <li>å•†ä¸šåŒ–</li></ul></li> <li><p>äººç”Ÿ githubï¼š https://liferestart.syaro.io/view/index.html ã€https://github.com/VickScarlet/lifeRestartã€‘</p></li></ul> <h2 id="_07"><a href="#_07" class="header-anchor">#</a> 07</h2> <h3 id="rpc"><a href="#rpc" class="header-anchor">#</a> RPC</h3> <ul><li><p>RPC ä»‹ç» https://mp.weixin.qq.com/s/Ky6SoWJv85orqYioihTRqg</p> <ul><li>æ—¥å¿—åˆ†æï¼štraceId RPC ç­‰ç­‰</li></ul></li> <li><p>js ç±»å‹è½¬åŒ– https://mp.weixin.qq.com/s/NN8DiH9ATZ2RuaDjlls-aw</p></li> <li><p>é¢„æ¸²æŸ“ Next.js https://mp.weixin.qq.com/s/tDPkTwrR031CjsWbiVTVGw</p></li> <li><p>ç™½å±ç›‘æ§ï¼š https://mp.weixin.qq.com/s/q1oXKJCAW7NQjaF0MP3vuA</p></li></ul> <h3 id="css-ä¼ªç±»"><a href="#css-ä¼ªç±»" class="header-anchor">#</a> css ä¼ªç±»</h3> <ul><li><p>css: width:fit-content å¯ä»¥å®ç°å…ƒç´ æ”¶ç¼©æ•ˆæœçš„åŒæ—¶ï¼Œä¿æŒåŸæœ¬çš„ block æ°´å¹³çŠ¶æ€ï¼Œäºæ˜¯ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ margin:auto å®ç°å…ƒç´ å‘å†…è‡ªé€‚åº”åŒæ—¶çš„å±…ä¸­æ•ˆæœäº†</p></li> <li><p>css: :not ä¼ªç±»,ç”¨æ¥åŒ¹é…ä¸ç¬¦åˆä¸€ç»„é€‰æ‹©å™¨çš„å…ƒç´ ã€‚ :not(a):not(.disabled) {}</p> <ul><li>0 çº§æŒ‡æ²¡æœ‰ä¼˜å…ˆçº§ï¼Œ1 çº§æ˜¯æ ‡ç­¾é€‰æ‹©å™¨ï¼Œ10 çº§æ˜¯ç±»é€‰æ‹©å™¨ï¼Œå±æ€§é€‰æ‹©å™¨ï¼Œ100 çº§æ˜¯ ID é€‰æ‹©å™¨ã€‚</li> <li>CSS ä¼ªç±»çš„ä¼˜å…ˆçº§: 0 çº§å’Œ 10 çº§</li> <li>é€»è¾‘ä¼ªç±»çš„ä¼˜å…ˆçº§éƒ½æ˜¯ 0ã€‚ä¾‹å¦‚ï¼š:not()ï¼Œ:is()ï¼Œ:where()ç­‰</li> <li>æ— æ•ˆï¼š :not(.disabled, .read-only) {} /_ æ— æ•ˆï¼Œä¸æ”¯æŒ <em>/ ã€:not(a.disabled) {} /</em> æ— æ•ˆï¼Œä¸æ”¯æŒ _/</li></ul></li> <li><p>:where() CSS ä¼ªç±»å‡½æ•°æ¥å—é€‰æ‹©å™¨åˆ—è¡¨ä½œä¸ºå®ƒçš„å‚æ•°ï¼Œå°†ä¼šé€‰æ‹©æ‰€æœ‰èƒ½è¢«è¯¥é€‰æ‹©å™¨åˆ—è¡¨ä¸­ä»»ä½•ä¸€æ¡è§„åˆ™é€‰ä¸­çš„å…ƒç´ </p> <ul><li>:where() å’Œ :is() çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œ:where() çš„ä¼˜å…ˆçº§æ€»æ˜¯ä¸º 0 ï¼Œä½†æ˜¯ :is() çš„ä¼˜å…ˆçº§æ˜¯ç”±å®ƒçš„é€‰æ‹©å™¨åˆ—è¡¨ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„é€‰æ‹©å™¨å†³å®šçš„ã€‚</li></ul></li></ul> <h2 id="_06"><a href="#_06" class="header-anchor">#</a> 06</h2> <ul><li><p>Vite ä¸­å¤§é‡è¿ç”¨ magic-string è¿™ä¸ªåº“åšä¸€äº›å­—ç¬¦ä¸²çš„é­”æœ¯æ›¿æ¢ï¼Œè¿™ä¸ªåº“çš„ç›®çš„å°±æ˜¯åœ¨ä¸€äº›è½»é‡çº§æ›¿æ¢æºä»£ç çš„åœºæ™¯ä¸­æ›¿ä»£ AST è¿™ç§è¿‡äºåºå¤§çš„è§£å†³æ–¹æ¡ˆã€‚</p></li> <li><p>ç”¨ fast-glob å»å®ç° Vite ä¸­å¥½ç”¨çš„ Glob Import æ‰¹é‡å¯¼å…¥è¯­æ³•</p></li> <li><p>https://github.com/sindresorhusï¼š Promise ç›¸å…³çš„æ¨¡å—</p> <ul><li>p-reduce é€‚ç”¨äºéœ€è¦æ ¹æ®å¼‚æ­¥èµ„æºè®¡ç®—ç´¯åŠ å€¼çš„åœºæ™¯</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// p-reduce/p-reduce.test.js</span>
<span class="token keyword">import</span> delay <span class="token keyword">from</span> <span class="token string">'delay'</span>
<span class="token keyword">import</span> pReduce <span class="token keyword">from</span> <span class="token string">'p-reduce'</span>

<span class="token keyword">const</span> inputs <span class="token operator">=</span> <span class="token punctuation">[</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">pReduce</span><span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºç»“æœï¼š15</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>p-map å¯ä»¥æ§åˆ¶å¹¶å‘ï¼Œä¹Ÿå¯ä»¥å†³å®šæ˜¯å¦åœ¨å‡ºç°é”™è¯¯æ—¶åœæ­¢è¿­ä»£</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// p-map/p-map.test.js</span>

<span class="token comment">// options: object</span>
<span class="token comment">// - concurrency: number â€”â€” å¹¶å‘æ•°ï¼Œé»˜è®¤å€¼ Infinityï¼Œæœ€å°å€¼ä¸º 1ï¼›</span>
<span class="token comment">// - stopOnError: boolean â€”â€” å‡ºç°å¼‚å¸¸æ—¶ï¼Œæ˜¯å¦ç»ˆæ­¢ï¼Œé»˜è®¤å€¼ä¸º trueã€‚</span>

<span class="token keyword">import</span> delay <span class="token keyword">from</span> <span class="token string">'delay'</span>
<span class="token keyword">import</span> pMap <span class="token keyword">from</span> <span class="token string">'p-map'</span>

<span class="token keyword">const</span> inputs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">mapper</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token function">delay</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">pMap</span><span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> mapper<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">concurrency</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºç»“æœï¼š[ 200, 100, 50 ] concurrencyæ§åˆ¶å¹¶å‘æ•°é‡ï¼Œè¶Šå¤§timeè¶ŠçŸ­</span>
  console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>p-filter å¯¹è¿”å›çš„ç»“æœè¿›è¡Œè¿‡æ»¤çš„åœºæ™¯</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// p-filter/p-filter.test.js</span>

<span class="token comment">// options: object</span>
<span class="token comment">// - concurrency: number â€”â€” å¹¶å‘æ•°ï¼Œé»˜è®¤å€¼ Infinityï¼Œæœ€å°å€¼ä¸º 1</span>
<span class="token keyword">import</span> pFilter <span class="token keyword">from</span> <span class="token string">'p-filter'</span>

<span class="token keyword">const</span> inputs <span class="token operator">=</span> <span class="token punctuation">[</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">filterer</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">%</span> <span class="token number">2</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">pFilter</span><span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> filterer<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">concurrency</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºç»“æœï¼š[ 1, 3 ]</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>p-waterfall é€‚ç”¨äºä¸²è¡Œæ‰§è¡Œ ã€Œpromise-returningã€ æˆ– ã€Œasyncã€ å‡½æ•°ï¼Œå¹¶æŠŠå‰ä¸€ä¸ªå‡½æ•°çš„è¿”å›ç»“æœè‡ªåŠ¨ä¼ ç»™ä¸‹ä¸€ä¸ªå‡½æ•°çš„åœºæ™¯</li> <li>p-forever é€‚ç”¨äºéœ€è¦é‡å¤ä¸æ–­æ‰§è¡Œ ã€Œpromise-returningã€ æˆ– ã€Œasyncã€ å‡½æ•°ï¼Œç›´åˆ°ç”¨æˆ·ç»ˆæ­¢çš„åœºæ™¯ã€‚è¯¥æ¨¡å—é»˜è®¤å¯¼å‡ºäº†ä¸€ä¸ª ã€ŒpForeverã€ å‡½æ•°</li> <li>p-times é€‚ç”¨äºæ˜¾å¼æŒ‡å®š ã€Œpromise-returningã€ æˆ– ã€Œasyncã€ å‡½æ•°æ‰§è¡Œæ¬¡æ•°çš„åœºæ™¯</li></ul></li> <li><p><a href="https://mp.weixin.qq.com/s/6RrGm4HletEtohPkGz1_pQ" target="_blank" rel="noopener noreferrer">Object.keys() çš„é¡ºåºæ˜¯å¦‚ä½•å®šä¹‰çš„<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><p>1ã€å®šä¹‰å˜é‡ keys ä¸ºç©ºåˆ—è¡¨</p></li> <li><p>2ã€å¯¹äºå…¥å‚ O çš„æ¯ä¸€ä¸ªç¬¦åˆ ã€array indexã€‘ å®šä¹‰çš„å±æ€§ï¼Œã€å‡åºã€‘æ’åˆ—åæ·»åŠ åˆ° keys åˆ—è¡¨</p></li> <li><p>3ã€å¯¹äºå…¥å‚ O çš„æ¯ä¸€ä¸ªå­—ç¬¦ä¸²å±æ€§ï¼ŒæŒ‰ç…§ã€å®šä¹‰æ—¶é—´é¡ºåºå‡åºã€‘æ’åˆ—åæ·»åŠ åˆ° keys åˆ—è¡¨</p></li> <li><p>4ã€å¯¹äºå…¥å‚ O çš„æ¯ä¸€ä¸ª ã€Symbolã€‘ å±æ€§ï¼ŒæŒ‰ç…§ã€å®šä¹‰æ—¶é—´é¡ºåºå‡åºã€‘æ’åˆ—åæ·»åŠ åˆ° keys åˆ—è¡¨</p></li> <li><p>5ã€è¿”å›æœ€ç»ˆå¾—åˆ°çš„ keys åˆ—è¡¨</p></li> <li><p>array index å®šä¹‰ï¼šAn array indexis aninteger indexwhose numeric valueiis in the range +0 â‰¤i&lt; (2^32- 1).</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ‰§è¡Œç¯å¢ƒ node-v14.16.1</span>
<span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token operator">:</span> <span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'x'</span> <span class="token punctuation">}</span>
object<span class="token punctuation">[</span><span class="token string">'-1'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'x'</span>
object<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'x'</span>
object<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'x'</span>

<span class="token comment">// è¾“å‡º [ '1', '55', '4294967294', 'a', 'c', 'b', '-1', '4294967295' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/foreverwaiting/easy-bookmark/edit/master/docs/daily/day202109.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">12/6/2021, 11:42:20 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/easy-bookmark/daily/" class="prev router-link-active">
        æ—¥å¤ä¸€æ—¥è¯¶
      </a></span> <span class="next"><a href="/easy-bookmark/daily/day202110.html">
        2021-10
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/easy-bookmark/assets/js/app.98929521.js" defer></script><script src="/easy-bookmark/assets/js/2.6ed84ef8.js" defer></script><script src="/easy-bookmark/assets/js/23.ffa9fcfd.js" defer></script>
  </body>
</html>
